<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<link rel="shortcut icon" type="image/x-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico">
<link rel="mask-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/MjliNWVm.svg" color="#4C4C4C">
<link rel="apple-touch-icon-precomposed" href="//res.wx.qq.com/a/wx_fed/assets/res/OTE0YTAw.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">


        <script nonce="248925490" type="text/javascript">
            window.logs = {
                pagetime: {}
            };
            window.logs.pagetime['html_begin'] = (+new Date());
        </script>
        <title>
 硕博论文 | 基于网络特征学习的个性化推荐系统 03#
</title>
        
<style>.radius_avatar{display:inline-block;background-color:#fff;padding:3px;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;overflow:hidden;vertical-align:middle}.radius_avatar img{display:block;width:100%;height:100%;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;background-color:#eee}.rich_media_inner{word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.rich_media_area_primary{padding:20px 16px 12px;background-color:#fafafa}.rich_media_area_primary.voice{padding-top:66px}.rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{color:rgba(0,0,0,0.3);background-color:#fafafa}.rich_media_area_extra{padding:0 16px 24px}.rich_media_extra{padding-top:30px}.mpda_bottom_container .rich_media_extra{padding-top:24px}.mpda_bottom_container .rich_media_extra .mpad_more_list{right:-10px}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.6}body{-webkit-touch-callout:none;font-family:-apple-system-font,BlinkMacSystemFont,"Helvetica Neue","PingFang SC","Hiragino Sans GB","Microsoft YaHei UI","Microsoft YaHei",Arial,sans-serif;color:#333;background-color:#f2f2f2;letter-spacing:.034em}h1,h2,h3,h4,h5,h6{font-weight:400;font-size:16px}*{margin:0;padding:0}a{color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_title{font-size:22px;line-height:1.4;margin-bottom:14px}@supports(-webkit-overflow-scrolling:touch){.rich_media_title{font-weight:700}}.rich_media_meta_list{margin-bottom:22px;line-height:20px;font-size:0;word-wrap:break-word;word-break:break-all}.rich_media_meta_list em{font-style:normal}.rich_media_meta{display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.rich_media_meta.icon_appmsg_tag{margin-right:4px}.rich_media_meta.meta_tag_text{margin-right:0}.rich_media_meta_primary{display:block;margin-bottom:10px;font-size:15px}.meta_original_tag{padding:0 .5em;font-size:12px;line-height:1.4;background-color:#f2f2f2;color:#888}.meta_enterprise_tag img{width:30px;height:30px!important;display:block;position:relative;margin-top:-3px;border:0}.rich_media_meta_link{color:#576b95}.rich_media_meta_text{color:rgba(0,0,0,0.3)}.rich_media_meta_text.rich_media_meta_split{padding-left:10px}.rich_media_meta_text.rich_media_meta_split:before{position:absolute;top:50%;left:0;margin-top:-6px;content:' ';display:block;border-left:1px solid #888;width:200%;height:130%;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;-webkit-transform:scale(0.5);transform:scale(0.5);-webkit-transform-origin:0 0;transform-origin:0 0}.rich_media_meta_text.article_modify_tag{position:relative}.rich_media_meta_nickname{position:relative}.rich_media_thumb_wrp{margin-bottom:6px}.rich_media_thumb_wrp .original_img_wrp{display:block}.rich_media_thumb{display:block;width:100%}.rich_media_content{overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0}.rich_media_content *{max-width:100%!important;box-sizing:border-box!important;-webkit-box-sizing:border-box!important;word-wrap:break-word!important}.rich_media_content p{clear:both;min-height:1em}.rich_media_content em{font-style:italic}.rich_media_content fieldset{min-width:0}.rich_media_content .list-paddingleft-2{padding-left:2.2em}.rich_media_content .list-paddingleft-2 .list-paddingleft-2{padding-left:30px}.rich_media_content blockquote{margin:0;padding-left:10px;border-left:3px solid #dbdbdb}img{height:auto!important}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:portrait){.rich_media_area_extra{padding-bottom:34px}}@media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) and (orientation:landscape){.rich_media_area_primary{padding:20px 60px 15px 60px}.rich_media_area_extra{padding:0 60px 21px 60px}}@media screen and (min-width:1024px){.rich_media_area_primary_inner,.rich_media_area_extra_inner{max-width:677px;margin-left:auto;margin-right:auto}.rich_media_area_primary{padding-top:32px}}.appmsg_share_notice{font-size:16px;color:#888;position:relative;padding:1.25em 0;margin-bottom:1.75em}.appmsg_share_notice:before{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #dfdfdf;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(0.5);transform:scaleY(0.5)}.appmsg_share_notice:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #dfdfdf;-webkit-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(0.5);transform:scaleY(0.5)}.appmsg_share_notice_hd{font-weight:700;padding-bottom:.2em}.cell{padding:.8em 0;display:block;position:relative}.cell_hd,.cell_bd,.cell_ft{display:table-cell;vertical-align:middle;word-wrap:break-word;word-break:break-all;white-space:nowrap}.cell_primary{width:2000px;white-space:normal}.flex_cell{padding:10px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.flex_cell_primary{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;box-flex:1;flex:1}.original_tool_area{display:block;padding:.75em 1em 0;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#333;border:1px solid #eaeaea;margin:20px 0}.original_tool_area .tips_global{position:relative;padding-bottom:.5em;font-size:15px}.original_tool_area .tips_global:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #dbdbdb;-webkit-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(0.5);transform:scaleY(0.5)}.original_tool_area .radius_avatar{width:27px;height:27px;padding:0;margin-right:.5em}.original_tool_area .radius_avatar img{height:100%!important}.original_tool_area .flex_cell_bd{width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.original_tool_area .flex_cell_ft{font-size:14px;color:#888;padding-left:1em;white-space:nowrap}.original_tool_area .icon_access:after{content:" ";display:inline-block;height:8px;width:8px;border-width:1px 1px 0 0;border-color:#cbcad0;border-style:solid;transform:matrix(0.71,0.71,-0.71,0.71,0,0);-ms-transform:matrix(0.71,0.71,-0.71,0.71,0,0);-webkit-transform:matrix(0.71,0.71,-0.71,0.71,0,0);position:relative;top:-2px;top:-1px}.rich_media_global_msg{position:fixed;top:0;left:0;right:0;padding:.85em 35px .85em 15px;z-index:2;background-color:#c6e0f8;color:#888;font-size:12px}.rich_media_global_msg .icon_closed{position:absolute;right:15px;top:50%;margin-top:-5px;line-height:300px;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);background:transparent url(//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/icon_appmsg_msg_closed_sprite.2x42f400.png) no-repeat 0 0;width:11px;height:11px;vertical-align:middle;display:inline-block;-webkit-background-size:100% auto;background-size:100% auto}.rich_media_global_msg .icon_closed:active{background-position:0 -17px}.rich_media_global_msg.voice{color:#1aad19;background-color:#e8f6e8;padding-left:43.3px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rich_media_global_msg.voice .ic_voice{position:absolute;top:50%;margin-top:-10px;left:15px;display:inline-block;width:13.3px;height:18.3px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAA3CAYAAAB+fggjAAAAAXNSR0IArs4c6QAACb9JREFUaAW9WX9wVMUd3917d5cf/Agp1OTuQgIlQqUoI1JI1Noojg2I+VU7hVrtDDpadRypgzKjU52x09KOdsS20ypSO/WPWttcAqhTOlSoU4FIoRUn0wEZIMndBUkwGEhyv97bfvaS97L77t3lHYUuc+z3935397vf/e4LJZfQnuPPsW0d25ZQzr9mELKSUnIVzHxB/Dh+lBOKf4OEk0FOyQAl/CyltIt5tL29d/V2FzIkLUQ4FA7dwon+KCF0Fee8rBBdS5aSs/D+PUrYbyKtkb9b9BzAlA7CERrqDN1DOH8C8HU57FwSGat6kBGypbcluhMwFj+75XWwemf1vHQqtZ0T3pCtelkp73uJ79s9bT39dqs5HQyFK79jcPIKFErtSgLHjPvQHQB0EFt2hDE2QHU6RMvpkODrw3o50Uk5p3w2N/SlUKhHTNZjskHBz2pi6ylbH22J/k3mOToYCAceIYT/AgYVPhxJQTkMQ792Ez/yQCY8d0fgRl0nj8J2G5z1mvSJ3qCMrYOTb5l0xQFBDIUDjxmcbzUFJnu621/kf/DUmlM9k7RLh4LtwRChxquck0bFCqWjxENuijXF/iXoioNVnZU36wZ5D7PTTCWsWhyp4uFYa+x1k3Y5ezj6oNgtdTVpL0Lo+mhr9BwO0Xib+/bcWYZB35Sdg/sXsOSNV8o5MXK0LfoKYXQDxpJOMZ8L1g8E33JQT6aeQRoJCOJEMxjxfCvSEtlnEq5Uj5h7Ayv2I8U+5w9du/va0oyD896ZV004RQKebIzQ53EQ/jJJubJQhUa2YBXPmqNgy8vPjZ67N+NgMh6/HwSfyURgniwqLvmJif8/+sNrY6O4XV5WxjKMuvHDQOl9uCksHmX0xydWn0hYBJfAgncXzBhNjjZSnX8Fq3ENdmWWUMUhS2Ebv5HrtjDNg/+B5IY4wos0cVukUskqUwj9xfKS2W9GSEwi5QdxFS5BMn54dGzkHkhOy0x18j9COY1O5VxmhGJylIxMjgUTC7WUkfrqJAkQpfuP3nFUElO4WUgwHHza0HU1wG1SGOi0jeSI+kf92hgZlXg0yajBV0gUwri4vqZud/O7PbhxkGiNvM5NWHKV3NN8LGQbuVdDsYIVzOzHOI+ygzYhR/RAxwdbELcPZDEp+Q+2YQcS2L+Zwc4gdSUQS7Oz5BwIKUqWyq5ApEdDsVmhBKaHnHDQVUg1uwKLkkm+USEScsbjId/ra+7fbaMThMHVdpoTjuyxXloqcUg+Eqe4WBb26/5hGXeCkynyfdA9Fo/SQeZlN/StjUQtmgQUFxVnKhyJlAUGOgP13OC3ygxGWZhhSYtkYqIicUHGnWCUluoFz8mzkRzOCf14Wfyikx2ThvQ0B6XZdvhi1QaoAfZHmiMf40xMJmih4BvxWQnbNCD3i/cunoYab4FMQwr5o4zb4Uh9ZMxOM3Fsf91YfPQfOAeLTJrouYc8K3rEII0ikBcKRLTEhUQNuo8E7NSGh4dnyDOFzIioOpxkZdqyXYGSAV2rMYjhIUamkL2ZcANvG+MWWS4DU/parDm2R8AiBj/Bz3IQe14DPKeDRho1hNyonFplhgp/mmaNhpH6s0VVToNFxR7TPcVFJVZdgMG4cNBq0LvRQhyA2vLaMyDrFouTL169KzBlGkEofdnScQYMXBI/raiuXC1fs4wz2iXLI+U0y7gd3tewL41IVhLvmM6X2eWycM7nZ9EEAXWgWDWPpjWg7tx8+IbD4llhNTadTn8XcWgVBphprbhbLQkngJK/ymTdoE/IuDPME5jYSYx1HLn3EH6/B77Rq/m+FG2L3d7X1Pe+kx5kCBJp4G0clDWmAJTD0db+NhO398GO4G3cMDJBbPIY9bShfgyb+OXqMwGPV9rrskFsc6t4fck0GRZPQ5GnZBpO4x/wvrAmKfP+FzjjYF9zn5i58s0ET8MX8hnGc+BxOGnFi8innBg7UUBsFaV6Pt1CeBMrKD73qG8CbPnKUHvg/lzG+tr6DlGWufJkEWQp/tjgyMBJPF+fWrhj4XSZeSlwJgaFIhyioY7gHvS3moYyK6TRO6JN0b0mzd6HOgIbEBK/gp7fzsOBGMLUX2Z+bWvvnb1T3sd2fYFbDgoET8/56UTqKEBrizDIeY1463tae1BGObeq9qrlBtXb4aRcmVvCmOjneFq+UFZW9lJ3Q3fee9lSmgAUBwUNd+N9CPjfTfDHO0pO+z1FK081nfpUoUuIuKPPD322Gav5OMjWBCURRBGN4GH0QCGvxSwHhcFguPLnGEip97AKXd5y39dPN5yOy4PaYXGrjKToRsTMIzg4M+38cZz+LNYWe8qZp1Izh0QlEVLfctMmzNb6gCP4GGxFcij5W7usHT++NjaI4uHpadr0KkbpZvAH7DKw9iRi98lsejbFcQWF2LJ/LvOe6Yl14m5eLavhU8gqkQdlWj5YnOSL+sXNWNFNmKT1NQsLkGAez3zcIHmfj44rKAYUd2Jxcek6HCP1cHD+Ig5DzonZnT3WdOyCWFGukRUIwkGTL069kdYz319MmlOf00EhjKpiWKPku7IiDF9X3RHMecvIsjIsPqdh1ewO3SXLOMF5HRQKvS39h5GNOmVlnZP1Mu4W9pZ5/4TDZh0ybHkt3iKOqcm0OaWDQpB52DZTQfQo+Vtl3C08kQGO2OStYtlGz6CuHJxZO3MPYnHYMsDJVSKpW3ghAOXKsxaPoup86q4c7F7cncSyHZANGen0Shl3C+PSPy/L4qmZ97525aAwiMLgQ8Uwp8tl3C2MASff00KJMRW3GXLtIFbwY1kXp/kaGXcL42AoDqHit6p5JxuuHfQwj1IvIhFO9QhyGk/QpskM/C3Gyo0y3YRdOzgnNOcTHJS0qYgVrBIfLE28gF75ToN3bySfrmsHM68tTo7JxuKJ+PUyPhWcqbQ5XarI+TRlZxQeENcOjitS5dMc5/oqu8F8+ODI4FrEoPVpBTfL8akK2YIc9DCiFAkoyTbUdNSU5XPK5Im/MQPeZOKZnpNdCu6AFOTgrJLZO2FDrogrUjyxPbQ/VOxgWyG9Fn71h6hoJkMC8exlvl8qQg6I66rE1A22Vz6PEuwZExe92CrQtmmU72U+fzQ9K/15XV1dsuudrhlc50t0XX8Izq1TdAh5I9rWf69Mc4ILdlCU9kNDn32ICvZS0wySAY2W+shSUdw6OSXTCtpioSgePZrPeydWTUncstF8MPRw1dFvunFO2CnYQaGEk3cSn8iWYyVeBGoImqtG6RHxQsQfEJVskE+34C22GxOfb8fiY40owtaAJ0qnciTxcvSlE7VfBPX3IQ8lb/U2R3dgBRGu7tt/AYJkZEGv/oaXAAAAAElFTkSuQmCC) no-repeat center;background-size:contain}.rich_media_global_msg.voice .icon_more{position:absolute;right:15px;top:50%;margin-top:-6.5px;width:8px;height:13px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAmCAYAAADeB1slAAAAAXNSR0IArs4c6QAAA49JREFUSA2tVk1IVFEUPveOmhQk1ibfvLFZSJtACqJIIpCIoB+imcFV2Z9ZUVnRomgRGFn2i6mFf5XVotCZMYmgIMhlq6BFENFiwjfPAosgFzXOvNu5o3fmeue98Y16F3PP+c453/fu/xCQmvZSWwwJaC0G6P8WND9IoTmbVFRycpqAdgBWkwRo94V960RsPn1aoPpN9RI6CR0WsDWcjAErtUiqTR/S18+HnNcSTv5zYrwDSatVMgLkH6aciwfj79WYW5+OT4xfsyPnBIgvwt872qBW45ZQzaMlJXCfMPJbDQgfRUoIhduVUW2TwArpaWyX+bnYU9JAAH44FaJIccqCW76Ib7NTjhOOvFPN/8q/IvE3cR+npFJgao9rkiSUXjD2GCNqzMnPbNPYjth3mqINlJAvTsk4kiJmWa3eQe8WpxwVzwjwgFFn/CorL29EkY9qovC5CFDrKq7JVoHl6zNTJCf53/lLk78SN/FcbJRx2cZCixC4ZATGXsu4as8YgQjGamN/q5atOotn4K3A1J4BUMbgsh7Wt6sx2bcV4AkjtSPJxkDjRQL0hVwg21zEglSzN+rdKeOybTtFcgK39ajWZDFWr+IZHxfGQ8mV0YA5nMGmDVcCPNcb8R5gYJ1UCWQfp6PFCI4NyZhrAV6EIiHGrPOAB0ImkW2c0la8u8ICc0wUCWrvC1dsw+3TnN6uanDaJ4zeiIfiA9wtWIAX8XspxeA6iuBlaN88hNzCNXk+JwFOuXJYW5tMQmc+EcqgzXGb2n9XFk1NstX5yKczl89JAF+6vRaBM1m5XAu//qkRGrtb8BThTtqH2/V0LmUWwbvsiREw8X0vcJHxxNbjNm3KUuVaMjmPFuWm2CPesHc/kp+yj06hFMhj/PIOOcfVFLk6xZT0G3vMTpmc27MusityZk/OBfKOwA05MPLIDJn3OJldcxTQotpBYOyEXVEWIw/NoInvuHOznSJfVDs0GzneNw9mI+eyOSPQI9phfCqPO38TFhHaFw/Eu/LliNiMESB5w6zkzD05F8mMYJr8mFC263Fa+vAadvXloj4toEcrjlgMjgrQrseHpBcfkm67WD6M6MN6lTWZeoZjyYxGLcB57MGnsEfF3fjU2G189QBpcUqmBLrnSs4504s8GjLxrwm5qYrg3dKFf6x6VbwQ3yOS/wz8+bS0ruwfELaBY2nyoNkn4gvW65GKRn4WForwP+dONHDaOHeZAAAAAElFTkSuQmCC) no-repeat center;background-size:contain}.preview_appmsg .rich_media_title{margin-top:2.3em}@media screen and (min-width:1024px){.rich_media_global_msg{position:relative;margin-bottom:32px}.preview_appmsg .rich_media_title.rich_media_title{margin-top:0}}.pages_reset{color:#333;line-height:1.6;font-size:16px;font-weight:400;font-style:normal;text-indent:0;letter-spacing:normal;text-align:left;text-decoration:none;white-space:normal}.weapp_element,.weapp_display_element,.mp-miniprogram{display:block;margin:1em 0}.share_audio_context{margin:16px 0}.weapp_text_link{font-size:17px}.weapp_text_link:before{content:'';display:inline-block;line-height:1;background-size:contain;background-repeat:no-repeat;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAB4RJREFUWAm1WUuMFGUQnn7szL5mdvbh7GwgEQUlS1weiagxxpigiUZeJgY1cMMDcDCGG8GLCWZvxHjh4BWUeDEsejBBEzWYKBBEiHAABBfCMOwsuzvszrvb+v6Zb7amt1ce0Up6qv6q+qq+/rv778dYkUeUqamp5dFodJPv++ts205blpX2PG8I5cTOiLol44zYZ8vl8vFkMnnlUVpZDwPK5/MpIbWrVqttFlLD0jwiBEHIaNbCGKJjQvai+I9Xq9VD8Xg8y9z76QcimM1mu3t6ej4UYh84jtOFxhBNJGxskhp5xIielZ37bHp6+tNUKnWPOYvp+xKcm5t7S4gclKIpFNGzsmjRkBnUOwNbZjQrtfZ2dnZ+vVgd+O1/CVqlUukjIXZYCqZADBuEJIllc4xh61zmaB9s7LDkHkYPwJgX1KEEx8fHO2TmjkjyPgLQmERIAjHajGnyjDGPOfQ3xvvQCz3ZS+sw5hYAsodbWBhNw4SNGCMBnR/MYS60jskhPyaHe7u4W5otmEGZ8v0gx2YsyDE0bc4Wx8glOe2Dn2No2hqPnuiNXC0tM9i4IA5LcksjNm0BNs417aMNAsRom3HoMD8wsu3QF06TIJaSRCJxXrDmamUBrVEYRejDmDY0JEgsLE4f8mkTj6tb1tsRLkEukiBY56Q4rizThI2okaNtjFlUx+Cr1vzIyTMz7uW/ik4mV7Yd24oMDrR5q1Z01Nav6a5yVsLwcvRS4CI1D5ge+MEdQhbgC1yECSQhjMNsYCGMQ2dzFeuLYxOxibuVBec3cpekY7XtWwZK8a75sMajj2yzcsd5BnccM4PCeg/JoQjJwAY4TFgUMeRjXK54kS/H6uR6e1xvw4vJyuNLYh5yrt8s2d//MtV2M1Nyvvo2F9u5LVUSJEJNPPtKrS7XdXdL6GOzG+LYqIJNUiShYyRDjRw2OXnmnntnsmInE663e3u6uHZVZy2ZsH1sa4Y7ant2DBURu3aj6Jz9c9YBVuNRhz6pvwlju1gsPikzaG78CKIxNgh1sAj91MhFztXrRQf2C+vi1Y721tMC/vZYPQb78rWCE8Tr/uCEJyZbrprNAAST4QOAIGj6qBnDGPjZgmeS0gNRc1jD8D1xx+y978/XJh4awl54nHOl8Do6STKoDarxg5gmxpj2yTEwbtZhDvSlKwUzy+lU1NPxFvz8EcSzpnnYXDCD3AtqFtOFGNM+kMBYx+DzPD/y86m8e+7SnBON2v7qlR01ncP6Gg9uriSlGSSAYyTDhl/7bmTK9tXxkj3ydFetL4lTqT5jyIdgTB/0qT9m3R9/zbvT+Yottfw3XuktJxP1Q61rh/QfcuUcHBKmzcIwdCILQE/crVpHj9+JZe7U17hSyau89lJPxYDVD3KJm5qpWWMnJqMIY+nZvKGv/NQT7ebwcicI5RhYiHBLYx30WQxObWNMyQm5Q0cy7ULK6up0/PUj3dWXn48bckEMGrGZkPJ3bhssunLmLR2qXzyIacxitvT2XZm9jABWMEmD6QPJYzILILdyeWf13Y39ZTSEMAeaQpuxZUujHn26fhCPmI6Dmy0OvIE1AyyqfYWiH7n6d9GJxWz/7df7FpBjLjQETag1Me1HPKxXwJfByXeLRViUYGiI3F/NSYr1raPdNoXh594S75nVT1Z/mUz6kAfhGJp2EI887gRy5Bw0M/g7ndQI0gZISJkpyU6WbTm7m8RYELnFkh+ZnK4/qCTiWF4XXtk6X5NkLjX7iz4rh9keAxBODaKNWKrf9Qd627yC3Cm++2m6DbHWYpHI2Im7UfFZqf6oN9DrmAsPWIquH8QjR8dRG2O88JszW56kTwvRYSayOYtD37xdsT8/ejtWq/nWsqXttdXDHdW+RNTHY9Vv5/IuTgPHtfxd7w0V04/V1ziND5IiCeTofsyTw3tRnqyfNY9b8qg1JkktXwo0EKAlg23eO2/2l7/5YaoNTyPYNIFEt6xxr/aVQQ75QTxJkEBYnDFocEKOqYQHVnn+uiCBLji1IBnCBiVZ+U6fv+dmshV7cqpq9fY4/tBg1HtudXe1zeyuRs9fHMRrEvQBQT9smb1Z+YphHljr3cWJF2gB7NOENAhAjrWGP9iIPuZhDOFYa/hD8KOxWOyAweAHEnxpqnvrvyyofbQZg4boZsEcjrUO4mX2Wl6a6jdhQeAtSoJ70YDNoIMFwmJoqImF5Wgf8jHGRhx0Y9vLNzrkNQligPdRuZpHgyDEKIixMPMQow82/dC04YdgzFwdg0+2Uf1OjPzmOYhBQ6xCoYCX9626WDOo9pqNqHUO7IfBy0XxYJ8+UHdiYuJ9AHQT2GGiycHmmLNDkmFY+JCPXrlcbqcMW28/iCNpEcHnt/3SwHzhQiEIG5JAGDYsN8yHGjil5Ir9BKVDa4U5ta/xveagNDCfRBhDQ5JczEaujhHb0FlclMFzLpDTepEEgxijAL6VSCNcPLPw6aa0oSEgTZsx+GFjwyIsenRmZmbkfuQMDj8PKrjjyCHZIw02im7eGokHAQhnFjZ8GAux/+8jOhoFhX9DCIG1EsPfD9jMC5j4/rO/If4BCiyOk7IAfLMAAAAASUVORK5CYII=');vertical-align:middle;font-size:11px;color:#888;margin-right:6px;margin-top:-3px;background-position:center;height:20px;width:20px}.flex_context{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex_bd{-webkit-box-flex:1;-webkit-flex:1;flex:1;word-wrap:break-word;word-break:break-all}.original_page{background-color:#fff;font-size:16px}.account_info{padding:0 0 20px}.account_info .flex_bd{padding-left:.85em}.radius_avatar.account_avatar{width:40px;height:40px;padding:0}.account_nickname{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;line-height:1.2;color:#576b95;font-size:14px}.account_nickname_inner{font-weight:400;vertical-align:top}.account_desc{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;color:#b2b2b2;font-size:13px;line-height:1.2;padding-top:.3em}.account_desc_inner{display:inline;vertical-align:top}.share_notice{margin-bottom:20px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.share_media{padding-bottom:18px}.original_panel{padding:20px;background-color:#fcfcfc;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;position:relative}.original_panel:after{content:" ";border:1px solid #d8d8d8;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;position:absolute;top:0;left:0;width:200%;height:200%;-webkit-transform:scale(0.5);transform:scale(0.5);-webkit-transform-origin:0 0;transform-origin:0 0;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.original_panel .original_account{margin-bottom:18px;position:relative;z-index:1}.original_panel .original_account_avatar{width:28px;height:28px;padding:0}.original_panel .original_account_nickname{padding-left:.85em;font-size:15px;color:#576b95}.original_panel_title{font-size:23px;color:#000;margin:0 0 16px}.original_panel_content{color:#333}.original_panel_tool{padding-top:20px;position:relative;z-index:1}.original_cell_nickname{display:inline-block;vertical-align:middle;font-weight:400;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;max-width:8em;color:#000}.original_tool_area{padding:1.17em 0;border-width:0;position:relative}.original_tool_area:before{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #dfdfdf;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(0.5);transform:scaleY(0.5)}.original_tool_area:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #dfdfdf;-webkit-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(0.5);transform:scaleY(0.5)}.original_tool_area .radius_avatar{width:20px;height:20px;margin-right:.2em}.original_tool_area .flex_cell{padding:0;font-size:14px}.original_tool_area .icon_access:after{margin-right:4px;top:0}.preview_appmsg .rich_media_title{margin-top:1.5em}.preview_appmsg .account_info{padding-top:3em}.original_page{background-color:transparent}.account_info{-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0;padding-bottom:20px;font-size:14px}.account_info.appmsg_account_info{padding-bottom:32px}.account_info .radius_avatar img{background-color:transparent}.share_notice{font-size:16px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.original_panel{background-color:#fafafa}.original_panel:after{border-color:#e6e6e6}.original_panel .original_account_avatar{width:30px;height:30px}.original_panel_tool{font-size:14px}.original_panel_tool a{color:#576b95}.original_panel_content{font-size:17px}.share_media{padding-bottom:30px}.icon_appmsg_tag{display:inline-block;vertical-align:middle;padding:0 .5em;font-size:12px;line-height:1.5;background-color:#c3c3c3;color:#fff;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;max-width:70%}.icon_appmsg_tag.primary{color:#3bb638;padding:4px .78em;background-color:rgba(9,187,7,0.08);font-size:12px;border-top-left-radius:.95em 50%;-moz-border-radius-topleft:.95em 50%;-webkit-border-top-left-radius:.95em 50%;border-top-right-radius:.95em 50%;-moz-border-radius-topright:.95em 50%;-webkit-border-top-right-radius:.95em 50%;border-bottom-left-radius:.95em 50%;-moz-border-radius-bottomleft:.95em 50%;-webkit-border-bottom-left-radius:.95em 50%;border-bottom-right-radius:.95em 50%;-moz-border-radius-bottomright:.95em 50%;-webkit-border-bottom-right-radius:.95em 50%}.icon_appmsg_tag.default{border:1px solid rgba(0,0,0,0.1);color:rgba(0,0,0,0.3);background-color:transparent;padding:0 .54em;font-size:15px;line-height:1.3;border-top-left-radius:.67em 50%;-moz-border-radius-topleft:.67em 50%;-webkit-border-top-left-radius:.67em 50%;border-top-right-radius:.67em 50%;-moz-border-radius-topright:.67em 50%;-webkit-border-top-right-radius:.67em 50%;border-bottom-left-radius:.67em 50%;-moz-border-radius-bottomleft:.67em 50%;-webkit-border-bottom-left-radius:.67em 50%;border-bottom-right-radius:.67em 50%;-moz-border-radius-bottomright:.67em 50%;-webkit-border-bottom-right-radius:.67em 50%}.rich_media_meta_list .icon_appmsg_tag.default{margin-top:-1px}.icon_appmsg_tag.title_tag{background-color:#d04b4e}.icon_global_tag_wrp{text-align:right;padding-bottom:12px}.icon_global_tag{background-color:rgba(118,118,118,0.16);color:rgba(0,0,0,0.41);line-height:2.2;border-top-left-radius:1em 50%;-moz-border-radius-topleft:1em 50%;-webkit-border-top-left-radius:1em 50%;border-bottom-left-radius:1em 50%;-moz-border-radius-bottomleft:1em 50%;-webkit-border-bottom-left-radius:1em 50%;padding:0 1.8em 0 1.34em;font-size:12px;margin-right:-24px;display:inline-block;vertical-align:top}.global_plain_btn{display:inline-block;vertical-align:middle;padding:0 1em;line-height:2;font-size:14px;-webkit-tap-highlight-color:rgba(0,0,0,0);border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px}.global_plain_btn.primary{color:#1aad19;border:1px solid currentColor}.global_plain_btn.primary:active{color:rgba(26,173,25,0.6)}.wx_video_context{color:#fefefe;position:relative;background-color:#000}.wx_video_thumb,.wx_video_thumb_primary{position:absolute;left:0;width:100%;height:100%!important;top:0}.wx_video_thumb_primary{-webkit-background-size:cover;background-size:cover;background-position:50% 50%;background-repeat:no-repeat}.wx_video_play_btn{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin-top:-2px;font-size:0;border-width:0;background-color:transparent;padding:0;outline:0;z-index:2}.wx_video_play_btn:before{content:" ";display:inline-block;width:0;height:0;border-width:14px 0 14px 25px;border-color:transparent transparent transparent #fff;border-style:dotted dotted dotted solid}.wx_video_mask{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(0,0,0,0.5)}.place_audio_area{min-height:100px;background-color:#fdfdfd;display:block;margin:16px 0}.place_music_area{min-height:68px;background-color:#fdfdfd;display:block;margin:17px 0 16px}.rich_media_empty_extra{background-color:#fafafa}.appmsg_skin_default.rich_media_empty_extra{background-color:#fff}.appmsg_skin_default .rich_media_area_primary{background-color:#fff}.appmsg_skin_default .rich_media_area_primary .weui-loadmore_line .weui-loadmore__tips{background-color:#fff}.appmsg_style_default .rich_media_tool{padding-top:15px}.rich_media_title_ios{font-weight:700}.read-more__area{margin:30px 0}.read-more__desc{margin-bottom:10px}.read-more__article__extra{font-size:14px;color:rgba(0,0,0,0.5)}.read-more__article__item{margin-bottom:10px}</style>
<style>
        </style>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/pc435ee6.css">
<![endif]-->

    </head>
    <body id="activity-detail" class="zh_CN mm_appmsg  appmsg_skin_default appmsg_style_default">
        
<script nonce="248925490" type="text/javascript">
    var biz = ""||"MzI0MTI1Nzk1MA==";
    var sn = "" || ""|| "af7247a0194b3939f70a688988e5dd3f";
    var mid = "" || ""|| "2651677541";
    var idx = "" || "" || "1";
    window.__allowLoadResFromMp = true; 
    
        
</script>
<script nonce="248925490" type="text/javascript">
var page_begintime=+new Date,is_rumor="",norumor="";
1*is_rumor&&!(1*norumor)&&biz&&mid&&(document.referrer&&-1!=document.referrer.indexOf("mp.weixin.qq.com/mp/rumor")||(location.href="http://mp.weixin.qq.com/mp/rumor?action=info&__biz="+biz+"&mid="+mid+"&idx="+idx+"&sn="+sn+"#wechat_redirect"));
</script>
<script nonce="248925490" type="text/javascript">
var MutationObserver=window.WebKitMutationObserver||window.MutationObserver||window.MozMutationObserver,isDangerSrc=function(t){
if(t){
var e=t.match(/http(?:s)?:\/\/([^\/]+?)(\/|$)/);
if(e&&!/qq\.com(\:8080)?$/.test(e[1])&&!/weishi\.com$/.test(e[1]))return!0;
}
return!1;
},ishttp=0==location.href.indexOf("http://");
-1==location.href.indexOf("safe=0")&&ishttp&&"function"==typeof MutationObserver&&"mp.weixin.qq.com"==location.host&&(window.__observer_data={
count:0,
exec_time:0,
list:[]
},window.__observer=new MutationObserver(function(t){
window.__observer_data.count++;
var e=new Date,r=[];
t.forEach(function(t){
for(var e=t.addedNodes,o=0;o<e.length;o++){
var n=e[o];
if("SCRIPT"===n.tagName){
var i=n.src;
isDangerSrc(i)&&(window.__observer_data.list.push(i),r.push(n)),!i&&window.__nonce_str&&n.getAttribute("nonce")!=window.__nonce_str&&(window.__observer_data.list.push("inlinescript_without_nonce"),
r.push(n));
}
}
});
for(var o=0;o<r.length;o++){
var n=r[o];
n.parentNode&&n.parentNode.removeChild(n);
}
window.__observer_data.exec_time+=new Date-e;
}),window.__observer.observe(document,{
subtree:!0,
childList:!0
})),function(){
if(-1==location.href.indexOf("safe=0")&&Math.random()<.01&&ishttp&&HTMLScriptElement.prototype.__lookupSetter__&&"undefined"!=typeof Object.defineProperty){
window.__danger_src={
xmlhttprequest:[],
script_src:[],
script_setAttribute:[]
};
var t="$"+Math.random();
HTMLScriptElement.prototype.__old_method_script_src=HTMLScriptElement.prototype.__lookupSetter__("src"),
HTMLScriptElement.prototype.__defineSetter__("src",function(t){
t&&isDangerSrc(t)&&window.__danger_src.script_src.push(t),this.__old_method_script_src(t);
});
var e="element_setAttribute"+t;
Object.defineProperty(Element.prototype,e,{
value:Element.prototype.setAttribute,
enumerable:!1
}),Element.prototype.setAttribute=function(t,r){
"SCRIPT"==this.tagName&&"src"==t&&isDangerSrc(r)&&window.__danger_src.script_setAttribute.push(r),
this[e](t,r);
};
}
}();
</script>

        <link rel="dns-prefetch" href="//res.wx.qq.com">
<link rel="dns-prefetch" href="//mmbiz.qpic.cn">
<link rel="shortcut icon" type="image/x-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico">
<link rel="mask-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/MjliNWVm.svg" color="#4C4C4C">
<link rel="apple-touch-icon-precomposed" href="//res.wx.qq.com/a/wx_fed/assets/res/OTE0YTAw.png">
<script nonce="248925490" type="text/javascript">
    String.prototype.html = function(encode) {
        var replace =["&#39;", "'", "&quot;", '"', "&nbsp;", " ", "&gt;", ">", "&lt;", "<", "&yen;", "¥", "&amp;", "&"];
        
		
		
		
		
        
        var replaceReverse = ["&", "&amp;", "¥", "&yen;", "<", "&lt;", ">", "&gt;", " ", "&nbsp;", '"', "&quot;", "'", "&#39;"];
	    var target;
	    if (encode) {
	    	target = replaceReverse;
	    } else {
	    	target = replace;
	    }
        for (var i=0,str=this;i< target.length;i+= 2) {
             str=str.replace(new RegExp(target[i],'g'),target[i+1]);
        }
        return str;
    };

    window.isInWeixinApp = function() {
        return /MicroMessenger/.test(navigator.userAgent);
    };

    window.getQueryFromURL = function(url) {
        url = url || 'http://qq.com/s?a=b#rd'; 
        var tmp = url.split('?'),
            query = (tmp[1] || "").split('#')[0].split('&'),
            params = {};
        for (var i=0; i<query.length; i++) {
            var arg = query[i].split('=');
            params[arg[0]] = arg[1];
        }
        if (params['pass_ticket']) {
        	params['pass_ticket'] = encodeURIComponent(params['pass_ticket'].html(false).html(false).replace(/\s/g,"+"));
        }
        return params;
    };

    (function() {
	    var params = getQueryFromURL(location.href);
        window.uin = params['uin'] || "" || '';
        window.key = params['key'] || "" || '';
        window.wxtoken = params['wxtoken'] || '';
        window.pass_ticket = params['pass_ticket'] || '';
        window.appmsg_token = "";
    })();

    function wx_loaderror() {
        if (location.pathname === '/bizmall/reward') {
            new Image().src = '/mp/jsreport?key=96&content=reward_res_load_err&r=' + Math.random();
        }
    }

</script>

<script nonce="248925490" type="text/javascript">
        window.__moon_report_uin = "0";
            window.no_moon_ls = 0;
    </script>

        
<script nonce="248925490" type="text/javascript">
    var write_sceen_time = (+new Date()); 
</script>

<div id="js_article" class="rich_media">
    
    <div id="js_top_ad_area" class="top_banner"></div>
    
    <div class="rich_media_inner">

        
        
        <div id="page-content" class="rich_media_area_primary">
          <div class="rich_media_area_primary_inner">
                                    
                        

            <div id="img-content">

                
                <h2 class="rich_media_title" id="activity-name">
                    
                    
                    硕博论文 | 基于网络特征学习的个性化推荐系统 03#

                                                                                </h2>
                <div id="meta_content" class="rich_media_meta_list">
                                                            <span id="copyright_logo" class="rich_media_meta rich_media_meta_text meta_tag_text">原创：</span>
                                                            <span class="rich_media_meta rich_media_meta_text">
                                                王鸿伟
                                            </span>
                                        
                                        <span class="rich_media_meta rich_media_meta_nickname" id="profileBt">
                      <a href="javascript:void(0);" id="js_name">
                        知识工场                      </a>
                      <div id="js_profile_qrcode" class="profile_container" style="display:none;">
                          <div class="profile_inner">
                              <strong class="profile_nickname">知识工场</strong>
                              <img class="profile_avatar" id="js_profile_qrcode_img" src="" alt="">

                              <p class="profile_meta">
                              <label class="profile_meta_label">微信号</label>
                              <span class="profile_meta_value">fudankw</span>
                              </p>

                              <p class="profile_meta">
                              <label class="profile_meta_label">功能介绍</label>
                              <span class="profile_meta_value">知识工场依托复旦大学等研究机构专注于各类知识图谱构建、管理与应用理论及关键技术研究。知识工场以构建能够满足机器语言认知需要的大规模、高质量知识图谱为基本目标，并以推进知识图谱在文本理解、智慧搜索以及机器智脑等领域中的深入应用为主要使命。</span>
                              </p>
                              
                          </div>
                          <span class="profile_arrow_wrp" id="js_profile_arrow_wrp">
                              <i class="profile_arrow arrow_out"></i>
                              <i class="profile_arrow arrow_in"></i>
                          </span>
                      </div>
                    </span>


                    <em id="publish_time" class="rich_media_meta rich_media_meta_text"></em>





                </div>
                
                
                
                
                                                
                                                                
                                
                
                <div class="rich_media_content " id="js_content">
                    

                    

                    
                    
                    <blockquote><p><strong style="max-width: 100%;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">作者：</span></strong><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;">王鸿伟，斯坦福大学计算机系博士后，2014年获得上海交通大学计算机系（ACM试点班）学士学位，2018年获得上海交通大学计算机系博士学位，研究方向为推荐系统和图数据挖掘。他曾在WWW，AAAI，WSDM，CIKM，TPDS等国际会议和期刊上发表十余篇论文。在博士期间获得谷歌博士生奖研金、国家奖学金等多项荣誉。</span></p></blockquote><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></p><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></p><section class="" data-tools="135编辑器" data-id="92498" style="max-width: 100%;box-sizing: border-box;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);border-width: 0px;border-style: none;border-color: initial;overflow-wrap: break-word !important;"><section style="padding-top: 15px;padding-bottom: 15px;max-width: 100%;box-sizing: border-box;display: flex;justify-content: center;overflow-wrap: break-word !important;"><section style="max-width: 100%;background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRxf66M6VNaEX3KX6hq6NT82o7rh07vjTCorNM3ic37oogWaKPeVxibvQdcxIcHvIsvT6Thhf6dquZjQ/640?wx_fmt=png&quot;);background-position: left top;background-repeat: no-repeat;background-size: 30px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><section style="padding: 8px 12px;max-width: 100%;box-sizing: border-box;background-image: url(&quot;https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRxf66M6VNaEX3KX6hq6NT82UGAvuxC4UpMEJF9oiaWnkMPkFD6tXVzsoBeue2pYLVtdvyZJ6VRCUVA/640?wx_fmt=png&quot;);background-position: right bottom;background-size: 30px;background-repeat: no-repeat;overflow-wrap: break-word !important;"><section class="" data-brushtype="text" style="padding-right: 20px;padding-left: 20px;max-width: 100%;box-sizing: border-box;line-height: 30px;background-color: rgb(170, 206, 219);font-size: 16px;color: rgb(255, 255, 255);overflow-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;overflow-wrap: break-word !important;">第 5 章 知识图谱辅助的推荐系统——基于特征的方法</strong></section></section></section></section></section><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><strong><span style="font-size: 16px;">5.1 引言</span></strong></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在前三章中，我们分别研究了应用于推荐系统交互图的网络特征学习方法和社交网络辅助的推荐系统。在推荐系统中，除了用户-物品交互图和用户端的社交网络之外，物品端也可能会存在一种特殊的网络结构，叫做知识图谱（knowledge graph）。例如，在电影推荐中，电影本身就是知识图谱中的一个实体，在知识图谱中会和很多其它实体相连接，例如导演、演员、类别、国家等（如图5–1所示）。在新闻推荐中，新闻文本中通常也会包含丰富的知识实体信息（如图5–3所示）。物品端的知识图谱极大地扩展了物品的信息，强化了物品之间的联系，为推荐提供了丰富的参考价值。同时，知识图谱还能为推荐结果带来了额外的多样性（diversity）和可解释性（explainability）。而且，和社交网络相比，知识图谱是一种异构网络（heterogeneous network），因此针对知识图谱的算法设计要更复杂和精巧。本章和第六章将研究知识图谱辅助的推荐系统。和前两章类似，本章主要关注于基于特征的方法，第六章将研究基于结构的方法。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">基于特征的知识图谱辅助的推荐算法的核心是知识图谱特征学习（knowledge graph embedding，KGE）的引入。一般而言，知识图谱是一个由三元组 (head,relation,tail) 组成的异构网络。由于知识图谱天然的高维性和异构性，一种有效的方法是首先使用知识图谱特征学习对其进行处理，从而得到实体和关系的低维稠密向量表示。这些低维的向量表示可以较为简单和自然地与推荐系统进行结合和交互。在这种处理框架下，推荐系统和知识图谱特征学习事实上就变成了两个相关的任务。相应地，我们也有不同的结合这两个任务的手段（如图5–2所示），即依次学习法（one-by-one learning）和交替学习法（alternate learning）：</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.5451737451737452" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwnSwg47aqvzScxLmgdmneZGuhcp7ELia4XaPCoQZRuUWQJvwXORlG61a9SuYGkFACCHVK0sdLg2jg/640?wx_fmt=png" data-type="png" data-w="1295" style=""  /></p><p style="text-align: center;"><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 12px;color: rgb(136, 136, 136);box-sizing: border-box !important;overflow-wrap: break-word !important;">图 5–1 电影推荐场景中的知识图谱。</span><br  /></p><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.31088488645262335" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwnSwg47aqvzScxLmgdmneZPMpribo4SuaiaNiaAr1tib7lToETVC7KXfU4xUNYA3kSZjicgibVKeT3pa3w/640?wx_fmt=png" data-type="png" data-w="1277" style=""  /></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136);font-size: 12px;">图 5–2 基于特征的知识图谱辅助的推荐系统中，结合知识图谱特征学习任务和推荐系统任务的两种手段。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.4617760617760618" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwnSwg47aqvzScxLmgdmneZauXSibickm5rccz0nFUN0ibnBMa7bOQjNlg2oUnxzBNy3RpppPr12WQwg/640?wx_fmt=png" data-type="png" data-w="1295" style=""  /></p><p style="text-align: center;"><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);color: rgb(136, 136, 136);font-size: 12px;box-sizing: border-box !important;overflow-wrap: break-word !important;">图 5–3 两条通过知识实体相连的新闻。</span><br  /></p><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></p><p><strong><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 16px;box-sizing: border-box !important;overflow-wrap: break-word !important;">依次学习法&nbsp;</span></strong></p><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">依次训练法首先使用知识图谱特征学习得到知识图谱中的实体向量和关系向量，然后将这些低维向量引入推荐系统，学习得到用户向量和物品向量。在本章中，我们将以新闻推荐为例介绍依次学习法的应用。随着互联网的迅速发展，人们的新闻阅读习惯也逐渐由传统媒体（新闻、电视）转移到互联网上。在线新闻网站，如谷歌新闻或必应新闻，从多个新闻来源中收集新闻并提供给用户。为了避免新闻数量过多引起的信息超载问题，使用新闻推荐算法进行个性化推荐就成为了一个关键问题[132–137]。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">一般而言，新闻推荐有三个主要的挑战：（1）和电影或餐馆不同，新闻通常是高度时间敏感的，新闻的时效性会在短期内快速衰减。过时的新闻会频繁地被新的新闻替代，这使得传统的基于ID的方法（例如协同过滤[138]）很难奏效。（2）用户对新闻阅读通常是话题敏感的，一个用户通常会对一些特定的新闻类型感兴趣。在给定一篇候选新闻时，如何基于一个用户的阅读历史来动态地衡量他的偏好是新闻推荐系统是关键问题。（3）新闻的语言通常高度浓缩，且包含了大量的知识实体和常识。例如，如图5–3所示，一个用户点击了一条新闻“Johnson Has Warned Donald Trump To Stick To The Iran Nuclear Deal”，其中包含了四个知识实体：“Boris Johnson”、“Donald Trump”、“Iran”和 “Nuclear”。事实上，该用户很有可能会对另一条新闻“North Korean EMP Attack Would Cause Mass U.S. Starvation, Says Congressional Report”感兴趣，因为它和上一条新闻有很多共同的上下文知识（虽然他们的标题中并没有共同的词汇）。然而，传统的语义模型[68] 或话题模型[125] 只能基于词汇的共现（co-occurrence）或聚类（clustering）结构来计算文档的相关性，而无法发现这种隐含的、知识层面的联系。这样的后果是一个用户的阅读模式会被限制在一个很小的范围中而无法得到合理得扩展。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">为了刻画新闻之间深层的逻辑关系，有必要在新闻推荐中引入知识图谱。在本章中， 我们提出了 DKN（deep knowledge-aware network）模型来使用外部知识辅助新闻推荐。 DKN是一个基于内容的（content-based）CTR预测模型，它读取一个用户和一条新闻作为输入并输出预估的点击概率。DKN 模型也是依次学习法的代表：我们首先收集数据集里新闻标题中出现过的所有实体，并构建出一个知识图谱。然后，我们应用知识图谱特征学习方法，对每个实体学习得到一个向量表示（实体向量）。对于一条新闻，我们将其标题中的每个单词链接到知识图谱中的一个实体（如果存在的话），然后设计了一个知识感知的卷积神经网络（knowledge - aware convolutional neural networks，KCNN）来融合单词的词向量和实体向量，并得到新闻标题的最终向量表示。和已有工作[139] 不同， KCNN有两个特点：（1）多通道（multi-channel）。和图片中的三通道类似，KCNN将词向量和实体向量视为多个堆叠的通道；（2）单词-实体对齐（word-entity-aligned）。KCNN 在多通道中将同个单词的不同表示进行对齐，以进行后续的表征融合。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">基于 KCNN，我们得到了每个新闻标题的一种知识感知的表示向量。给定一条候选新闻，为了动态地聚合用户的历史兴趣，DKN 中设计了一种注意力机制（attention mechanism）模块来自动将候选新闻与用户的历史点击记录进行匹配，并加权聚合用户的历史作为其表示向量。用户的表示向量和候选新闻的表示向量最终被输入到一个神经网络中进行点击率预测。</span></p><p><span style="max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);font-size: 14px;box-sizing: border-box !important;overflow-wrap: break-word !important;"></span><br  /></p><p><strong><span style="font-size: 16px;">交替学习法&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">交替训练法将知识图谱特征学习和推荐系统视为两个分离但又相关的任务，使用多任务学习（multi-tasklearning，MTL）的框架进行交替学习。在本章中，我们研究一个通用的、基于多任务学习的“知识图谱 + 推荐系统”框架MKR（multi-task learning for knowledge graph enhanced recommendation）。MKR的目标是使用知识图谱特征学习任务辅助推荐系统任务注意到这两个任务并非互相独立，而是高度相关，因为推荐系统中的一个物品可能和知识图谱中的一个或多个实体相连。因此，一个物品和它相关联的实体可能会在推荐系统交互图中和知识图谱中有相似的邻近关系结构，并且在隐含的向量空间中共享相似的特征[140]。为了对物品和实体之间的共享特征进行建模，我们在MKR 中设计了一个交叉压缩单元（ cross&amp;compressunit ）。交叉压缩单元可以显式地模拟物品和实体特征的高阶交互，并且自动控制两个任务之间的知识迁移。通过交叉压缩单元， 物品和实体的特征可以相互补充，辅助这两个任务避免过拟合、提高泛化能力。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;max-width: 100%;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);box-sizing: border-box !important;overflow-wrap: break-word !important;"></span>MKR 是交替学习法的代表：在训练过程中，我们首先固定知识图谱特征学习任务的参数，在推荐系统任务上进行参数更新和优化；然后两者互换，推荐系统任务的参数被固定，知识图谱特征学习任务的参数被更新。这种学习方式类似于交替最小二乘法 （alternatingleastsquare，ALS），只不过，在实际操作中，由于两个任务的重要程度不同， 两者的更新频率并不一定相同。我们会在后续部分进行详述。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们探究了MKR的表现能力，并通过理论分析证明交叉压缩单元可以模拟物品和实体之间足够高阶的特征交互。我们也阐述了MKR是若干种有代表性的推荐算法或多任务学习算法的一般版本。最后，我们在三个推荐场景中验证了MKR的性能，即电影推荐、图书推荐和新闻推荐。实验结果表明 MKR 相比于基准方法有明显的性能提升， 无论是 CTR 预估任务（例如，电影推荐场景中平均有 12.3% 的 AUC 指标提升）还是 top-K 推荐任务（例如，图书推荐场景中平均有60.3%的F1@5指标提升）。</span></p><p><br  /></p><p><strong><span style="font-size: 16px;">5.2 预备知识&nbsp;</span></strong></p><p><br  /></p><p><strong><span style="font-size: 16px;">5.2.1 知识图谱特征学习&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">一个典型的知识图谱包含了数百万条“实体-关系-实体”的三元组(h,r,t)，其中 h、r、t 分别代表了一个三元组的头结点、关系、尾节点。给定知识图谱中所有的三元组， 知识图谱特征学习的目的是要为每个实体和向量都学习得到一个低维特征表示，并且保留原有的知识图谱的结构信息。近年来，知识图谱特征学习中的一种基于翻译的方法， 由于其简介的模型和优越的性能，引起了很多关注。我们在本节中简单介绍基于翻译的方法。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><span style="font-size: 15px;">•&nbsp;&nbsp;</span>TransE[82] 希望&nbsp;<strong>h</strong>+<strong>r</strong>≈<strong>t&nbsp;</strong>满足，如果 (<strong>h</strong>,<strong>r</strong>,<strong>t</strong>) 是一个三元组的话。其中&nbsp;<strong>h</strong>、<strong>r&nbsp;</strong>分别 是 <strong>h</strong>、<strong>r</strong>、<strong>t</strong> 的表示向量。因此，如果 (<strong>h</strong>,<strong>r</strong>,<strong>t</strong>) 是一个三元组的话，TransE 希望下面的评分函数尽可能低。&nbsp;</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.14066496163682865" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmkT5PEYSpGrXYK3Bq83skEqbjkr1r6qUzjqr8EOvpdH9qfhDjPx2O9w/640?wx_fmt=png" data-type="png" data-w="782" style="width: 266px;height: 37px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-1)</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;">•&nbsp;&nbsp;</span>TransH[83] 希望实体在不同的关系中有不同的表示。因此TransH将实体向量投影到关系的超平面上：&nbsp;</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.1375233354075918" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmrZEnbnI2mQibf5xBEVmfGP0fBdWbAHcj2b6Oia7tCPdXJtfibPicBhgLdA/640?wx_fmt=png" data-type="png" data-w="1607" style="width: 285px;height: 39px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-2)</span><br  /></p><p><br  /></p><p style="text-align: left;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.1562809099901088" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmUT4FSMPfOJnNtAUwcJdRnYcrOZQYxLLSFPMaDQ4THUl0A5LXjRoKOg/640?wx_fmt=png" data-type="png" data-w="1011" style="width: 131px;height: 20px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.1588683351468988" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm1SqR91K54ibmosicMjh5VppjR5uibQibQnW7m2qV1C68UG4Jj3OVZvZthQ/640?wx_fmt=png" data-type="png" data-w="919" style="text-align: center;width: 129px;height: 20px;"  /><span style="font-size: 15px;">分别是 h 和 t 在超平面</span><img class="" data-ratio="0.6461538461538462" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmqVSYCqIa1vChJbldMO7TMzDVicS9WJASpTL0pzayOXfGX8GOccEf95w/640?wx_fmt=png" data-type="png" data-w="195" style="text-align: center;width: 25px;height: 20px;"  /></p><p style="text-align: left;"><span style="font-size: 15px;">是投影。</span><img class="" data-ratio="0.2390710382513661" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmsOYMSoYDiaibKB5WvI6S1MJ4EpUicVn1A9xbmStlcyorxRTpLJNToicHeg/640?wx_fmt=png" data-type="png" data-w="732" style="text-align: center;width: 84px;height: 20px;"  /></p><p style="text-align: left;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;">•&nbsp;&nbsp;</span>TransR[84] 为每个关系 r 引入了一个投影矩阵</span><img class="" data-ratio="0.6888888888888889" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmSkHrJVXOtXnmr0URmXrnATjFuffvdQr4XBvtPKgoW0iaLykcQM6bdxQ/640?wx_fmt=png" data-type="png" data-w="225" style="text-align: center;width: 21px;height: 17px;"  /><span style="font-size: 15px;">，用来将实体向量投影到相应的关系空间。TransR的评分函数定义为&nbsp;</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.15241157556270096" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmjrQVZRe8eIFrRxvf8eQ8LX2Vdgjuj3l7KibWV00NOr2KTQS937Vx6ag/640?wx_fmt=png" data-type="png" data-w="1555" style="width: 272px;height: 41px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-3）</span></p><p><br  /></p><p><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.1191672648959081" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm4fStHFj3txsaCHlmAGJJFQB7phB4ibGfYnXGkZ1y9OaQGeJrYN1aaiaw/640?wx_fmt=png" data-type="png" data-w="1393" style="text-align: center;width: 140px;height: 20px;"  /><span style="font-size: 15px;">。</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">•&nbsp; TransD[141] 将TransR中的投影矩阵做了一个更复杂的替换：&nbsp;</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.14617314930991218" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmkY7LibicLVfdUvYB0X6UVBSCfDfwyG0pVABCh62GotwzuCY8gNbc2y6A/640?wx_fmt=png" data-type="png" data-w="1594" style="width: 269px;height: 39px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-4）</span></p><p><br  /></p><p><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.19066666666666668" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplme6e4Iln1WNADLFiatzIu2ibgDU0Bhf9Ux6EdKxxdRNwkaGKgbnrs6tpQ/640?wx_fmt=png" data-type="png" data-w="750" style="text-align: center;width: 113px;height: 22px;"  /><span style="font-size: 15px;">，</span><img class="" data-ratio="0.2099125364431487" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmaWRETvr2eSeyqxugGdtVS2r2D92zd0Q1CJL0KDfgSqMt6CnU6vMp0A/640?wx_fmt=png" data-type="png" data-w="686" style="text-align: center;width: 106px;height: 22px;"  /><span style="font-size: 15px;">，</span><img class="" data-ratio="1.0280898876404494" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmdc1FJ6CMjQaW2tFFbMQJrCEGCNCe1ibKUXPNL7EicIWaQ8icRsembMH5w/640?wx_fmt=png" data-type="png" data-w="178" style="text-align: center;width: 19px;height: 20px;"  /><span style="font-size: 15px;">，</span><img class="" data-ratio="0.9625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm4kvEPf43XUY5KGvoib44k9jLibbRDpVXBpCf0SwuKAMEaIjL5LTt5sgw/640?wx_fmt=png" data-type="png" data-w="160" style="text-align: center;width: 21px;height: 20px;"  /><span style="font-size: 15px;">，</span><img class="" data-ratio="1.14" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmf7mxfNdo2R0dvnL6FtnbmKnPSYJdjwwNDGD4HwQQNZUbsugqtDVp5Q/640?wx_fmt=png" data-type="png" data-w="150" style="text-align: center;width: 19px;height: 22px;"  /><span style="font-size: 15px;">是实体和关系的另一套向量</span><img class="" data-ratio="1.2258064516129032" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmo8CpwpngeicGibl8qsFHzsJ64EhIKeBWFDrLM4yDlw5FT8FY5kmPFzYw/640?wx_fmt=png" data-type="png" data-w="62" style="text-align: center;width: 17px;height: 21px;"  /><span style="font-size: 15px;">的单位矩阵。</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">为了拉开正确的三元组和错误的三元组之间的分值的差异，对于上述所有方法，我 们都采用如下基于边际的排序损失（margin-based ranking loss）函数进行训练：</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.13815789473684212" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmSaH6dzWCANBX4NfaNnT9W1LW7Xbcp9ZG6n2V5bKl7H0Rjp5ibKWQ5gg/640?wx_fmt=png" data-type="png" data-w="1672" style="width: 360px;height: 50px;"  /></p><p style="text-align: center;"><span style="font-size: 15px;">&nbsp;</span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-5）</span><br  /></p><p><span style="font-size: 15px;"><br  /></span></p><p><span style="font-size: 15px;">其中 γ 是边际（margin），∆ 和 ∆′ 是正确的三元组和错误的三元组的集合。</span></p><p><span style="font-size: 15px;"></span><br  /></p><p><strong><span style="font-size: 16px;">5.2.2 用于语句特征学习的卷积神经网络&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">传统方法[96,142] 通常使用词袋（bag-of-words，BOW）模型表示语句，即将词汇的出现频次作为一句话的特征。然而，基于词袋模型的方法忽略了词汇在句子中的出现顺序，同时也容易受到稀疏性问题的影响。一种更有效的方法是将一句话表示成一个低维向量。近年来，受到卷积神经网络（CNN）在计算机视觉领域的成功应用[143] 的启发，研究者们也提出了很多基于CNN的方法进行语句特征学习[144–147] 。在本节中我们介绍一 种典型的CNN结构，叫做KimCNN[144]。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">图5–4展示了 Kim CNN 的结构。我们记</span><img class="" data-ratio="0.46956521739130436" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmT8K47OMLM6wWTBRF5qAsCYPLmJtcOLBLRjUQlhC1RqhC6iaQFgre9pQ/640?wx_fmt=png" data-type="png" data-w="230" style="text-align: center;width: 39px;height: 18px;"  /><span style="font-size: 15px;">为一个长度为 n 的句子，记<img class="" data-ratio="0.46956521739130436" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmT8K47OMLM6wWTBRF5qAsCYPLmJtcOLBLRjUQlhC1RqhC6iaQFgre9pQ/640?wx_fmt=png" data-type="png" data-w="230" style="height: 18px;text-align: center;width: 39px;"  />=</span><img class="" data-ratio="0.16400277970813065" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmyJwBTMt0TqrwU5PYuibqM0LmhIT2MibxhhqrSeN1Ng4Kva49mClPu2zw/640?wx_fmt=png" data-type="png" data-w="1439" style="text-align: center;width: 134px;height: 22px;"  /><span style="font-size: 15px;">为该句的词向量矩阵，其中</span><img class="" data-ratio="0.7142857142857143" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm1MsxTQIXcT7H1OMDbZ69dUpqGhjGlxcSjwZxUEERqfhry2LmUt0Sqw/640?wx_fmt=png" data-type="png" data-w="161" style="text-align: center;width: 18px;height: 17px;"  /><span style="font-size: 15px;">∈</span><img class="" data-ratio="0.5288135593220339" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmd3KBAJJ5m1TGhQqsP3PKxx9L9Yyicdln20S7hEVTYYWBCoDrm5uWmXg/640?wx_fmt=png" data-type="png" data-w="295" style="text-align: center;width: 33px;height: 17px;"  /><span style="font-size: 15px;">是该句的第 i 个单词的词向量，d 是词向量的维度。我们将一个具有卷积核 h ∈ <img class="" data-ratio="0.5288135593220339" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmd3KBAJJ5m1TGhQqsP3PKxx9L9Yyicdln20S7hEVTYYWBCoDrm5uWmXg/640?wx_fmt=png" data-type="png" data-w="295" style="height: 17px;text-align: center;width: 33px;"  /> 的卷积操作应用到词向量矩阵 <img class="" data-ratio="0.46956521739130436" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmT8K47OMLM6wWTBRF5qAsCYPLmJtcOLBLRjUQlhC1RqhC6iaQFgre9pQ/640?wx_fmt=png" data-type="png" data-w="230" style="height: 18px;text-align: center;width: 39px;"  /> 上，其中</span><img class="" data-ratio="0.2861491628614916" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmC4iaFl8VpZ3J9mf8ryUpx7KoyHFe0ZTM8HT2UtHl1R2zTdPicEervnaQ/640?wx_fmt=png" data-type="png" data-w="657" style="text-align: center;width: 66px;height: 19px;"  /><span style="font-size: 15px;">是卷积核的窗口大小。具体来说，我们用如下的方式从子矩阵</span><img class="" data-ratio="0.29591836734693877" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmDicwkn0NBUEc7FuyQicwJG1BlgHnpq5EKmXNHLrHOMS4icEDBfMXAy19A/640?wx_fmt=png" data-type="png" data-w="490" style="text-align: center;width: 60px;height: 18px;"  /><span style="font-size: 15px;">中得到一个特征</span><img class="" data-ratio="0.9726027397260274" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmYfKI8jnaveWZZtq5c5dib0y5khx2m6VXdhxAlJ6aUGdCLUqa6sB5ZYg/640?wx_fmt=png" data-type="png" data-w="73" style="text-align: center;width: 22px;height: 21px;"  /><span style="font-size: 15px;">：&nbsp;</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.14599574769666904" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmqibtoBn0pR763ZwGR0xk9HyibrW73flTXmpUTdZ9unJ2l7BNm2licaoxw/640?wx_fmt=png" data-type="png" data-w="1411" style="width: 272px;height: 40px;"  /></p><p style="text-align: center;"><span style="font-size: 15px;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-6）</span></p><p><br  /></p><p style="text-indent: 0em;"><span style="font-size: 15px;">其中 f 是非线性函数，∗是卷积算子，b ∈</span><img class="" data-ratio="0.9868421052631579" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm3J1GzLg0LMrKDZx2ldiadjQMDa6icjkwaicbpqib0VicibmxUt6DdneX269A/640?wx_fmt=png" data-type="png" data-w="76" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;">是偏置参数。在将该卷积核应用到词向量矩阵的每一个可能的位置之后，我们就得到了如下的特征组（feature map）&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1626984126984127" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmyrw2xTrn5KBRjDemnKgRG38ECnOicvtbaSibhu21WL8x8ayze1bGzddA/640?wx_fmt=png" data-type="png" data-w="1260" style="width: 278px;height: 45px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 15px;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-7）</span></p><p style="text-indent: 2em;"><br  /></p><p><span style="font-size: 15px;">然后我们再对特征组c使用一个最大池化（max pooling）操作来获得其中最显著的特征：</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.10586552217453506" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmNO8dSwZiadRnZNf8SgETPdSzE4E0372ictZF9AXCnFcqHJnrDn6oCfMA/640?wx_fmt=png" data-type="png" data-w="1398" style="width: 411px;height: 44px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-8）</span></p><p style="text-indent: 2em;"><br  /></p><p><span style="font-size: 15px;">我们可以使用多个卷积核（窗口大小可能不同）来获得多个特征。这些特征被拼接到一 起，作为该句子的最终特征。</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.5447254780999383" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm8VW3DicicbWuVXibkmYyxIJGy2ApRZDYMRguGTPSkFIdxt74W7Axgckfg/640?wx_fmt=png" data-type="png" data-w="1621" style=""  /></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136);font-size: 12px;">图5–4语句特征学习中的一种经典的卷积神经网络结构。</span></p><p><span style="font-size: 15px;"></span><br  /></p><p style="text-indent: 2em;"><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.3 知识图谱辅助的推荐系统的问题描述</span></strong></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们首先将新闻推荐问题形式化如下：给定在线新闻平台上的一个用户 i，我们将他的点击历史记作</span><img class="" data-ratio="0.26107226107226106" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmk7QPkFkVEficUoh1NNBgEiaf3zKKS35rA5dv0pthw6iaMxThL0DGGHG7A/640?wx_fmt=png" data-type="png" data-w="858" style="text-align: center;width: 84px;height: 22px;"  /><span style="font-size: 15px;">，其中</span><img class="" data-ratio="0.22772277227722773" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmC2GNA1d5ic5wFxjpsnJ7pVhSeBVfN2RTH27RDnjzP9VdDIMib19ARPeA/640?wx_fmt=png" data-type="png" data-w="1111" style="text-align: center;width: 99px;height: 23px;"  /><span style="font-size: 15px;">是用户 i 点击过的第 j 条新闻的标题，</span><img class="" data-ratio="0.9341317365269461" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmH3YcZPDEhnibOH4Axiaj88SBQc812eARy5Vek165yzQjZC8XqPyYK7MA/640?wx_fmt=png" data-type="png" data-w="167" style="text-align: center;width: 19px;height: 18px;"  /><span style="font-size: 15px;">是用户 i 点击过的新闻总数。每个新闻标题 t 都由一个单词序列构成，例如，</span><img class="" data-ratio="0.21151079136690648" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmLs4uIpqZ1cCBJNr7ewUxOZC6ftLROJ6npYfgExXxicGPluoHZhP217Q/640?wx_fmt=png" data-type="png" data-w="695" style="text-align: center;width: 89px;height: 19px;"  /><span style="text-indent: 0em;font-size: 15px;">，其中每个单词 w 都可能和知识图谱中的一个实体 e 相关联。例如，在标 题“Trump praises Las Vegas medical team”中,“Trump”和实体“DonaldTrump”相关 联，而“Las”和“Vegas”与实体“LasVegas”相关联。给定用户的点击记录以及单词 和实体的关联，我们的目标是预测用户i 是否会点击一条他从未看过的新闻</span><img class="" data-ratio="1.3189655172413792" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm3wKSmoXLSCWiaCFndUQFMjkfLk6AsPvr0GCDdg6rRtgnZmAg5D5Fhmw/640?wx_fmt=png" data-type="png" data-w="116" style="text-align: center;width: 17px;height: 22px;"  /><span style="text-indent: 0em;font-size: 15px;">。&nbsp;&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">更一般的知识图谱辅助的推荐系统的问题可以被这样描述（该问题描述也适用于第六章）：在一个典型的推荐系统中，我们有一个 M 个用户的集合</span><img class="" data-ratio="0.13925081433224756" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmJf9aLAB1VWzrzqicsswGyM9nSJpEwUArhucicAjsicdpWqt1GS6uhtOyg/640?wx_fmt=png" data-type="png" data-w="1228" style="text-align: center;width: 106px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">和一个 N 个物品的集合</span><img class="" data-ratio="0.14546899841017488" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmZTyfHkiau0ury32xZKqiaeHfju5V7QKj2KMxiaUrksBgnibBlYgvHLrxeQ/640?wx_fmt=png" data-type="png" data-w="1258" style="text-indent: 2em;text-align: center;width: 115px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">。用户-物品的交互矩阵被记为Y∈</span><img class="" data-ratio="0.3942307692307692" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmDH3MNnUjvDyUFUa7wMicHgV5Mric119EXDpMBD5C0BBTEkLUWMfVSkEw/640?wx_fmt=png" data-type="png" data-w="416" style="text-indent: 2em;text-align: center;width: 44px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">。交互矩阵是由用户的隐式反馈定义的，其中</span><img class="" data-ratio="0.6425531914893617" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmQFRiczUKvMicM0HzgLVaFCYkPLmxwcurWngwopHXJsvXMj1zFricS87eA/640?wx_fmt=png" data-type="png" data-w="235" style="text-indent: 2em;text-align: center;width: 27px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">= 1 表示用户 u 和 v 有交互记录，例如点 击、观看、浏览、购买等行为；否则 <img class="" data-ratio="0.6425531914893617" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmQFRiczUKvMicM0HzgLVaFCYkPLmxwcurWngwopHXJsvXMj1zFricS87eA/640?wx_fmt=png" data-type="png" data-w="235" style="height: 17px;text-align: center;width: 27px;"  />= 0。另外我们还有一个知识图谱</span><img class="" data-ratio="0.22397891963109354" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmZnL2t8Uh49tWW2SIPUU9xjTz8b5tOibWOXkkOWxhzlLAsS1s3uoBuOg/640?wx_fmt=png" data-type="png" data-w="759" style="text-indent: 2em;text-align: center;width: 69px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">， 它由三元组(h,r,t)构成。这里</span><img class="" data-ratio="0.1031390134529148" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmib0LBWg0OY4iaUoXQ9VRHkwB4GiaibulDJKbq5HqGia5FCG9zdED2pfVWyA/640?wx_fmt=png" data-type="png" data-w="1338" style="text-indent: 2em;text-align: center;width: 155px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">分别表示三元组的头结点、关系、 尾节点，</span><img class="" data-ratio="0.9326923076923077" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmI3ePUnc8WZsp8qv4wEzPbtZibACJRuu5GgyrSZIAicq4OqomoxsJkT9w/640?wx_fmt=png" data-type="png" data-w="104" style="text-indent: 2em;text-align: center;width: 17px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">和</span><img class="" data-ratio="0.8421052631578947" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm3owplYXFHQicXszmlNMpawwiaJjD7TyhoR3VTmRyZxduI1qZia8Fz1SKg/640?wx_fmt=png" data-type="png" data-w="114" style="text-indent: 2em;text-align: center;width: 17px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">表示知识图谱的实体和关系的集合。例如，三元组（Quentin Tarantino， ﬁlm.director.ﬁlm，Pulp Fiction）反映的事实是Quentin Tarantino是电影Pulp Fiction的导 演。在很多推荐场景中，一个物品v ∈ V可能和一个（或多个）知识图谱中的实体e ∈&nbsp;<img class="" data-ratio="0.9326923076923077" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmI3ePUnc8WZsp8qv4wEzPbtZibACJRuu5GgyrSZIAicq4OqomoxsJkT9w/640?wx_fmt=png" data-type="png" data-w="104" style="height: 17px;text-align: center;width: 17px;"  />&nbsp;相关联。例如，在电影推荐中，物品“Pulp Fiction”和它在知识图谱中的同名实体相关联；而在新闻推荐中，新闻“Trump pledges aid to Silicon Valley during tech meeting”则与实体“Donald Trump”和“Silicon Valley”相关联。给定用户-物品的交互矩阵 Y 和知识图谱<img class="" data-ratio="0.9326923076923077" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmI3ePUnc8WZsp8qv4wEzPbtZibACJRuu5GgyrSZIAicq4OqomoxsJkT9w/640?wx_fmt=png" data-type="png" data-w="104" style="height: 17px;text-align: center;width: 17px;"  />，我们的目标是预测用户 u 是否对一个他之前没有过交互的物品 v 有潜在的兴 趣。形式化地说，我们的目标是学习一个预测函数</span><img class="" data-ratio="0.1382636655948553" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmz9SYS9UdQibmPjOQdGeOiaMvhXKFBqrQwx7MlyZs6oelRR753mVRZIkw/640?wx_fmt=png" data-type="png" data-w="933" style="text-indent: 2em;text-align: center;width: 141px;height: 19px;"  /><span style="text-indent: 2em;font-size: 15px;">，其中</span><img class="" data-ratio="0.7307692307692307" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmda5bhlc39REpvZ3MiaZRhWgXLxfSEo5JBg9a0EA8rr9bLxGu2ibPEVqA/640?wx_fmt=png" data-type="png" data-w="156" style="text-indent: 2em;text-align: center;width: 23px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">表示模型预测的用户 u 和物品 v 有交互的概率，</span><img class="" data-ratio="0.8271604938271605" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmXHqjt38caopwk0F9k48I3QuK8GucLB9jtkq9Dmia2IT4UgmiavzyRBDw/640?wx_fmt=png" data-type="png" data-w="81" style="text-indent: 2em;text-align: center;width: 18px;height: 16px;"  /><span style="text-indent: 2em;font-size: 15px;">表示函数</span><img class="" data-ratio="0.9054054054054054" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmTxFyPKmzPrSRnVRgicibDTibXwZkxq5DfhyfQTicMvQ3RU8yuS1L2zuG7A/640?wx_fmt=png" data-type="png" data-w="74" style="text-indent: 2em;text-align: center;width: 16px;height: 16px;"  /><span style="text-indent: 2em;font-size: 15px;">的参数。</span></p><p><br  /></p><p style="text-indent: 0em;"><span style="text-indent: 0em;font-size: 15px;"></span><strong><span style="font-size: 16px;">5.4 依次学习法&nbsp;</span></strong></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;"><br  /></span></strong></p><p><strong><span style="font-size: 16px;">5.4.1 知识提取</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">依次学习法首先需要从知识图谱中学习每个实体的特征。在本节中，我们介绍知识提取的一般步骤。如图5–5所示，知识提取一般包含四个步骤。首先，为了从新闻文本中识别出实体，我们使用实体连接（entity linking）[152,153] 的方法将单词和实体进行连接并进行消岐。给定已经识别出的实体集合，我们从原始的知识图谱中构造出一个知识图谱子图，并从原图中抽取所有这些实体之间的边。注意到这种边的数目可能相对较少且缺乏多样性，因此，我们将该子图扩展一跳（hop），即再引入所有和这些实体距离为 1 的实体（及相关的边）。给定这个扩展后的子图，我们可以使用知识图谱特征学习方法，诸如 TransE[82]，TransH[83]，TransR[84] 或TransD[141] 等，来处理该子图并获得实体向量 （entity embedding）。学习到的实体向量会被作为后续KCNN的输入。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.4623287671232877" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmhhQ1jVWPAhb64aYdgluAVrySNDmWtibwcKmJ8icxP4BrsfuGib9y6eicmQ/640?wx_fmt=png" data-type="png" data-w="1752" style=""  /></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136);font-size: 12px;">图5–5依次学习法中的知识提取。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"></span><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">需要注意的是，尽管知识图谱特征学习方法一般都可以保存原图的结构信息，我们发现为实体学习到的单个向量在后续应用到推荐系统中依然存在信息损失。为了更好地在知识图谱中定位实体，我们也为每个实体提取其额外的上下文信息。一个实体 e 的 “上下文”是指它在知识图谱中的邻居的集合，即</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.07333333333333333" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmibicqmHq2F3weLr9jdY2F7UrtCHP3aSwFKoDiaeZjiaIhicSm4aET2CdAOQ/640?wx_fmt=png" data-type="png" data-w="1200" style="width: 382px;height: 28px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 15px;"></span><span style="color: rgb(136, 136, 136);font-size: 14px;">（5-9）</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">由于上下文实体通常和当前实体有着紧密的语义和逻辑联系，上下文的使用也会为当前实体提供更多互补的信息，并辅助对当前实体的标识。图5–6展示了上下文实体的例子。除了使用“Fight Club”本身的特征表示该实体之外，我们也使用了它的上下文， 例如“Suspense”（类别）、“Brad Pitt”（演员）、“United States”（国家）和“Oscars”（奖项）作为它的标识符。实体 e 的上下文向量（context embedding）可以被定义为它的上下文实体的向量的平均值：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.26118721461187216" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmRpGMY3icJGpfyxTejJibcp5maNAH3LvglTH3y5v6vKUul7C5UC1rlibyQ/640?wx_fmt=png" data-type="png" data-w="1095" style="width: 254px;height: 66px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;"></span><span style="color: rgb(136, 136, 136);font-size: 14px;">（5-10）</span></p><p style="text-indent: 2em;"><br  /></p><p><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.8677685950413223" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm7kKEof8PSs9u3ibfOPiaoGdYydGZAAkibVFFOmREpflo95CCIlOiaNUmCA/640?wx_fmt=png" data-type="png" data-w="121" style="text-align: center;width: 19px;height: 16px;"  /><span style="font-size: 15px;">是实体</span><img class="" data-ratio="0.8347107438016529" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmQG37QNvdyrfV6jibz6TQ9RVfkhu0wSEvzNYKjXXEt5utncWhQIM5WGw/640?wx_fmt=png" data-type="png" data-w="121" style="text-align: center;width: 20px;height: 17px;"  /><span style="font-size: 15px;">的向量表示。我们会在实验部分验证上下文向量的有效性。</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.5683355886332883" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmfiaSibk8hTRhcx5oFiagGeme3JnwrAiaKLh4m6lOds8DXlGxib2IokPgqpA/640?wx_fmt=png" data-type="png" data-w="1478" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–6知识图谱中一个实体的上下文实体。</span></p><p><span style="font-size: 15px;"></span></p><p style="text-indent: 2em;"><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.4.2 知识感知的卷积神经网络&nbsp;</span></strong></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在得到每个实体的实体向量（entity embedding）和上下文向量（context embedding） 之后，下一步是将其应用到推荐系统中。DKN的整体框架如图5–7所示。其主要包含了两个关键模块：知识感知的卷积神经网络（KCNN）和基于注意力机制的用户历史兴趣聚合模块（attention network）。在本节和下一节中我们分别对这两个模块进行介绍。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">沿用第5.2.2节的记号，我们使用</span><img class="" data-ratio="0.11452879581151833" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmhibdODwEjZ6X5lLicQF1oMQAQWryJbX7U504ekKHnIIwUAzwQ5BTic4kA/640?wx_fmt=png" data-type="png" data-w="1528" style="text-align: center;width: 147px;height: 17px;"  /><span style="text-indent: 0em;font-size: 15px;">来表示一个长度为 n 的新闻标题 t 的单词序列，</span><img class="" data-ratio="0.10980103168754606" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm0rIKuFMzAObyMQnOV0AZDvwy6AAU12dhicgNZdyLJb4TVTa1F84tILQ/640?wx_fmt=png" data-type="png" data-w="1357" style="text-indent: 0em;text-align: center;width: 161px;height: 18px;"  /><span style="text-indent: 0em;font-size: 15px;">表示该标题的词向量矩阵。该词向量矩阵可以经过预训练得到，也可以随机初始化。在经过知识提取步骤之后，每个单词</span><img class="" data-ratio="0.7065868263473054" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmncpDEyT6A7Wa3rmniaDWALfq6YSXuxeIoXKNeG6DIouO90b8c7LwqiaQ/640?wx_fmt=png" data-type="png" data-w="167" style="text-align: center;width: 21px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">都可能关联一个实体向量</span><img class="" data-ratio="0.28139904610492844" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmPdw2jJTAicLh6F0lxfBBgia3uZQ60apVCrEJ8EYgxbFBgKJlicb5BM5zQ/640?wx_fmt=png" data-type="png" data-w="629" style="text-indent: 0em;text-align: center;width: 60px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">和上下文向量</span><img class="" data-ratio="0.2776073619631902" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmI0rWdat1eAVzIibTicWrswYIicJln9Dg2vXqOqvAB8og9WmtsZ3DSZfYg/640?wx_fmt=png" data-type="png" data-w="652" style="text-indent: 0em;text-align: center;width: 62px;height: 20px;"  /><span style="font-size: 15px;text-indent: 0em;">，其中 k 是实体向量（上下 文向量）的维度。&nbsp;&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;">给定以上输入，一种直观的结合单词和实体的方法是将实体视为“伪”单词，并将 其拼接到单词序列之后[139]，即&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1282051282051282" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmcEdbl3ic5Bj1v4mcDS3mkrVFuLmYp3L3mZ3optnNlWcMzwfIWEic83Pg/640?wx_fmt=png" data-type="png" data-w="1053" style="width: 288px;height: 37px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 15px;text-indent: 0em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-11)</span></p><p style="text-indent: 2em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.6058091286307054" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmM7jIKDW9PkeghfDV25dza5kV8s1NicicU3aES8ib22kozORXf8SnsQUNw/640?wx_fmt=png" data-type="png" data-w="241" style="text-align: center;width: 31px;height: 20px;"  /><span style="text-indent: 2em;font-size: 15px;">是这条新闻标题涉及到的实体向量集合。这条组合而成的新闻标题被输入到后续的 CNN[144] 中进行进一步处理。然而，我们指出这个简单的拼接策略有以下局限性：（1）拼接策略破坏了单词和实体之间的关联，拼接之后的新序列无法反应单词和实体的对齐关系；（2）词向量和实体向量是由不同的方法学习得到的，这意味着在同一个向量空间中对它们进行卷积操作是不合适的；（3）拼接策略强制要求词向量和实体向量 有着相同的维度，这在实践中可能不是最优的，因为词向量和实体向量的最佳长度并不一定相同。</span></p><p style="text-indent: 2em;"><span style="text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.5827001753360608" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm70yAnbyoiby42aLPLJPPGMoYJHQT1Xr2gGjIx1ceEJTSKXpQVfq1fCA/640?wx_fmt=png" data-type="png" data-w="1711" style=""  /></p><p style="text-indent: 2em;"><span style="text-indent: 2em;"></span></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–7DKN模型的整体框架。</span></p><p style="text-indent: 2em;"><span style="text-indent: 2em;"><br  /></span></p><p style="text-indent: 2em;"><span style="text-indent: 2em;font-size: 15px;">为了解决以上的局限性，本节提出一个多通道的（multi-channel）、单词-实体对齐的（word-entity-aligned）的 KCNN。KCNN 的结果如图5–7左下角所示。对每个新闻标题</span><img class="" data-ratio="0.1447811447811448" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmeAQoN0P5kI9ibUmH7wdk3ZkNE5OrhZvhwibYkSaZxK5CEGLmzTgictE2A/640?wx_fmt=png" data-type="png" data-w="594" style="text-align: center;width: 132px;height: 20px;"  /><span style="text-indent: 2em;font-size: 15px;">，除了使用词向量</span><img class="" data-ratio="0.15314285714285714" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmAj4uAESNib3kicOYrZg40YrneXVic4y0SmnO72O3rjMCG5j2wXWyfs4Qg/640?wx_fmt=png" data-type="png" data-w="875" style="text-indent: 2em;text-align: center;width: 128px;height: 20px;"  /><span style="text-indent: 2em;font-size: 15px;">作为输入之外，我们还引入 了转换后的实体向量&nbsp;</span></p><p style="text-indent: 2em;"><span style="text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.13453299057412169" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmZdFnOLhibFqEUcyI8ZCQPSha1POXtekWWVKB0K6uHM8hjWUGG51Mdtw/640?wx_fmt=png" data-type="png" data-w="1167" style="width: 325px;height: 44px;"  /></p><p style="text-indent: 2em;text-align: center;"><span style="text-indent: 2em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-12)</span></p><p style="text-indent: 2em;"><br  /></p><p><span style="font-size: 15px;">和转换后的上下文向量</span></p><p style="text-align: center;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.15691263782866835" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmHAoOcBickeywva9yvlEf5yCibX4UsBjo4iblpfjLkRjP6oTSibuSFNKMSQ/640?wx_fmt=png" data-type="png" data-w="1179" style="width: 333px;height: 52px;"  /></p><p style="text-indent: 2em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-13)</span></p><p style="text-indent: 2em;"><span style="text-indent: 2em;"><br  /></span></p><p style="text-indent: 0em;"><span style="text-indent: 2em;font-size: 15px;">作为输入来源，其中 g 是转换函数。在KCNN中，g 可以为线性函数&nbsp;</span><br  /></p><p style="text-indent: 0em;"><span style="text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.2847222222222222" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmSaYIs7MHabgoBdC1QUAQpFYY6wFQamu2GxYmKnHkxoWcV5qJRXkvVw/640?wx_fmt=png" data-type="png" data-w="432" style="width: 142px;height: 40px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="text-indent: 2em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-14)</span></p><p style="text-indent: 0em;"><br  /></p><p><span style="font-size: 15px;">或非线性函数</span></p><p style="text-indent: 0em;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.15710503089143865" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm3fq1w0yjt0D2HT1DwratqmRN9xGCh6ecibhtCxKe6hScpD9WIzukzEQ/640?wx_fmt=png" data-type="png" data-w="1133" style="width: 259px;height: 41px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-15)</span></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 0em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.2973372781065089" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmSqu2jtbP9efWdeNxRJ4icnHgHIcVL2zY4EOTmHIjyaZMTCsGNp9mZZQ/640?wx_fmt=png" data-type="png" data-w="676" style="text-align: center;width: 64px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">是转换矩阵，</span><img class="" data-ratio="0.2654424040066778" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm8wbSRhia3srVFgPgUic714VKFjy2WF6vr6JduyymhtmsAGMPqV2rR2Lg/640?wx_fmt=png" data-type="png" data-w="599" style="text-align: center;width: 55px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">是偏置参数。由于转换函数是连续的，它可以将 实体向量和上下文向量从实体空间中投影到单词空间的同时保留原有的空间关系。注意 到词向量</span><img class="" data-ratio="0.4612676056338028" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmdzdThZicYZS3LLATf4sjFw5al5m2LwcY0kYzH7ObKNL3hgmS4nMCtTg/640?wx_fmt=png" data-type="png" data-w="284" style="text-align: center;width: 31px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">、转换后的实体向量</span><img class="" data-ratio="0.43891402714932126" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmTS8ApibnlngZsIGXlZIaVv2npnPU82o5gibic560euQjCx022iaga9lvlQ/640?wx_fmt=png" data-type="png" data-w="442" style="text-indent: 0em;text-align: center;width: 46px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">和转换后的上下文向量</span><img class="" data-ratio="0.3977272727272727" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmByyX7mNibQHTy0Ah9ABY0Hw3fo3XPS5SO8DYVmVTWbHt7JlPce5E3iaQ/640?wx_fmt=png" data-type="png" data-w="440" style="text-indent: 0em;text-align: center;width: 45px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">的尺寸是一样的，它们可以被视为是同一个个体（单词）的多个不同通道的表述（类似与彩色图片的 三通道）。因此，我们将这三个向量矩阵对齐并堆叠起来：&nbsp;</span></p><p style="text-indent: 0em;"><span style="text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.06839872746553552" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmfMyLcnKOAqqYPWZQWajJX4pjiahkfC87XiauIib3F7iabolzZly9E48kKg/640?wx_fmt=png" data-type="png" data-w="1886" style="width: 551px;height: 38px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="text-indent: 0em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-16)</span></p><p style="text-indent: 0em;"><br  /></p><p><span style="font-size: 15px;">给定以上多通道输入W，和KimCNN[144] 类似，我们使用多个（窗口大x小</span><img class="" data-ratio="1.0975609756097562" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmL8iamf3kGFRxLNZ5hbRsN0R88nl0w1XSV0aDhPmCoo8uTPxGVpt0v6g/640?wx_fmt=png" data-type="png" data-w="41" style="text-align: center;width: 18px;height: 20px;"  /><span style="font-size: 15px;">不同的）卷积核</span><img class="" data-ratio="0.20956399437412096" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmyeNsKiave8nlqXKt1cKLdZkH064eXJ9Kvc86xwdBcqNN72KtNHmJ8pA/640?wx_fmt=png" data-type="png" data-w="711" style="text-align: center;width: 71px;height: 18px;"  /><span style="font-size: 15px;">来提取新闻标题中的特定的局部模式。子矩阵</span><img class="" data-ratio="0.3213572854291417" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmBYqrljko2ia2icWCVCfEKA7voTWUbwh2iahPBtdbSBrnszk2uw3XB90cQ/640?wx_fmt=png" data-type="png" data-w="501" style="text-align: center;width: 49px;height: 20px;"  /><span style="font-size: 15px;">关于卷积核 h 的局部相应（local activation）可以被记为</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.1433141394753679" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmHdkrvknvKOiaVU1FObeFzYibychxLW7xNWIBjnMH5luU8XRfGeconZyw/640?wx_fmt=png" data-type="png" data-w="1563" style="width: 280px;height: 40px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-17）</span></p><p style="text-indent: 0em;"><br  /></p><p><span style="font-size: 15px;">然后我们在输出的特征组（feature map）上使用了最大池化（max pooling）操作：</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.1387126019945603" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplm90zDMeGevDqZ5R3NlP7RTDGrYmIicg5ImPVkzzsFuo0VVruketusuHw/640?wx_fmt=png" data-type="png" data-w="1103" style="width: 329px;height: 46px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-18）</span></p><p style="text-align: center;"><br  /></p><p style="text-align: left;"><span style="font-size: 15px;">所有的特征</span><img class="" data-ratio="0.8387096774193549" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmVSujOErZerkjTAFSxqmtpQxOOTvEyjicKroc70nz3MD7IrNAz54hFCA/640?wx_fmt=png" data-type="png" data-w="186" style="text-align: center;width: 23px;height: 20px;"  /><span style="font-size: 15px;">被拼接起来，组成了新闻标题 t 最终的表示e(t)，即&nbsp;</span></p><p style="text-align: left;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.1615523465703971" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwIEicicuaZiaIOSxfy92pTplmEia6Glx9vlNLQvtdMAn9T8a0nTdWf51U3uc79cFNfDMYVpFVHJxT0CA/640?wx_fmt=png" data-type="png" data-w="1108" style="width: 288px;height: 47px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-19）</span></p><p style="text-indent: 0em;"><br  /></p><p><span style="font-size: 15px;">其中 m 是卷积核的数量。</span></p><p><span style="font-size: 15px;"><br  /></span></p><p><strong><span style="font-size: 16px;">5.4.3 基于注意力机制的用户历史兴趣聚合</span></strong></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">给定用户 i&nbsp;的点击记录</span><img class="" data-ratio="0.2459016393442623" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkaXwnKlTicvnHF2E8oh5WJ2jBuicKcDusW1pticjfN5uQMxNR5P6tUEjmA/640?wx_fmt=png" data-type="png" data-w="854" style="text-align: center;width: 82px;height: 20px;"  /><span style="font-size: 15px;">，他点击过的新闻的特征被记为</span><img class="" data-ratio="0.21753246753246752" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkdT4Y4U7rCH2DiayylRBMq7JXib4F0t0xrzShV2PlRViaTSibCeIfE91JuQ/640?wx_fmt=png" data-type="png" data-w="924" style="text-align: center;width: 82px;height: 20px;"  /><img class="" data-ratio="0.5478723404255319" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkxnabmsDlDBE7vIV7BkJjoOqBk908sXzDhxh4KaBCibG02pj5wlZwavg/640?wx_fmt=png" data-type="png" data-w="376" style="text-align: center;width: 34px;height: 20px;"  /><span style="font-size: 15px;">。为了表示用户 i ，一种简单的方法是直接平均他所有点击过的新闻标题的特征：&nbsp;</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.4024793388429752" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkrGib3Xz59RnlrgYMO3iaMnDGFhlJrwp8ULgpDz6CEmPHKENpKmicpuRcQ/640?wx_fmt=png" data-type="png" data-w="1210" style="width: 230px;height: 93px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-20)</span></p><p style="text-align: center;"><br  /></p><p><span style="font-size: 15px;">然而，正如本章引言中讨论的，一个用户对新闻话题的兴趣是多样化的。在考虑用户 i 是否会点击候选新</span><img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="text-align: center;width: 22px;height: 20px;"  /><span style="font-size: 15px;">时，用户 i 点击过的新闻应该对<img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="height: 20px;white-space: normal;text-align: center;width: 22px;"  />有着不同的影响。为了动态地刻画用户的历史兴趣，我们使用了一个注意力网络（attention network） [154,155] 来模拟用户的点击记录对于当前候选新闻的不同的影响。注意力网络如图5–7左上角所示。具体地说，对于用户 i 点击过的新闻</span><img class="" data-ratio="1.0104166666666667" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZka9290cxbXJrpicV6T8m3BCkjPibVOaMGKGDib1UPEhmmw9vUuIyDD3ZCQ/640?wx_fmt=png" data-type="png" data-w="192" style="text-align: center;width: 21px;height: 21px;"  /><span style="font-size: 15px;">以及候选新闻<img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="height: 20px;white-space: normal;text-align: center;width: 22px;"  />，我们首先使用一个深度神经网络</span><img class="" data-ratio="0.6129032258064516" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkkOwAZXThzZB39S5XBMHnrJC2VtiamibqLAWdiaTQf797sLTpNMkicP66pQ/640?wx_fmt=png" data-type="png" data-w="217" style="text-align: center;width: 21px;height: 18px;"  /><span style="font-size: 15px;">来计算影响因子：</span></p><p><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.18025751072961374" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkJ8lPzgHHzrrX96GFtpiadIUqwsmMxC8p9rvcGsXhz6JvKUbvoias3xAQ/640?wx_fmt=png" data-type="png" data-w="1864" style="width: 545px;height: 98px;"  /></p><p style="text-align: center;"><span style="font-size: 15px;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-21)</span></p><p><br  /></p><p><span style="font-size: 15px;">注意力网络</span><img class="" data-ratio="0.6129032258064516" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkkOwAZXThzZB39S5XBMHnrJC2VtiamibqLAWdiaTQf797sLTpNMkicP66pQ/640?wx_fmt=png" data-type="png" data-w="217" style="height: 18px;white-space: normal;text-align: center;width: 21px;"  /><span style="font-size: 15px;">接收两个新闻标题的特征作为输入，输出他们之间的影响因子。用户 i 关于候选新闻</span><img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="height: 20px;white-space: normal;text-align: center;width: 22px;"  /><span style="font-size: 15px;">的特征就可以被计算成他的所有点击过的新闻的特征的加权平均：</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.40580847723704866" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkWiciciaYsWic1Drx03OfWhPZYrpNtibkyaCo3IV7nnyn06xe3DpzYIxFGKg/640?wx_fmt=png" data-type="png" data-w="1274" style="width: 226px;height: 92px;"  /></p><p style="text-align: center;"><span style="font-size: 15px;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-22)</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">最后，给定用户 i 的特征</span><img class="" data-ratio="0.6363636363636364" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkyYVJ3rx6tUytAauDtWKPxC4mdxk9auF1JnTrngjqmSgNibYWjLe9u5A/640?wx_fmt=png" data-type="png" data-w="209" style="text-align: center;width: 27px;height: 17px;"  /><span style="text-indent: 2em;font-size: 15px;">和候选新闻<img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="height: 20px;text-align: center;width: 22px;"  />的特征</span><img class="" data-ratio="0.6033057851239669" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkRliciaMcZd3rAKBfN4XpN8C0fkoZaqhericZtj0rdPxxnoXy6GOEFZKpQ/640?wx_fmt=png" data-type="png" data-w="242" style="text-indent: 2em;text-align: center;width: 30px;height: 18px;"  /><span style="font-size: 15px;text-indent: 2em;">，我们使用另一个神经网络</span><img class="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkleOwI1DKqYAhotxPQPWzYTDPjCmkNT7DtibickxXPDhg9gCk6KMJIjAQ/640?wx_fmt=png" data-type="png" data-w="137" style="text-indent: 2em;text-align: center;width: 15px;height: 15px;"  /><span style="font-size: 15px;text-indent: 2em;">预测用户 i 会点击新闻</span><img class="" data-ratio="0.8044692737430168" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2GS6jIRicAiczHnSAvh3ok4zTrUVoIElMF6hAg4MaTQE7icicZR8nqILLQ/640?wx_fmt=png" data-type="png" data-w="179" style="font-size: 15px;height: 20px;text-align: center;width: 22px;"  /><span style="font-size: 15px;text-indent: 2em;">的概率：</span></p><p style="text-indent: 2em;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.16149068322981366" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkxmqO5PRlgjl3MWiatiaEYsIpGhXBx1sa12WvCRUPic8VkicJRmDHKh5Q1Q/640?wx_fmt=png" data-type="png" data-w="1288" style="width: 251px;height: 41px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">(5-23)</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们会在实验部分验证注意力网络的有效性。</span></p><p><br  /></p><p><strong><span style="font-size: 16px;">5.5 交替学习法</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在本节中，我们以 MKR 为例介绍交替学习法的主要思想。我们首先介绍 MKR 中的多任务学习框架及其各个主要组成部分。然后我们会讨论MKR的学习算法，以及针对MKR的理论分析。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.1 多任务学习模型框架&nbsp;</span></strong></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">MKR模型框架如图5–8a所示。MKR包含三个主要部分：推荐系统模块、网络特征学习模块和交叉压缩单元。（1）左半部分的推荐系统模块将一个用户和一个物品作为输入，并使用多层感知机（multi-layer perceptron，MLP）和交叉压缩单元从用户和物品中学习特征；（2）和左半部分类似，右半部分的知识图谱特征学习模块也使用了 MLP 来从知识三元组中学习头结点和关系的特征，并预测尾节点的特征；（3）推荐系统模块和 网络特征学习模块由交叉压缩模块进行桥接。交叉压缩模块可以自动学习两个任务中物品和实体的高阶特征交互。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"></span><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.3770217512548801" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkYBG1gM8JFD77cONKHKHSu8oDUqeYW2Qnk3D1uLSC0LEf2FOgc5mrvQ/640?wx_fmt=png" data-type="png" data-w="1793" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–8（a）MKR的模型框架。左半部分和右半部分分别表示推荐系统模块和知识图谱特征学习模块。两个模块由交叉压缩单元连接。（b）交叉压缩单元通过“交叉”操作从物品和实体向量中生成一个交叉特征矩阵，并通过“压缩”操作为下一层提供输入。</span></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.2 交叉压缩单元、推荐系统模块和知识图谱特征学习模块&nbsp;</span></strong></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.2.1 交叉压缩单元</span></strong></p><p style="text-indent: 0em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在MKR中，推荐系统任务和知识图谱特征学习任务是高度关联的，因为推荐系统中的一个物品可能对应着知识图谱中的实体。为了对物品和实体之间的特征交互进行建模，我们在MKR中设计了一个交叉压缩单元，如图5–8b所示。对于物品</span><img class="" data-ratio="0.8198198198198198" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkYwHHZaRsWw7rUv1kwy9DmXibaUUlfZlfuqTpIEYwwsibCh0XYoMSrLBw/640?wx_fmt=png" data-type="png" data-w="111" style="text-align: center;width: 17px;height: 14px;"  /><span style="font-size: 15px;">及与它关联的实体（之一）</span><img class="" data-ratio="0.7083333333333334" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkichukCLibafMhopmQiaHqib5LiaCClyiaJhRlxPkUqD789Z7UhetmOiaAk79A/640?wx_fmt=png" data-type="png" data-w="120" style="text-align: center;width: 16px;height: 13px;"  /><span style="font-size: 15px;">，我们首先依据它们第</span><img class="" data-ratio="0.952755905511811" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkJBntUUj7ibnmVILPeZ12RYUhmHvtzlL8iaHI8AaEj8NgG0iaHWDTvz5KA/640?wx_fmt=png" data-type="png" data-w="127" style="text-align: center;width: 14px;height: 13px;"  /><span style="font-size: 15px;">层的特征</span><img class="" data-ratio="0.3180987202925046" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkdpZ27pBJ6rk33g2Tomiawgibt4oCPeuu4RbuCdkynsv6zYAHkTyicOWIg/640?wx_fmt=png" data-type="png" data-w="547" style="text-align: center;width: 57px;height: 18px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.3561643835616438" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk9Pkpdl5nTaEXT26Kh0UNxzIySLMrdUWyOU9kCrq6RnZ4UkYLxDx8eQ/640?wx_fmt=png" data-type="png" data-w="511" style="text-align: center;width: 54px;height: 19px;"  /><span style="font-size: 15px;">，构造一个</span><img class="" data-ratio="0.337468982630273" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkeOW3czsVGSlZicqiaZ5pgMDCLZCT8IC622gbAGxrrVY8ckLRzc6osyEA/640?wx_fmt=png" data-type="png" data-w="403" style="text-align: center;width: 50px;height: 17px;"  /><span style="font-size: 15px;">维的特征交互矩阵：</span></p><p style="text-indent: 0em;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.3740665308893415" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkzO6025cSbvsiayKWeL5icHVZQMLUtdVwxxBkxEAIzzxLm5kGwKWq0eaw/640?wx_fmt=png" data-type="png" data-w="1473" style="width: 320px;height: 120px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-24）</span></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);"><br  /></span></p><p style="text-indent: 0em;text-align: left;"><span style="color: rgb(0, 0, 0);font-size: 15px;">其中</span><img class="" data-ratio="0.2357142857142857" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk9JS5M7p4F6G2DSuJbf2zVns8soEw0WlKnxqiaJx1Q0hxERDtwbNQWKw/640?wx_fmt=png" data-type="png" data-w="700" style="text-align: center;width: 71px;height: 17px;"  /><span style="color: rgb(0, 0, 0);font-size: 15px;text-indent: 0em;">是第<img class="" data-ratio="0.952755905511811" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkJBntUUj7ibnmVILPeZ12RYUhmHvtzlL8iaHI8AaEj8NgG0iaHWDTvz5KA/640?wx_fmt=png" data-type="png" data-w="127" style="height: 13px;text-indent: 34px;white-space: normal;text-align: center;width: 14px;"  />层的交叉特征矩阵，</span><img class="" data-ratio="1.088" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkn9S7wGneflbofVxlcwCqtQdCtiaaKldlWjwW3R3WHo7q5EH6pGSZyCQ/640?wx_fmt=png" data-type="png" data-w="125" style="text-align: center;width: 15px;height: 16px;"  /><span style="color: rgb(0, 0, 0);font-size: 15px;text-indent: 0em;">是特征的维度。这个操作叫做“交叉”操 作，因为在交叉特征矩阵中，物品</span><img class="" data-ratio="0.8376068376068376" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkbtcPks2txicEHq0xCSC48bRkxtgX9ibWpVGIgtEjvhIvBLdq40tClr2w/640?wx_fmt=png" data-type="png" data-w="117" style="text-align: center;width: 16px;height: 13px;"  /><span style="text-indent: 0em;color: rgb(0, 0, 0);font-size: 15px;">及其相关联的实体</span><img class="" data-ratio="0.8558558558558559" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZklMJVes6pKZ45nfmY5r6vMJN9ho7xJTGmJqMbMh9cafKLibqJOWrfKhQ/640?wx_fmt=png" data-type="png" data-w="111" style="text-indent: 0em;text-align: center;width: 17px;height: 15px;"  /><span style="color: rgb(0, 0, 0);font-size: 15px;text-indent: 0em;">的任何一组可能的特征互都被显式地建模。然后，我们将特征交叉矩阵投影到各自的特征空间中，并输出物品和实体的下一层的表示向量：&nbsp;</span></p><p style="text-indent: 0em;text-align: left;"><span style="color: rgb(0, 0, 0);font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.06375646180356118" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkwvia8duBw25GmTzdff2Vntan3DZYaxCFrsHkib8CMWkFLwTbibntU19dA/640?wx_fmt=png" data-type="png" data-w="1741" style="width: 503px;height: 32px;"  /></p><p style="text-align: center;"><img class="" data-ratio="0.07114170969592656" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkibWDo4JQ9ccTCwOricwpBtxCS1rWbjSq3wmfNR5dy22nThHDj3GRebGw/640?wx_fmt=png" data-type="png" data-w="1743" style="width: 506px;height: 36px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="color: rgb(0, 0, 0);font-size: 15px;text-indent: 0em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-25）</span></p><p style="text-indent: 0em;text-align: left;"><br  /></p><p style="text-indent: 0em;text-align: left;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.3310696095076401" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkBpCIUAS6lzJmiad81uwyWibgbcaMdlLibWqoOUph0eEibnHfJdk0SBs5hw/640?wx_fmt=png" data-type="png" data-w="589" style="text-align: center;width: 51px;height: 17px;"  /><span style="text-indent: 0em;font-size: 15px;">和</span><img class="" data-ratio="0.361376673040153" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk6KiaRSBUOU6EOaJDW46yHdKd0tlyjgibMRsic2MuC0hfz3xxo3KZ2SjDQ/640?wx_fmt=png" data-type="png" data-w="523" style="text-indent: 0em;text-align: center;width: 48px;height: 17px;"  /><span style="text-indent: 0em;font-size: 15px;">是权值和偏置参数。这个操作叫做“压缩”操作，因为权值向量将交叉特征矩阵重新从</span><img class="" data-ratio="0.42776203966005666" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkFibuzVicZOjbOknichvH7nsV1WATBaMWR9A81AFDjll8kRwZUIdsiatiaEg/640?wx_fmt=png" data-type="png" data-w="353" style="text-indent: 0em;text-align: center;width: 34px;height: 15px;"  /><span style="text-indent: 0em;font-size: 15px;">的空间映射回了特征空间</span><img class="" data-ratio="0.7089201877934272" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkeJMktUwxWubCLdcSG0GumFWicMoXyibt6HI38SFdTPoTUW89fVPPKUCQ/640?wx_fmt=png" data-type="png" data-w="213" style="text-indent: 0em;text-align: center;width: 21px;height: 15px;"  /><span style="text-indent: 0em;font-size: 15px;">。注意到在公式（5–25）中， 出于对称性的考虑，特征交叉矩阵被同时沿着水平和垂直的方向进行了压缩（通过在矩阵</span><img class="" data-ratio="0.8700564971751412" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZksStjlJmTlOkbDnMBfib5AiaMlxsTbJ0gnMbudXd5hHSFpceTKR9SsxNw/640?wx_fmt=png" data-type="png" data-w="177" style="text-indent: 0em;text-align: center;width: 18px;height: 16px;"  /><span style="text-indent: 0em;font-size: 15px;">和</span><img class="" data-ratio="0.8525345622119815" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkeELjlkTxiae5VdHsa5cibS2QyQKdicaSRpn3VZof2dTmJF3wfOBxfD9Tg/640?wx_fmt=png" data-type="png" data-w="217" style="text-indent: 0em;text-align: center;width: 21px;height: 18px;"  /><span style="text-indent: 0em;font-size: 15px;">上进行操作）。但是我们会在第5.5.4.2节中提供更多关于该设计的理解。为了记号简便，在下文中，我们将交叉压缩单元记为&nbsp;</span></p><p style="text-indent: 0em;text-align: left;"><span style="text-indent: 0em;font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1301169590643275" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkGBGNMicvqDbWtX8nDfyZR6oTRKdlI5scjMXHia5GZq2mtH3CQsria8YSA/640?wx_fmt=png" data-type="png" data-w="1368" style="width: 263px;height: 34px;"  /></p><p style="text-align: center;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-26）</span></p><p style="text-align: center;"><br  /></p><p style="text-align: left;"><span style="font-size: 15px;">并使用后缀</span><img class="" data-ratio="0.8846153846153846" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk1Kr0kLKCfUiakkhKR5WPcRWA3VRCianX3ExyVCEoJvh0e5nXnGoQKOnA/640?wx_fmt=png" data-type="png" data-w="130" style="text-align: center;width: 18px;height: 16px;"  /><span style="font-size: 15px;">或</span><img class="" data-ratio="0.952755905511811" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkZKAVbAk2wasM8cKjkaKs9llPxj02KJDFAkzNPKw08yJBbhCosJuJjQ/640?wx_fmt=png" data-type="png" data-w="127" style="text-align: center;width: 18px;height: 17px;"  /><span style="font-size: 15px;">来区分它的两个输出。通过交叉压缩单元，MKR可以适应性地调 整知识迁移的权重并学习两个任务之间的相关度。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">值得注意的是，交叉单元只存在于MKR模型的低层（low-levellayers），如图5–8a所示。这是因为（1）一般而言，在深度结构中，特征沿着网络结构逐渐从一般性（general）转到特定性（speciﬁc），特征的可迁移性在高层（high-levellayers）会随着任务不相似性的增加而显著下降[156]。因此，在高层中共享特征会增加负迁移（negative transfer）的风 险，特别是对于 MKR 中的异构任务。（2）在 MKR 的高层中，物品特征和用户特征发生了混合，实体特征也与关系特征发生了混合。这种混合特征不再适合共享，因为它们没有显式的关联。</span></p><p style="text-align: left;"><span style="font-size: 15px;"></span><br  /></p><p style="text-indent: 0em;text-align: left;"><span style="text-indent: 0em;font-size: 15px;"></span><strong><span style="font-size: 16px;">5.5.2.2 推荐系统模块&nbsp;</span></strong></p><p style="text-indent: 0em;text-align: left;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">MKR 中的推荐系统模块的输入为用户</span><img class="" data-ratio="0.9204545454545454" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkP9Er5hCVo4d2gk9FpBVLSk8FFnD5kiabZsLKWLvVXd70dfFiciaTYBWFg/640?wx_fmt=png" data-type="png" data-w="88" style="text-align: center;width: 13px;height: 13px;"  /><span style="text-indent: 0em;font-size: 15px;">和物品</span><img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="text-indent: 0em;text-align: center;width: 14px;height: 13px;"  /><span style="text-indent: 0em;font-size: 15px;">的原始特征</span><img class="" data-ratio="0.7864077669902912" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk08ANjkEPsaY1HE8qzaJiaDcVEiaX8grbajiaqYkwr8KPk6MmLU2KslkzA/640?wx_fmt=png" data-type="png" data-w="103" style="text-indent: 0em;text-align: center;width: 14px;height: 13px;"  /><span style="text-indent: 0em;font-size: 15px;">和</span><img class="" data-ratio="0.7818181818181819" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkHRBAscUQ4fu0gJiaNDIt90nB4LGRLxkxBSRIbyTicJH03DXwUfwWib2Aw/640?wx_fmt=png" data-type="png" data-w="110" style="text-indent: 0em;text-align: center;width: 19px;height: 15px;"  /><span style="text-indent: 0em;font-size: 15px;">。根据应用场 景的不同，<img class="" data-ratio="0.7864077669902912" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk08ANjkEPsaY1HE8qzaJiaDcVEiaX8grbajiaqYkwr8KPk6MmLU2KslkzA/640?wx_fmt=png" data-type="png" data-w="103" style="height: 13px;text-align: center;width: 14px;"  />和<img class="" data-ratio="0.7818181818181819" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkHRBAscUQ4fu0gJiaNDIt90nB4LGRLxkxBSRIbyTicJH03DXwUfwWib2Aw/640?wx_fmt=png" data-type="png" data-w="110" style="height: 15px;text-align: center;width: 19px;"  />可以是one-hotID[59]，属性[1]，词袋（bag-of-words） [52]，或它们的组合。 给定用户<img class="" data-ratio="0.9204545454545454" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkP9Er5hCVo4d2gk9FpBVLSk8FFnD5kiabZsLKWLvVXd70dfFiciaTYBWFg/640?wx_fmt=png" data-type="png" data-w="88" style="height: 13px;text-align: center;width: 13px;"  />的原始特征<img class="" data-ratio="0.7864077669902912" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk08ANjkEPsaY1HE8qzaJiaDcVEiaX8grbajiaqYkwr8KPk6MmLU2KslkzA/640?wx_fmt=png" data-type="png" data-w="103" style="height: 13px;text-align: center;width: 14px;"  />，我们使用一个 L 层的MLP来提取他的隐含特征：</span><span style="text-indent: 0em;">&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.09637120761451518" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk6eWaMNBtxnwp9MrtcHvZPx2H3lS04yqVIgANp54ic0D8FNPCgDsqGpQ/640?wx_fmt=png" data-type="png" data-w="1681" style="width: 368px;height: 35px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="text-indent: 0em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-27）</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.14793577981651376" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkql6EcgYuyW65RZibiaEibLmmrQIoNtYMeLSDmNnYmV7KjBsreePiaRxcKw/640?wx_fmt=png" data-type="png" data-w="872" style="text-align: center;width: 121px;height: 18px;"  /><span style="font-size: 15px;text-indent: 2em;">是一个权重参数为</span><img class="" data-ratio="0.625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkXBn7wScUx3uZxhNnc1icHEuk7yonVqA71DV1kmf4oUvWpFWtbkeDWUA/640?wx_fmt=png" data-type="png" data-w="136" style="text-align: center;width: 19px;height: 12px;"  /><span style="font-size: 15px;text-indent: 2em;">、偏执参数为 b、非线性激活函数为 σ(·) 的全连接层。对于物品<img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="height: 13px;white-space: normal;text-indent: 0em;text-align: center;width: 14px;"  />，我们使用 L 层的交叉压缩单元来提取它的特征：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1355223880597015" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkqu0o0ebcuVGics47OIGYULI7OvcRKf5ICZibic2HdSYhO8uZjaicwmic5EQ/640?wx_fmt=png" data-type="png" data-w="1675" style="width: 330px;height: 45px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;text-indent: 2em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-28）</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.5216049382716049" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk4MukKiay4FJbCzXn4tKbOKWicicxpu2qMBkp5HrUGvDCnLeYqQ7c89QDQ/640?wx_fmt=png" data-type="png" data-w="324" style="text-align: center;width: 28px;height: 15px;"  /><span style="text-indent: 2em;font-size: 15px;">是和物品</span><img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="height: 13px;font-size: 15px;text-indent: 0em;text-align: center;width: 14px;"  /><span style="text-indent: 2em;font-size: 15px;">关联的实体的集合。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在得到了用户</span><img class="" data-ratio="0.9204545454545454" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkP9Er5hCVo4d2gk9FpBVLSk8FFnD5kiabZsLKWLvVXd70dfFiciaTYBWFg/640?wx_fmt=png" data-type="png" data-w="88" style="height: 13px;text-indent: 34px;white-space: normal;text-align: center;width: 13px;"  /><span style="font-size: 15px;">的特征</span><img class="" data-ratio="0.5833333333333334" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkThL0VmgXXM3WwhVibrqCOqNZMtG2A37zAwLcibJOw7NuCMvuTqXDfPQg/640?wx_fmt=png" data-type="png" data-w="168" style="text-align: center;text-indent: 2em;width: 25px;height: 15px;"  /><span style="text-indent: 2em;font-size: 15px;">以及物品</span><img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="height: 13px;text-indent: 0em;text-align: center;width: 14px;"  /><span style="text-indent: 2em;font-size: 15px;">的特征</span><img class="" data-ratio="0.7112676056338029" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkrEpBR4ib1pSN5lXrVJTbgz4kTCOIkodtPyHA7BGLeh8k4eW41V0OSCg/640?wx_fmt=png" data-type="png" data-w="142" style="text-align: center;width: 25px;height: 18px;"  /><span style="font-size: 15px;text-indent: 2em;">后，我们将</span><img class="" data-ratio="0.5833333333333334" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkThL0VmgXXM3WwhVibrqCOqNZMtG2A37zAwLcibJOw7NuCMvuTqXDfPQg/640?wx_fmt=png" data-type="png" data-w="168" style="font-size: 15px;text-indent: 2em;height: 15px;text-align: center;width: 25px;"  /><span style="font-size: 15px;text-indent: 2em;">和</span><img class="" data-ratio="0.7112676056338029" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkrEpBR4ib1pSN5lXrVJTbgz4kTCOIkodtPyHA7BGLeh8k4eW41V0OSCg/640?wx_fmt=png" data-type="png" data-w="142" style="font-size: 15px;height: 18px;text-align: center;width: 25px;"  /><span style="font-size: 15px;text-indent: 2em;">拼接起来以 结合这两个通路。然而，一个简单的向量拼接不足以刻画用户和物品的交互[59]。因此， 我们使用另一个 H−1 层的MLP来处理拼接后的向量。相比于内积，MLP的设计使得 MKR 具有更多的灵活性和非线性能力来处理</span><img class="" data-ratio="0.5833333333333334" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkThL0VmgXXM3WwhVibrqCOqNZMtG2A37zAwLcibJOw7NuCMvuTqXDfPQg/640?wx_fmt=png" data-type="png" data-w="168" style="font-size: 15px;text-indent: 2em;height: 15px;text-align: center;width: 25px;"  /><span style="font-size: 15px;text-indent: 2em;">和</span><img class="" data-ratio="0.7112676056338029" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkrEpBR4ib1pSN5lXrVJTbgz4kTCOIkodtPyHA7BGLeh8k4eW41V0OSCg/640?wx_fmt=png" data-type="png" data-w="142" style="font-size: 15px;height: 18px;text-align: center;width: 25px;"  /><span style="font-size: 15px;text-indent: 2em;">的交互。最终，用户</span><img class="" data-ratio="0.9204545454545454" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkP9Er5hCVo4d2gk9FpBVLSk8FFnD5kiabZsLKWLvVXd70dfFiciaTYBWFg/640?wx_fmt=png" data-type="png" data-w="88" style="font-size: 15px;height: 13px;text-align: center;width: 13px;"  /><span style="font-size: 15px;text-indent: 2em;">和物品</span><img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="font-size: 15px;height: 13px;text-indent: 0em;text-align: center;width: 14px;"  /><span style="font-size: 15px;text-indent: 2em;">有交互行为的预测概率为：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.2706422018348624" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkgAGIfwK6I6icsbxRHBZQybyN8KyeQB3tf585ibEVpDKWXwQZHWchpClA/640?wx_fmt=png" data-type="png" data-w="1526" style="width: 315px;height: 85px;"  /></p><p style="text-indent: 0em;text-align: center;"><span style="font-size: 15px;text-indent: 2em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-29）</span></p><p style="text-indent: 2em;"><br  /></p><p><span style="font-size: 16px;"><strong>5.5.2.3 知识图谱特征学习模块</strong></span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">知识图谱特征学习的目的是将实体和向量映射到低维连续空间中，并保持它们的结构信息。最近，研究者们提出了很多知识图谱特征学习方法，包括翻译距离模型（translational distance models）[82,84] 和语义匹配模型（semantic matching models）[157,158]。在MKR 中，我们提出一种深度语义匹配模型用于知识图谱特征学习。和推荐系统模块类似，对于一个给定的三元组(h,r,t)，我们首先使用多个交叉压缩单元和非线性层来分别处理头结点 h 和关系 r 的原始输入。（这可以包括 ID[84]、种类[159]、文字描述[83] 等）。它们的特征随后被拼接起来，送入一个 K 层的MLP来预测尾节点 t：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="text-indent: 0em;"></span><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.137409200968523" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk3jmCtp9N2q9zicjcFVcwUKiabX6MtCEP5uic2G2bb2lajMdbNqulianzaw/640?wx_fmt=png" data-type="png" data-w="1652" style="width: 525px;height: 72px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-30）</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.5416666666666666" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkVhCGjX2sNbeXiamwK3U8icdqXbZNhk8U29quHib3iaE8TfGpMmIyZrRfeg/640?wx_fmt=png" data-type="png" data-w="216" style="text-align: center;width: 28px;height: 15px;"  /><span style="font-size: 15px;text-indent: 2em;">是实体 h 关联的物品的集合，</span><img class="" data-ratio="1.1030927835051547" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkpdVQpmR1wF88ibuJM6ASQcZbSZmYPW6ibVQXNhZ14NCQ9s6thB6hF0Uw/640?wx_fmt=png" data-type="png" data-w="97" style="text-align: center;width: 16px;height: 18px;"  /><span style="font-size: 15px;text-indent: 2em;">是预测的尾节点 t 的向量。最终，三元组 (h,r,t) 的分数通过一个评分函数</span><img class="" data-ratio="0.9051724137931034" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkiaAXeOQKTLibSOuCQDZpNtHKvaFZ9dib86YBibt6vARJnJxvAmib1P0Z2YQ/640?wx_fmt=png" data-type="png" data-w="116" style="text-align: center;width: 17px;height: 15px;"  /><span style="font-size: 15px;text-indent: 2em;">计算得到：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1361671469740634" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkAdIjJTHXObCeZnG2VWzibuxQSmuISo9tZfS9rfe6FY9lwDn9CSIEdIQ/640?wx_fmt=png" data-type="png" data-w="1388" style="width: 301px;height: 41px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;text-indent: 2em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-31）</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.718562874251497" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkLOG6XTLAKUfpibOBea3KsD25cG41PYcIbib3hG7dVhL1jHNHa7M0RcKw/640?wx_fmt=png" data-type="png" data-w="167" style="text-align: center;width: 20px;height: 14px;"  /><span style="font-size: 15px;">是尾节点 t 的实际特征。在本文中，我们使用归一化的内积</span><img class="" data-ratio="0.201329534662868" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkoalaccFmia7NXArt9HPnclTfLWFniakB92q3ias1PV5YyicicBRQovRGpaA/640?wx_fmt=png" data-type="png" data-w="1053" style="text-align: center;width: 97px;height: 20px;"  /></p><p><span style="font-size: 15px;">作为评分函数[160]，但是其它形式的相似度函数也可以在这里使用，例如Kullback–Leibler divergence。</span><br  /></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.3 学习算法</span></strong>&nbsp;</p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">MKR的完整的损失函数如下所示：&nbsp;</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.12534511319712865" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkMpCuUc1QURpvMsScAqmF6uT15bkpZoWshN0ASiaYZgZ8Wrz3GBYRA2Q/640?wx_fmt=png" data-type="png" data-w="1811" style=""  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-32）</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">在公式（5–32）中，第一项衡量推荐系统模块中的损失，其中</span><img class="" data-ratio="0.9204545454545454" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkP9Er5hCVo4d2gk9FpBVLSk8FFnD5kiabZsLKWLvVXd70dfFiciaTYBWFg/640?wx_fmt=png" data-type="png" data-w="88" style="height: 13px;text-indent: 34px;white-space: normal;text-align: center;width: 13px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.9010989010989011" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKgKeuIOB74n1028PictPcMRqgQqHP31TLicHQm7eaJGBSNQ9r1vbSBibw/640?wx_fmt=png" data-type="png" data-w="91" style="height: 13px;text-indent: 0em;white-space: normal;font-size: 15px;text-align: center;width: 14px;"  /><span style="font-size: 15px;">分别遍历了用户和物品的集合，J 是交叉熵（cross-entropy）函数。第二项计算了知识图谱特征学习模块中的损失，其中我们的目标是提升所有正确的三元组的分数，降低所有错误的三元组的分数。最后一项是防止过拟合的正则项。λ1 和 λ2 是权衡参数。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">注意到公式（5–32）遍历了所有可能的用户-物品对和三元组。为了我使计算更有效率，类似文献[68]，我们在训练过程中使用负采样技术。MKR的学习算法如算法5–1所示。一个训练轮中包含了两个阶段：推荐系统任务（第4-8行）和知识图谱特征学习任务（第10-12行）。在每轮中，我们重复训练 t 次推荐系统任务（t 是一个超参数且一般t &gt; 1）并训练一次知识图谱特征学习任务，因为我们更关注于提升推荐性能。我们会在实验部分讨论 t 的选择。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><img class="" data-ratio="0.6618457300275482" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkbSVmEaho7Pj6Cc2MxRP7B4rHNBCSClHc2qKzFyfLVgw7ysicUtmoYPg/640?wx_fmt=png" data-type="png" data-w="1452" style="text-align: center;white-space: normal;"  /></span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"></span><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.4 理论分析</span></strong></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.4.1 多项式拟合</span></strong>&nbsp;</p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">根据魏尔斯特拉斯逼近定理（Weierstrass approximation theorem） [161]，任何在特定平滑假设下的函数都可以被一个多项式近似到任意精度。因此，我们研究交叉压缩单元的高阶交互模拟的能力。我们证明交叉压缩单元可以拟合高达指数级别的物品-实体特征交互：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><strong><span style="font-size: 14px;">定理 5.1. 记 MKR 网络中的输入物品和实体的特征分别为<strong style="white-space: normal;text-align: center;"><img class="" data-ratio="0.15632754342431762" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZke45GkxQh6Y3IHsTse9Xr7kbbUdibesQoXcSezLL6REZTGNo4yaDrKKw/640?wx_fmt=png" data-type="png" data-w="403" style="height: 19px;width: 124px;"  /></strong></span></strong><strong style="text-indent: 2em;"><span style="font-size: 14px;">和 e =</span></strong><img class="" data-ratio="0.22580645161290322" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkXCdhsiaITYtt84OObxKvaC9u2JtrO4STXy5eyP7LG4NmLNAicj3sPbJA/640?wx_fmt=png" data-type="png" data-w="279" style="text-indent: 2em;text-align: center;width: 74px;height: 17px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">。那么</span></strong><img class="" data-ratio="0.45985401459854014" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZklgyfLHUxLNgvciaNC1iczDxsOvrJotcmJficsrWdEYgx9vca7Io2GHcWA/640?wx_fmt=png" data-type="png" data-w="137" style="text-indent: 2em;text-align: center;width: 39px;height: 18px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">和</span></strong><img class="" data-ratio="0.5111111111111111" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkI3gphOFGxibIGHRAMWpwzW83c8mbpAJmoVibxjMFpyNh86GRdaJ02RZg/640?wx_fmt=png" data-type="png" data-w="135" style="text-indent: 2em;text-align: center;width: 40px;height: 20px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">（</span></strong><img class="" data-ratio="0.7647058823529411" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkk96bmQs3HMns7krZvxGGmHJibNXib9mE5fKWxibia6bm7m7PGILlXAAIxA/640?wx_fmt=png" data-type="png" data-w="68" style="text-indent: 2em;text-align: center;width: 22px;height: 17px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">和</span></strong><img class="" data-ratio="0.7027027027027027" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkOcoUzEBjJQSB2E07LACkNaWyOqR6KUiacqs5b5HgQ4GK8y1Rs6koXNw/640?wx_fmt=png" data-type="png" data-w="74" style="text-indent: 2em;text-align: center;width: 27px;height: 19px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">的</span></strong><img class="" data-ratio="0.32338308457711445" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkGjJ7dPoEojqRCQa6GyukELmav9ZHNib56V6ff1j78fPK2W03BNmib5mA/640?wx_fmt=png" data-type="png" data-w="201" style="text-indent: 2em;text-align: center;width: 58px;height: 19px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">）的具有最大度数的交叉项是</span></strong><img class="" data-ratio="0.15619047619047619" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkekfokM6JQHS0rxiayAXwYicT6RFuyYJXScdEh40NZU2icCT91QLP9tUlg/640?wx_fmt=png" data-type="png" data-w="525" style="text-indent: 2em;text-align: center;width: 143px;height: 22px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">，其中</span></strong><img class="" data-ratio="0.08064516129032258" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkIS6BqKE7W8257KbmBIG2iaeCaKnoMJicCCdBh4msDhyJ9nibib5fpowkJA/640?wx_fmt=png" data-type="png" data-w="1364" style="text-indent: 2em;text-align: center;width: 223px;height: 18px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">；</span></strong><img class="" data-ratio="0.0635593220338983" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkcx7G9HtmdDx1VbEQkOicjUNx8RUkXJnTTibeCZEJWDt6fichq1ja7G5Sw/640?wx_fmt=png" data-type="png" data-w="1652" style="text-indent: 2em;text-align: center;width: 221px;height: 14px;"  /><strong style="text-indent: 2em;"><span style="font-size: 14px;">。</span></strong><strong style="text-align: center;"></strong></p><p style="text-align: left;text-indent: 2em;"><strong style="text-indent: 2em;"><span style="font-size: 14px;"><br  /></span></strong></p><p><span style="font-size: 15px;">在推荐系统中，</span><img class="" data-ratio="0.3016194331983806" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZktSwHGqy8y7e7NJa6fslwwGuiaJia37W3LDYGicJNVbxWW7TMglnMicygOg/640?wx_fmt=png" data-type="png" data-w="494" style="text-align: center;width: 76px;height: 23px;"  /><span style="font-size: 15px;">也叫做组合特征（combinatorial feature），因为它衡量了多个原始特征的交互。定理5.1表明交叉压缩单元可以自动模拟足够高阶的物品和实体之间的组合特征。和现有工作，例如Wide&amp;Deep[57]、分解机（factorization machine） [123,162] 和DCN[163] 相比，MKR具有更强大的拟合能力。定理5.1的证明如下：</span></p><p><span style="font-size: 15px;"><br  /></span></p><p><strong><span style="font-size: 15px;">证明. </span></strong><span style="font-size: 15px;">我们用数学归纳法进行证明：&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">初始步：当</span><img class="" data-ratio="0.9850746268656716" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkoXA6ue91FMwMY4QGm9hODqKW9HvaJkGBicBGvfQKIxCHiczbLecOA0Gw/640?wx_fmt=png" data-type="png" data-w="67" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;text-indent: 2em;">= 1时，</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p><span style="font-size: 15px;"></span></p><p style="text-align: center;"><img class="" data-ratio="0.22762762762762762" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkMkaF9au3Guiadc1TEMwzoYWicQ9z9mH9licfian3GibclcMicPthuk4jYHaQ/640?wx_fmt=png" data-type="png" data-w="1665" style=""  /></p><p style="text-align: left;text-indent: 2em;"><strong style="text-indent: 2em;"><span style="font-size: 14px;"></span></strong><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">因此，我们有</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.2976567447751742" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkDwXicUd5XsRp2ZhnNHqIibpyzDs1BjS6AjoqXReSiaqTgNUhkicPL8QsXg/640?wx_fmt=png" data-type="png" data-w="1579" style="width: 440px;height: 131px;"  /></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">显然，具有最大度数的交叉项是</span><img class="" data-ratio="0.3541666666666667" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkmROQTzzkrMrXQiadJ9gpIZ5FWrZXMmOTrLNGFOjDgPictdhqvOUgoUqw/640?wx_fmt=png" data-type="png" data-w="432" style="text-align: center;width: 70px;height: 25px;"  /><span style="text-indent: 2em;font-size: 15px;">，因此，对于</span><img class="" data-ratio="0.8083333333333333" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkLQppNClNsickeNPxMKicwnOlPjKgcJHBUk4VzLLlZxLCEibujslBI2uDg/640?wx_fmt=png" data-type="png" data-w="120" style="text-indent: 2em;text-align: center;width: 23px;height: 19px;"  /><span style="font-size: 15px;text-indent: 2em;">，我们有</span><img class="" data-ratio="0.7380952380952381" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkINJwJIY5XCq2AcVuPceUNvNboTGK1Zo1DibNllpPYcicrX1G3icvA3DKw/640?wx_fmt=png" data-type="png" data-w="126" style="text-indent: 2em;text-align: center;width: 19px;height: 14px;"  /><span style="font-size: 15px;text-indent: 2em;">+···+</span><img class="" data-ratio="0.59375" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUeN4scIf4zTshiaWib6NJLkjWMXfSSVTSYnfoXYB6D1vtJVxYIITG02Q/640?wx_fmt=png" data-type="png" data-w="160" style="text-indent: 2em;text-align: center;width: 24px;height: 14px;"  /><span style="font-size: 15px;text-indent: 2em;">= 1 =</span><img class="" data-ratio="0.6093023255813953" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkpefyAO3ahdPjNzsB15a1Rarp7DmT4N80ibIgqaicXNjzeDh4TShCzb9w/640?wx_fmt=png" data-type="png" data-w="215" style="text-indent: 2em;text-align: center;width: 28px;height: 17px;"  /><span style="font-size: 15px;text-indent: 2em;">，</span><img class="" data-ratio="1.0076335877862594" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUqdGI2wpLPBCyIqAxVVbDIDcVJ7AvO7GoQ65gyicZk1017P0QfZao0Q/640?wx_fmt=png" data-type="png" data-w="131" style="text-indent: 2em;text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;text-indent: 2em;">+···+</span><img class="" data-ratio="0.891156462585034" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkMZiciaH6paYiagxAaZdXvytosf5vCJINaNZaEFs9Qpt6kG8UU6H5QgROQ/640?wx_fmt=png" data-type="png" data-w="147" style="text-indent: 2em;text-align: center;width: 18px;height: 16px;"  /><span style="font-size: 15px;text-indent: 2em;">= 1 =<img class="" data-ratio="0.6093023255813953" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkpefyAO3ahdPjNzsB15a1Rarp7DmT4N80ibIgqaicXNjzeDh4TShCzb9w/640?wx_fmt=png" data-type="png" data-w="215" style="height: 17px;text-indent: 34px;text-align: center;width: 28px;"  />。</span><img class="" data-ratio="0.6846846846846847" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkic0SfWtuGGxeTHj4CZYialE9gBicS7fV7q2FicpCUetn6E9XlTcZcfcoRg/640?wx_fmt=png" data-type="png" data-w="111" style="text-indent: 2em;text-align: center;width: 24px;height: 16px;"  /><span style="font-size: 15px;text-indent: 2em;">的证明类似。&nbsp;</span></p><p><span style="font-size: 15px;">归纳步：假设在</span><img class="" data-ratio="0.18938307030129126" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkZ3XMlHLrSsFicZlaNCbFaKh9QhjzC5go0W78PRXEYtm6bTDQk2EFpyg/640?wx_fmt=png" data-type="png" data-w="697" style="text-align: center;width: 105px;height: 20px;"  /><span style="font-size: 15px;">中的最大度数项 x 和 y 满足<img class="" data-ratio="0.7380952380952381" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkINJwJIY5XCq2AcVuPceUNvNboTGK1Zo1DibNllpPYcicrX1G3icvA3DKw/640?wx_fmt=png" data-type="png" data-w="126" style="height: 14px;text-indent: 2em;white-space: normal;text-align: center;width: 19px;"  />+···+<img class="" data-ratio="0.59375" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUeN4scIf4zTshiaWib6NJLkjWMXfSSVTSYnfoXYB6D1vtJVxYIITG02Q/640?wx_fmt=png" data-type="png" data-w="160" style="height: 14px;text-indent: 2em;white-space: normal;text-align: center;width: 24px;"  />=</span><img class="" data-ratio="0.6153846153846154" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKbDMgbBeLuiaOEN3wCjMK1nYBN4ve9tBWAbm58PibGgibZjlo3ziannkdA/640?wx_fmt=png" data-type="png" data-w="130" style="text-align: center;width: 33px;height: 20px;"  /></p><p><span style="font-size: 15px;">和<img class="" data-ratio="1.0076335877862594" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUqdGI2wpLPBCyIqAxVVbDIDcVJ7AvO7GoQ65gyicZk1017P0QfZao0Q/640?wx_fmt=png" data-type="png" data-w="131" style="height: 17px;text-indent: 2em;white-space: normal;text-align: center;width: 17px;"  />+···+<img class="" data-ratio="0.891156462585034" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkMZiciaH6paYiagxAaZdXvytosf5vCJINaNZaEFs9Qpt6kG8UU6H5QgROQ/640?wx_fmt=png" data-type="png" data-w="147" style="height: 16px;text-indent: 2em;white-space: normal;text-align: center;width: 18px;"  />=<img class="" data-ratio="0.6153846153846154" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKbDMgbBeLuiaOEN3wCjMK1nYBN4ve9tBWAbm58PibGgibZjlo3ziannkdA/640?wx_fmt=png" data-type="png" data-w="130" style="height: 20px;white-space: normal;text-align: center;width: 33px;"  />。因为</span><img class="" data-ratio="0.2774108322324967" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkYAwQZoiaG26lvMMAgIAFialzsMq3RicqHso83I7lrnQAoqeIFVf98ic6Hw/640?wx_fmt=png" data-type="png" data-w="757" style="text-align: center;width: 98px;height: 27px;"  /><span style="font-size: 15px;">且</span><img class="" data-ratio="0.28378378378378377" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkIZ5CAiaekrF1cMLFzI5YUWoVEfClSFMeZ0VHtw69Y9mno72DicnKIFag/640?wx_fmt=png" data-type="png" data-w="740" style="text-align: center;width: 91px;height: 26px;"  /><span style="font-size: 15px;">&nbsp;，不失一般性，我们假设x 和 y 分别存在于</span><img class="" data-ratio="0.9333333333333333" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkJ1UPF7aZkY9YZn4IDzx9TOabib8JtBbRB5neicSZCok3Agf0cxKqiaPoQ/640?wx_fmt=png" data-type="png" data-w="165" style="text-align: center;width: 24px;height: 22px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.9085365853658537" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkDz7uraODZ4ianXJ2ya90Wiaq82j6a5cezTS9zWqzkbtFz9PKUnK3dfhg/640?wx_fmt=png" data-type="png" data-w="164" style="text-align: center;width: 21px;height: 19px;"  /><span style="font-size: 15px;">中。因此，对于</span><img class="" data-ratio="0.42660550458715596" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk3FIw4nA4bVzaLzuLORQ9NwYnJcRcW15ogWic73R8Ataib85at2ia15TMg/640?wx_fmt=png" data-type="png" data-w="218" style="text-align: center;width: 34px;height: 15px;"  /><span style="font-size: 15px;">，我们有&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.1543778801843318" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZknQcaOPoHl6reOuQmNHyxy2mMRlvl8rlPf4vxCLibzPofEcpnMiak3qmw/640?wx_fmt=png" data-type="png" data-w="1736" style="width: 434px;height: 67px;"  /></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"></span><span style="font-size: 15px;">显然，</span><img class="" data-ratio="0.38190954773869346" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZk2LAhMMsUklo2LjCGfWSlLxWFU9hfnzcEL0Nch464zxE9IFdGYLicX5w/640?wx_fmt=png" data-type="png" data-w="398" style="text-align: center;width: 54px;height: 21px;"  /><span style="font-size: 15px;text-indent: 2em;">的最大度数项是</span><img class="" data-ratio="0.4740566037735849" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkRjoNz9ajIQewypBEyfadLKzWjiavfNTFVJDcEevcy0lBsHqmxnibNibPA/640?wx_fmt=png" data-type="png" data-w="424" style="text-align: center;width: 41px;height: 19px;"  /><span style="font-size: 15px;text-indent: 2em;">中的交叉项 xy。既然对于 x 和 y 我们都有<span style="font-size: 15px;"><img class="" data-ratio="0.7380952380952381" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkINJwJIY5XCq2AcVuPceUNvNboTGK1Zo1DibNllpPYcicrX1G3icvA3DKw/640?wx_fmt=png" data-type="png" data-w="126" style="height: 14px;text-indent: 2em;text-align: center;width: 19px;"  />+···+<img class="" data-ratio="0.59375" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUeN4scIf4zTshiaWib6NJLkjWMXfSSVTSYnfoXYB6D1vtJVxYIITG02Q/640?wx_fmt=png" data-type="png" data-w="160" style="height: 14px;text-indent: 2em;text-align: center;width: 24px;"  />=</span><img class="" data-ratio="0.6153846153846154" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKbDMgbBeLuiaOEN3wCjMK1nYBN4ve9tBWAbm58PibGgibZjlo3ziannkdA/640?wx_fmt=png" data-type="png" data-w="130" style="height: 20px;white-space: normal;text-align: center;width: 33px;"  />且<img class="" data-ratio="1.0076335877862594" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkUqdGI2wpLPBCyIqAxVVbDIDcVJ7AvO7GoQ65gyicZk1017P0QfZao0Q/640?wx_fmt=png" data-type="png" data-w="131" style="height: 17px;font-size: 15px;white-space: normal;text-indent: 2em;text-align: center;width: 17px;"  /><span style="font-size: 15px;">+···+</span><img class="" data-ratio="0.891156462585034" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkMZiciaH6paYiagxAaZdXvytosf5vCJINaNZaEFs9Qpt6kG8UU6H5QgROQ/640?wx_fmt=png" data-type="png" data-w="147" style="height: 16px;font-size: 15px;white-space: normal;text-indent: 2em;text-align: center;width: 18px;"  /><span style="font-size: 15px;">=</span><img class="" data-ratio="0.6153846153846154" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkKbDMgbBeLuiaOEN3wCjMK1nYBN4ve9tBWAbm58PibGgibZjlo3ziannkdA/640?wx_fmt=png" data-type="png" data-w="130" style="height: 20px;font-size: 15px;white-space: normal;text-align: center;width: 33px;"  />，交叉项 xy 的度数因此满足</span><img class="" data-ratio="0.1306122448979592" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkkDtIHaCsDOO6a4Bs8xo7yiaqVSwGDt4oiaVLibdqesVTmRu5cJQErwmbw/640?wx_fmt=png" data-type="png" data-w="1225" style="text-align: center;width: 159px;height: 21px;"  /><span style="font-size: 15px;text-indent: 2em;">和</span><img class="" data-ratio="0.12229102167182662" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZkA4DNFcW0wBKFLPbRl9RgRerpdB54okdIS60kSlBbLymCzjndvYwkLg/640?wx_fmt=png" data-type="png" data-w="1292" style="text-indent: 2em;text-align: center;width: 166px;height: 20px;"  /><span style="font-size: 15px;text-indent: 2em;">。</span><img class="" data-ratio="0.40554156171284633" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzlQPdqvMIpA0oD8SdnnVZka4xBxq594IZ3YIEsLZjPTaxM6Nb409nGsUn596a8mdMZVLuOPpF1qg/640?wx_fmt=png" data-type="png" data-w="397" style="text-indent: 2em;text-align: center;width: 53px;height: 21px;"  /><span style="font-size: 15px;text-indent: 2em;">的证明类似。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"><br  /></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.5.4.2 一些有代表性的方法的统一视角&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;"><br  /></span></strong></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在本节中，通过阐述推荐系统和多任务学习中的一些有代表性的方法是MKR的特殊版本或和MKR有理论上的关联，我们为这些方法提供一个统一的视角。这也验证了交叉压缩单元的设计的合理性，同时也从概念上解释了MKR和基准方法相比有较强的性能的原因。</span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;"></span></strong><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;">分解机（Factorizationmachines）&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">分解机（FM） [123,162] 使用分解的参数来模拟变量之间的所有交互，因此它可以在有巨大空间的问题（例如推荐系统）中估计变量的交互。一个2阶的分解机的模型公式为</span><img class="" data-ratio="0.0806686046511628" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcwCX20g8ibKVzQY79DDn1sOn372wuOh9OGyWTNnn2CtbEGwsAXqH6VaA/640?wx_fmt=png" data-type="png" data-w="1376" style="text-align: center;width: 252px;height: 20px;"  /><span style="font-size: 15px;text-indent: 0em;">，其中</span><img class="" data-ratio="0.5804195804195804" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcfMXMl757vDajTpnXOwX4gCIMVQN2ukO4X36MJBSWES1h80CV01sjbA/640?wx_fmt=png" data-type="png" data-w="143" style="text-align: center;width: 22px;height: 20px;"  /><span style="font-size: 15px;text-indent: 0em;">是两个向量的内积。我们证明分解机的核心和单层的交叉压缩单元在概念上是相似的：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;text-indent: 0em;">命题 5.2.</span><img class="" data-ratio="0.8444444444444444" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcvVicX7qYubEKKDOBK4lPB9DFicLXPiahPLvhEibUsYsuk1xkWyiaEQc4sQA/640?wx_fmt=png" data-type="png" data-w="135" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;text-indent: 0em;">和</span><img class="" data-ratio="0.856" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcTSRibbVkVLXBHhNzTGQzlBsIQG0bpo80A83Y9VichJUWYkR2zyiaRRWZw/640?wx_fmt=png" data-type="png" data-w="125" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;text-indent: 0em;">的</span><img class="" data-ratio="0.27530364372469635" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcMnicQ6QzeJ7TtNehtBwkw1BQpoaueTMyKup9lP3hJpDKuU3fbHhprvg/640?wx_fmt=png" data-type="png" data-w="494" style="text-align: center;width: 52px;height: 17px;"  /><span style="font-size: 15px;text-indent: 0em;">可以被写成如下形式：&nbsp;</span></strong></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.11951219512195121" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWclBtcbAaY3ekD11nP1hKal0Oncrf1EPibYF6mckGLYbyqTCk4Rd3kokw/640?wx_fmt=png" data-type="png" data-w="1640" style="width: 419px;height: 50px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;text-indent: 0em;"></span><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-33）</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><span style="font-size: 15px;">其中</span><img class="" data-ratio="0.1759581881533101" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc6LgoibJPza87ZNcYrmFqa2RO5uJU1sHiaMYgmpeGfibicZgR6B1KEUFwDg/640?wx_fmt=png" data-type="png" data-w="1148" style="text-align: center;width: 120px;height: 21px;"  /><span style="text-indent: 2em;">。</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;">有趣的是，和分解机中将</span><img class="" data-ratio="0.5857142857142857" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc6eIMm6rFMC00zXzH9IxtC7golNe1FdMRcag7aOzAnicTWk5nOwnJpMw/640?wx_fmt=png" data-type="png" data-w="210" style="text-align: center;width: 25px;height: 17px;"  /><span style="font-size: 15px;text-indent: 0em;">的权值参数分解为两个向量的内积不同，在交叉压缩单元中</span><img class="" data-ratio="0.5609756097560976" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWckbI2H7QAhOAI6GkfJxibZB5kdYeibZNibQYgSohrm96BsicDb8Q9dPTHOA/640?wx_fmt=png" data-type="png" data-w="205" style="text-align: center;width: 27px;height: 17px;"  /><span style="font-size: 15px;text-indent: 0em;">的权值被分解成两个标量的和，用以减少参数的个数，提升模型的鲁棒性。 命题5.2的证明如下：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;text-indent: 0em;">证明.</span></strong><span style="font-size: 15px;text-indent: 0em;"> 在证明定理5.1时，我们已经证明了&nbsp;</span></p><p style="text-align: left;text-indent: 0em;"><span style="font-size: 15px;text-indent: 0em;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.18026565464895636" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcq0sOsb9VF7KQIhbRSibE2YO2xTalicnk5LLFibl27Iicz9fqHW6WFDqhNQ/640?wx_fmt=png" data-type="png" data-w="1581" style="width: 409px;height: 74px;"  /></p><p style="text-align: left;text-indent: 0em;"><span style="font-size: 15px;text-indent: 0em;"></span>（5-34）</p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">很容易看出</span><img class="" data-ratio="0.3055555555555556" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcOniay0uib3EFPCWtTAmFbYBbpBPecJoib2XyaWiaRklxvFpyvhgpmPhl8g/640?wx_fmt=png" data-type="png" data-w="432" style="text-align: center;width: 67px;height: 20px;"  /><span style="text-indent: 0em;font-size: 15px;">,</span><img class="" data-ratio="0.3059360730593607" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc50TEIIcboRYUuSGbKODiccpRORcSQENWXk1JaibBwbN6dH6JhdrG05rg/640?wx_fmt=png" data-type="png" data-w="438" style="text-align: center;width: 68px;height: 21px;"  /><span style="text-indent: 0em;font-size: 15px;">，</span><img class="" data-ratio="0.2701688555347092" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWca0zyicaNIL290OxRwFTWB6vFejIALib6XP7Hv1dGbiayhpoXx785sZXYQ/640?wx_fmt=png" data-type="png" data-w="533" style="text-indent: 0em;text-align: center;width: 76px;height: 21px;"  /><span style="text-indent: 0em;font-size: 15px;">。</span><img class="" data-ratio="0.5162790697674419" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcSJA3m6zKyXwPv8B9tmvIP1tHEvDm5ibS2jCCS73KiaSCr4h41vicheiaBg/640?wx_fmt=png" data-type="png" data-w="215" style="text-align: center;width: 33px;height: 17px;"  /><span style="text-indent: 0em;font-size: 15px;">的证明是类似的。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="text-indent: 0em;font-size: 15px;"><br  /></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="text-indent: 0em;font-size: 15px;">深度交叉网络（Deep&amp;CrossNetwork）&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><strong><span style="text-indent: 0em;font-size: 15px;"><br  /></span></strong></p><p style="text-indent: 2em;"><span style="font-size: 15px;">深度交叉网络（DCN） [163] 通过引入如下的网络层来显式地学习高阶的特征交互：</span><img class="" data-ratio="0.1366906474820144" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcAXVCTFfJic9MfvJGDL45HO8asrOhft8BJhp2GLEygjoAIcsOpONGxeg/640?wx_fmt=png" data-type="png" data-w="973" style="text-align: center;width: 148px;height: 20px;"  /><span style="font-size: 15px;">，其中</span><img class="" data-ratio="0.8484848484848485" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcXqhpbqctmPTZLYgrNQzZAKQxibQyr0QhibGKibr4jn5ibibM0leWPd3PibXQ/640?wx_fmt=png" data-type="png" data-w="99" style="text-align: center;width: 18px;height: 17px;"  /><span style="font-size: 15px;">、</span><img class="" data-ratio="0.664" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcrb1MKNuWmNeTTltTbQAOKoiaSHiapVL3LestkNfuBXtibXOljFoznSa6A/640?wx_fmt=png" data-type="png" data-w="125" style="text-align: center;width: 20px;height: 17px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.8508771929824561" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcGia12ibd6MTWuEvqOBAzjr1m2oIK0hDTiaz9oqy2WcpzbwYI9G6PbT9PQ/640?wx_fmt=png" data-type="png" data-w="114" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;">分别是第</span><img class="" data-ratio="1.0240963855421688" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcNibs1pRmIyUqFtI9aiaiaMm3PXicBNUCYzfRqb0CpeEsUVicP7iaQQCJiaicIg/640?wx_fmt=png" data-type="png" data-w="83" style="text-align: center;width: 17px;height: 17px;"  /><span style="font-size: 15px;">层的特征、权值和偏置。我们通过 如下的命题展示DCN和MKR之间的联系：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p><strong><span style="font-size: 15px;">命题 5.3. 在公式（5–25）的</span></strong><img class="" data-ratio="0.49032258064516127" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcy2oKqbGHUQLGTa6uru6wSbbOoI9vflvu7gEL38kic0HbmPFxzTnQTRQ/640?wx_fmt=png" data-type="png" data-w="155" style="text-align: center;width: 32px;height: 17px;"  /><strong><span style="font-size: 15px;">中，如果我们限制第一项</span></strong><img class="" data-ratio="0.6764705882352942" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcQpYFp2YaBmwTajCFIpVKSpUKibgSEtEvUPusv5UzHZSpwiaOdrotWKicA/640?wx_fmt=png" data-type="png" data-w="170" style="text-align: center;width: 29px;height: 20px;"  /><strong><span style="font-size: 15px;">满足</span></strong><img class="" data-ratio="0.2750642673521851" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcv85qjkFVGPyQmDibDVn0pGB7funZUks2GueL52ukut87PcaC0RTdiahQ/640?wx_fmt=png" data-type="png" data-w="389" style="text-align: center;width: 73px;height: 20px;"  /><strong><span style="font-size: 15px;">，限制 第二项</span></strong><img class="" data-ratio="0.5904761904761905" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWckc0jrk5ZOGe3Xib5dhNlb0ncpegGmiaEKefib39NibRvgMjfria3nkLLy8Q/640?wx_fmt=png" data-type="png" data-w="105" style="text-align: center;width: 25px;height: 17px;"  /><strong><span style="font-size: 15px;">为</span></strong><img class="" data-ratio="0.5675675675675675" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc2w3vaUKWJzvreMREEeKOulEDK2AeGY4cUWBkHmPXvpUZ9xVgLWKHDg/640?wx_fmt=png" data-type="png" data-w="111" style="text-align: center;width: 28px;height: 17px;"  /><strong><span style="font-size: 15px;">（以及对</span></strong><img class="" data-ratio="0.49645390070921985" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc80l2egFSCdFu4TC8ib827tgOdcgZwGykyGp5Nxghtx48l6MXU1yzZOQ/640?wx_fmt=png" data-type="png" data-w="141" style="text-align: center;width: 35px;height: 17px;"  /><strong><span style="font-size: 15px;">施加相似的限制），那么交叉压缩单元和 DCN 网络层在多 任务学习的概念下是等价的：</span></strong></p><p><strong><span style="font-size: 15px;"><br  /></span></strong></p><p style="text-align: center;"><img class="" data-ratio="0.07291666666666667" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcxFX0IicXSqcU3nLRqFsAiak03lvhupAz32gPQaMMoPWOc07PKCSWsJag/640?wx_fmt=png" data-type="png" data-w="1824" style="width: 521px;height: 38px;"  /></p><p style="text-align: center;"><strong><span style="font-size: 15px;"></span></strong><span style="font-size: 14px;color: rgb(136, 136, 136);">（5-34）</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">可以证明，上述的DCN等价版本的MKR的多项式拟合能力（即</span><img class="" data-ratio="0.7176470588235294" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcIgicpXstFa6iamFtp4QOOels2pjgRMfL6Q1Ts8hp0hXhJcibGpo3Kke7A/640?wx_fmt=png" data-type="png" data-w="85" style="text-align: center;width: 22px;height: 17px;"  /><span style="font-size: 15px;">和</span><img class="" data-ratio="0.6263736263736264" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcfvzTxKrESIM0N5zd8UMQ6KRSeeNfj5TfOVSfusA5Zxz3bu7icXW8A9A/640?wx_fmt=png" data-type="png" data-w="91" style="text-align: center;width: 24px;height: 17px;"  /><span style="font-size: 15px;">中的交叉项的最大度数）为</span><img class="" data-ratio="0.6470588235294118" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcCdZFnB48NmUKTl7AhXYbvopBl0wRjZ8aJsqSJNODSWhGI1seeGHKVA/640?wx_fmt=png" data-type="png" data-w="153" style="text-align: center;width: 25px;height: 17px;"  /><span style="font-size: 15px;">，这要远远弱于原版的交叉压缩单元的</span><img class="" data-ratio="0.5157894736842106" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcQNRTSqVvuIqlCtyE4UsWpLnG4sYNv4VwlgYEibRicKNmAibm6MV6S51Yg/640?wx_fmt=png" data-type="png" data-w="190" style="text-align: center;width: 31px;height: 17px;"  /><span style="font-size: 15px;">的拟合能力。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"></span><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="text-indent: 0em;font-size: 15px;"></span></strong><strong><span style="font-size: 15px;">十字绣网络（Cross-stitchNetworks）</span></strong></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">十字绣网络[160] 是卷积神经网络中的一个多任务学习模型。它定义了十字绣单元来学习两个任务之间的共享的（shared）和任务特定的（task-speciﬁc）特征。我们通过如下的命题证明十字绣网络是交叉压缩单元的一个简化版本：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;">命题 5.4. 如果我们忽略公式（5–25) 中所有的偏置，那么交叉压缩单元可以写成如下形式&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;"><br  /></span></strong></p><p style="text-align: center;"><img class="" data-ratio="0.25278396436525613" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc3OMMnynabFJ9Q1qJ3loh9ynsTYoHXUDVKx7XTKcZ13RSjA0qsEh2Xg/640?wx_fmt=png" data-type="png" data-w="898" style="width: 325px;height: 82px;"  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 15px;"></span></strong>（5-35）</p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">公式（5–35）中的转换矩阵类似于十字绣网络[160] 中的</span><img class="" data-ratio="0.14756446991404013" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcKj9pgzIt6aaiaRLVvTZLVEeuQODKGwPicMENefqkducSdkNmZMOLNZZw/640?wx_fmt=png" data-type="png" data-w="698" style="text-align: center;width: 140px;height: 21px;"  /><span style="text-indent: 2em;font-size: 15px;">，这些 α 是十字绣网络中控制任务A和任务B之间的特征迁移程度的参数。和十字绣网络类似， MKR可以通过让</span><img class="" data-ratio="0.2123015873015873" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcXCe2se0icu3JywSRlZbQH2ETCa37waM3Pibx2iadA1ofUl6hIoezmia7WQ/640?wx_fmt=png" data-type="png" data-w="504" style="text-indent: 2em;text-align: center;width: 85px;height: 18px;"  /><span style="text-indent: 2em;font-size: 15px;">或</span><img class="" data-ratio="0.21541501976284586" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWccgCwsf2ArIQ2dnJ2bkTdLOdnbibVsVwHaBldia3ZbzZAjudT6y7p4ccw/640?wx_fmt=png" data-type="png" data-w="506" style="text-indent: 2em;text-align: center;width: 93px;height: 20px;"  /><span style="font-size: 15px;text-indent: 2em;">变小来使得特定的层变得更加任务特定（task-speciﬁc），也可以给它们分配一个较大的数值来让该层变得更加共享（shared）。 但是，交叉压缩单元中的转换矩阵更加细粒度（ﬁne-grained），因为转换矩阵从十字绣网络中的两个数值变成了MKR中的两个向量的内积。更为有趣的是，公式（5–35）也可以被视为是一种注意力机制[164]，因为转移权值的计算涉及了向量</span><img class="" data-ratio="0.7176470588235294" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcIgicpXstFa6iamFtp4QOOels2pjgRMfL6Q1Ts8hp0hXhJcibGpo3Kke7A/640?wx_fmt=png" data-type="png" data-w="85" style="font-size: 15px;height: 17px;text-align: center;width: 22px;"  /><span style="font-size: 15px;text-indent: 2em;">和</span><img class="" data-ratio="0.6263736263736264" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcfvzTxKrESIM0N5zd8UMQ6KRSeeNfj5TfOVSfusA5Zxz3bu7icXW8A9A/640?wx_fmt=png" data-type="png" data-w="91" style="font-size: 15px;height: 17px;text-align: center;width: 24px;"  /><span style="font-size: 15px;text-indent: 2em;">本身。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">由于命题5.3和命题5.4较为直观，我们在本文中省略了它们的证明。</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;"></span><br  /></p><p><strong><span style="font-size: 16px;">5.6 性能验证</span></strong></p><p><br  /></p><p><strong><span style="font-size: 16px;">5.6.1 数据集</span></strong></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">本节介绍实验用的数据集。我们首先介绍 DKN 中使用的新闻数据集。该新闻数据集来源自必应新闻（Bing News）的服务器记录。每条记录包含了时间戳、用户 ID、新闻URL、新闻标题和点击次数（0表示没有点击，1表示点击）。我们将2016年10月16 日到2017年6月11日之间的数据作为训练集，2017年6月12日到2017年8月11日之间的数据作为测试集。训练集和测试集都经过了采样，并保证了正负样本的均衡。另外，我们在微软Satori知识图谱中搜索了数据集中出现过的实体（以及他们的一跳的邻居），然后抽取了这些实体之间的置信度大于0.8的边（即三元组）。该新闻数据集的基本统计信息如表5–1和图5–9所示。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.2673942701227831" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcJnLic4PZEZs6nfg5KDkHPh6spZln9FU09a1pjhicnJXlwAF2Y17lJqqw/640?wx_fmt=png" data-type="png" data-w="1466" style="width: 443px;height: 118px;"  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;"></span><span style="font-size: 12px;color: rgb(136, 136, 136);">表5–1DKN的实验中Bing-News数据集的基本统计信息。</span></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 12px;color: rgb(136, 136, 136);"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="1.0966340933767644" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc5RRAqBIKx4Xdz23cmSMd9GT7oc8wDicDdGAMdtppoO6XKUlA4KcfDJQ/640?wx_fmt=png" data-type="png" data-w="921" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–9DKN的实验中Bing-News数据集中的一些统计量的分布。</span></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 12px;color: rgb(136, 136, 136);"></span><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">图5–9a展示了新闻生命周期的分布。我们将新闻的生命周期定义为它的发布日期到最后一次被点击的时间跨度。我们观察到 90% 的新闻都在发布后两天之内被点击， 这证明了在线新闻对时间的敏感性。图5–9b展示了一个用户点击过的新闻数目的分布。 77.9%的用户点过的新闻不超过5条，这也表现了新闻推荐场景中的数据稀疏性。图5– 9c和5–9d分别展示了一条新闻标题中单词（除了停用词）和实体的数目的分布。一条新闻中平均有 7.9 个单词和 3.7 个实体，这表明在新闻标题中平均每两个单词就中就会 出现一个实体。实体的这种高密度的出现频率也证实了 KCNN 的设计的有效性。图5– 9e和5–9f分别展示了 Bing-News 数据集中实体出现次数的分布和知识图谱中一个实体的上下文实体数目的分布。我们可以从中得出结论：实体的出现模式是很稀疏的，符合长尾分布（80.4% 的实体出现了不超过 10 次），但是一个实体在知识图谱中的上下文实体却很丰富，一个实体的上下文实体的数目的平均值是42.5，最大值是140,737。因此， 上下文实体可以很好地对实体向量进行补充。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">和 DKN 专门用于新闻推荐场景不同，MKR是一个通用的模型，因此，我们在 MKR 的实验中使用了以下三个数据集（包括 Bing-News 数据集）：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;text-indent: 2em;">• MovieLens-1M 是电影推荐中的一个广泛使用的基准数据集，它包含了在 MovieLens 网站上用户对电影的显式的从1到5的评分。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">•&nbsp;Book-Crossing 包含了 Book-Crossing 社区中的用户对图书的从0到10的评分。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">•&nbsp;Bing-News 包含了来自必应新闻3服务器数据的隐式反馈，时间跨度为2016年10月16日到2017年8月11日。每条新闻都包含了标题信息。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">由于 MovieLens-1M 和 Book-Crossing 包含的是显示反馈，我们将其转换成了隐式反馈数据，其中一个交互被标记为1，如果 MovieLens-1M 中该交互为4/5分，或 Book-Crossing 中该交互为0至10分（即不做筛选）；我们也随机采样了一个用户没有看过的集合，并将这些交互标记为0。对每个用户而言，正负样本的数目是相等的。我们使用微软 Satori 来为每个数据集构造知识图谱。对于 MovieLens-1M 和 Book-Crossing，我们首先从整个知识图谱中选择了一个三元组子集（知识图谱子图），其中关系的名字包含 “ﬁlm”或“book”，且置信度在0.9以上。给定这个初步筛选出的知识图谱子图，我们比照了所有合法的电影/图书在数据集中的名称和所有三元组 (head, ﬁlm.ﬁlm.name, tail) 或 (head,book.book.title,tail)的尾节点，以此进行物品和实体的配对。为了简单起见，所有不是一一对应的物品和实体对都被丢弃（这可能是由于电影/图书有重名，也有可能是 知识图谱中的噪声）。得到了物品-实体配对关系之后，我们用这些实体的 ID 去匹配知识图谱子图中头结点和尾节点，并筛选出所有匹配成功的三元组，构成了最终的知识图谱集合。Bing-News 上的筛选过程也是类似的，除了两点不同：（1）我们使用了实体链接（entity linking）的工具来从新闻标题中提取实体；（2）我们没有对关系的名字加以限制，因为不像电影和图书，新闻标题中的实体并不在一个特定的范围内。这三个数据集的基本统计信息如表5–2所示。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.16417016177351706" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc9mqTraGibeO3bRnutY5xOOrGXibiaIFr97UvwHeNrGSpjwLNIZaUuz6NA/640?wx_fmt=png" data-type="png" data-w="1669" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">表5–2MKR的实验中三个数据集的基本统计信息和超参数的设置。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.2 基准方法&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">在 DKN 的实验中，我们使用了如下的基准方法：</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">• LibFM[123] 是一个用于 CTR 预估的基于特征分解的模型。在本实验中，每条新闻的特征包含两部分，TF-IDF 特征和平均实体向量。我们将用户特征和新闻特征拼接起来作为LibFM的输入。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>KPCNN[139] 将新闻标题中出现过的实体拼接在新闻的单词序列后面，然后使用 KimCNN 来学习新闻特征。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>DSSM[60] 是一种用于文档排序的深度语义模型，它使用了词哈希（word hashing）&nbsp;技术和多个全连接层。在本实验中，用户点击过的新闻被视为查询（query），候选新闻被视为文档。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>DeepWide[57] 是一个通用的深度学习推荐模型，它结合了一个线性（wide）通道 和一个非线性（deep）通道。和 LibFM 类似，我们使用拼接的 TF-IDF 特征和平均实体向量作为两个通道的输入。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>DeepFM[56] 也是一个通用的深度学习推荐模型，它结合了一个分解机模块和一个深度神经网络模块，两个模型共享输入。DeepFM 的输入和LibFM 也相同。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>YouTubeNet[58] 使用了一个深度候选物品生成网络和一个深度排序网络来从 YouTube 的大规模候选集中推荐视频。在本实验中，我们将深度排序网络改到了新闻推荐场景中。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>DMF[61] 是一个用于推荐系统的深度矩阵分解模型，它使用了多个非线性层来处理用户和物品的原始评分向量。我们忽略了新闻的内容信息，只将隐式反馈作为 DMF 的输入。&nbsp;</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">注意到除了 LibFM 以外，其它的基准方法都是基于深度神经网络的。另外，除了 DMF 是基于协同过滤之外，其它方法都是基于内容的方法或混合方法。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">在 MKR 的实验中，我们使用了如下的基准方法：&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>PER（personalized entity recommendation）[165]。在本实验中，我们使用所有的“物 品-属性-物品”作为 PER 的特征（例如，“movie-director-movie”）。注意到 PER 不能被应用到新闻推荐，因为在新闻实体中很难预定义元路径（meta-path）。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>CKE（collaborative knowledge base embedding）[117]。在本实验中，我们将 CKE 实现为协同过滤+结构化知识模块。</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>DKN（deep knowledge-aware network）[97]。在本文中，我们使用电影/图书的名称和新闻的标题作为 DKN 的文本输入。&nbsp;</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>LibFM[123] 是一个用于CTR预估的基于特征分解的模型。我们将用户和物品的原始特征以及依据 TransR[84] 学习得到的实体向量的平均值作为LibFM的输入。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><span style="font-size: 15px;text-align: left;">•&nbsp;</span>Wide&amp;Deep[57] 是一个通用的深度学习推荐模型，它结合了一个线性（wide）通道和一个非线性（deep）通道。Wide&amp;Deep的输入和LibFM相同。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.3 实验准备工作&nbsp;</span></strong></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">DKN的实验准备工作如下：&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们选择 TransD[141] 来处理知识图谱并学习实体特征，并在 KCNN 中使用公式（5– 15）中的非线性转换函数。词向量和实体向量都被设置为100。卷积核的窗口大小为1、2、3、4，每个大小都有100个卷积核。我们使用 Adam[166] 算法通过优化对数误差来训练 DKN 。评价指标为 F1和 AUC 。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">DKN 实验中的基准方法的关键参数设置如下：对于 KPCNN，词向量和实体向量的维度都是 100；对于 DSSM，语义特征的维度是 100；对于 DeepWide，deep 模块和 wide 模块的最终特征的维度都是100；对于YouTubeNet，最后一层的维度也是100；对于 LibFM 和 DeepFM，分解机的维度为{1,1,8}；对于 DMF，用户和物品的隐含特征的维度是100。每个实验被重复5次，我们给出了平均值和极差作为结果。&nbsp;</span></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">MKR的实验准备工作如下：</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">对于三个数据集，我们设置高层的数目 H,K = 2，</span><img class="" data-ratio="0.27510917030567683" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcw5LLvnjFQDurqjf2x2hPJxvKENdwzKiaEk1r35gqhK6nZDMtzG3jLcQ/640?wx_fmt=png" data-type="png" data-w="229" style="text-align: center;width: 66px;height: 18px;"  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;"> ，其它参数如表5–2所示。超参数的选择是由在验证集上最优化 AUC 决定的。为了公平比较，所有基准方法的维度都和表5–2中相同，其它的超参数由网格搜索（grid search）决定。对于每个数据集，我们随机选择了 60% 的评分作为训练集，20% 的评分作为验证集，剩下的作为测试集。每个实验被重复5次，我们取最后的平均值作为结果。我们使用Accuracy（预测 正确的条目的比例）和 AUC 作为 CTR 预测中的性能指标，使用 F1@K 作为 top-K 推荐中的性能指标。</span><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;"></span><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.4 依次训练法的实验结果&nbsp;</span></strong></p><p style="text-indent: 2em;"><br  /></p><p style="text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.4.1 不同模型的比较&nbsp;</span></strong></p><p style="text-indent: 2em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">DKN和基准方法的比较结果如表5–3所示。对于每种在其输入中包含了实体向量的基准方法，我们将其输入中的实体向量移除来看性能如何变化。（由“(-)”标记）。另外， 我们在括号中列出了基准方法相比于 DKN 的性能提高比率，并计算了 t- 检验中显著性的 p 值。从实验结果中我们有如下观察：&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 实体向量的使用可以提高大部分基准方法的性能。例如，KPCNN、DeepWide 和 YouTubeNet 的 AUC分别提高了 1.1%、1.8% 和 1.1%。然而，DeepFM 的提升效果并不明显。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• DMF 的表现最差。这是因为 DMF 是基于协同过滤的模型，但是新闻通常都是高度时间敏感的。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 除了 DMF，其它深度学习模型比 LibFM 提高了2.0%到5.2%的 F1，和1.5%到 4.5%的 AUC。这表明深度模型在文本挖掘方面确实有效。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 在我们的实现中，DeepWide 和 YouTubeNet 的结构相似，他们的性能表现也很相近。DSSM 的性能好于 DeepWide 和 YouTubeNet ，这可能是由于 DSSM 使用了词哈希的技术。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• KPCNN 在基准方法中表现最好，这是因为 KPCNN 使用了 CNN 来处理文本，可以有效地抓住句子中的特定的局部模式。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 最后，和 KPCNN 相比，DKN 依然实现了1.7%的 AUC 提升。我们将DKN 的优越性归因到两方面：（1）DKN 使用单词-实体对齐的 KCNN 进行语句特征学习， 这可以更好地保存单词和实体之间的关联；（2）DKN 使用了注意力网络来有区别地对待用户历史记录，这有助于更好地对用户多样化的阅读兴趣进行建模。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.7908560311284046" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc6hRtmuQ9bmib4vvj5pk10KKqV26sJhGV5VQDr6BzRzvIibOMqNlHfqbA/640?wx_fmt=png" data-type="png" data-w="1028" style="width: 499px;height: 395px;"  /></p><p style="text-align: center;"><span style="color: rgb(136, 136, 136);font-size: 12px;">表5–3依次训练法中DKN和基准方法的实验结果比较。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">图5–10展示了 DKN 和基准方法在额外的10天测试中的 AUC 的结果。我们可以看到 DKN 的曲线在10天中一直在所有 baseline 的上方。另外，相比于基准方法，DKN 的表现的方差也较低，这说明 DKN 是一个很鲁邦且稳定的模型。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.4576405384006334" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcia64FPZ9RzoKIia0dXicDfhjvibOzNU7lNrzxgicPMfHE20V2Pqaqdqviafw/640?wx_fmt=png" data-type="png" data-w="1263" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–10DKN和基准方法在2017年9月1日至10日中的AUC的结果。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.4.2 DKN变种之间的比较&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">我们进一步按照以下四个方面比较了 DKN 及其变种：知识图谱的使用、知识图谱特征学习方法的选择、转换函数的选择、注意力网络的使用。结果如图5–4所示，从中我们可以看出：&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 实体向量和上下文向量的使用分别提高了 1.3% 和 0.7% 的 AUC，我们可以通过结合二者取得更好的表现。这个发现证明了 DKN 模型中引入知识的有效性。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• DKN+TransD 超越了其它的组合。这是可能是因为 TransD 是最复杂的一种模型，可能更好地抓住知识图谱的非线性关系并学习实体向量。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 有映射函数的 DKN 比没有映射函数的 DKN 表现更好，且非线性函数优于线性函数。这个结果说明转换函数可以减轻词汇和实体空间的异构性，且非线性映射能取得更好的表现。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">• 注意力网络为 DKN 模型带来了额外的1.7%的 F1 指标提升和0.9%的AUC 指标提升。我们会在下一节中给出注意力网络的一个直观的展示。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.8329571106094809" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcF2Qvn5Bk0saM7PfnxcXKyU38DOsAgy0yBvKQcpLMmgM9yy61UQcMlw/640?wx_fmt=png" data-type="png" data-w="886" style="width: 474px;height: 395px;"  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">表5–4 DKN 变种之间的比较。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.4.3 案例研究&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">为了更好地展现知识图谱和注意力网络的作用，我们随机采样了一个用户，并摘取了他在训练集和测试集中的所有样本（训练集中标签为 0 的样本被忽略）。如表5–5所示，该用户点击过的新闻明显表现出他的兴趣点：第 1-3 条和车有关，第 4-6 条和政治有关（类别并非原数据集提供，而是由我们手工标记）。我们使用了整个训练集来训练完整版本的 DKN，以及没有实体/上下文向量的 DKN。然后将该用户的所有训练/测试样本对输入模型中，并记录注意力网络的输出。结果如图5–11所示，其中越深的蓝色表示越大的注意力值。从图5–11a中我们可以看出，第一个测试样本与训练样本中标签为 Cars 的样本有较高的注意力值，因为它们共享了相同的单词“Tesla”。但是第二个测试样本的结果却较差，因为它没有和任何训练样本有显式的词汇上的相似。第三条训练样本也是类似。相反，在图5–11b中我们看到注意力网络准确地抓住了两个类别“Cars”和 “Politics”内部的关联。这是因为，在知识图谱中，“General Motors”和“Ford Inc.”实体与“Tesla Inc.”和“Elon Musk”实体共享了大量的上下文，而且，“Jeh Johnson”和 “Russian”也和“Donald Trump”紧密相关。注意力网络的不同相应也影响了最终的预 测结果：有知识图谱的DKN（图5–11b）预测正确了所有的测试样本，而无知识图谱的&nbsp;<span style="text-align: justify;">DKN（图5–11a）在第三条上预测错误。</span></span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;text-align: justify;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.3767560664112388" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcTJ2kaFv0sGrHITiauehyxiczzTFDRqSTCVxkULN4iaHQs2yrBIgC6zehQ/640?wx_fmt=png" data-type="png" data-w="1566" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">表5–5一个随机采样的用户的训练集和测试集（标签为0的训练样本被省略）。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.4050793650793651" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc2ZWY3qib16U6Jxw330cVDbsibsvLqKEtTVXOKGOVlW0AV8AOthXkS0Vw/640?wx_fmt=png" data-type="png" data-w="1575" style=""  /></p><p style="text-align: center;text-indent: 0em;"><span style="font-size: 15px;text-align: justify;"></span><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–11一个随机采样用户的训练集和测试集的注意力值的可视化结果。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><strong><span style="font-size: 16px;">5.6.4.4 超参数敏感性&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">在本节中我们研究 DKN 的超参数敏感性。我们首先研究了词向量的维度 d 和实体向量的维度 k 是如何影响 DKN 的性能的。我们使用了 d 和 k 在集合 {20,50,100,200} 中所有的组合做了测试，结果如图5–12a所示。我们观察到给定实体向量维度 k，DKN 的性能一开始会随着词向量的维度 d 的增长而增长，随后会下降。反之类似。我们也进一步研究了 KCNN 中的卷积核窗口大小和卷积核的数量的影响。如图5–12b所示，给定卷积核窗口大小，AUC 的指标一开始随着卷积核数目的增长而增长，这是因为更多的 卷积核可以捕获输入中更多的局部特征。然而当 m 过大时（m = 200）性能也会下降。 同样的现象也出现在卷积核窗口大小上。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.37240886347390995" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcVkxoSWnR9Ijy5eeNHIr3iciclkIrg6duXHh3fh2IBicsxneSr0QdgxHzw/640?wx_fmt=png" data-type="png" data-w="1399" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–12DKN的超参数敏感性。</span></p><p style="text-indent: 2em;"><br  /><span style="font-size: 15px;"></span></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.5 交替训练法的实验结果&nbsp;</span></strong></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;">5.6.5.1 实证研究&nbsp;</span></strong></p><p style="text-align: left;text-indent: 0em;"><strong><span style="font-size: 16px;"><br  /></span></strong></p><p style="text-indent: 2em;"><span style="font-size: 15px;">为了研究推荐系统中的物品和它们在知识图谱中对应的实体之间的关联，我们进行了一项实证研究。具体来说，我们的目标是一对物品在知识图谱中的共同邻居的数量是如何随着它们在推荐系统中的共同评分者的数量的变化而变化的。为此，我们首先从 MovieLens-1M 中随机选择了 100 万对物品。然后，基于每一对物品在推荐系统中的共同评分者的数量，我们将其分成了 5 类，然后统计每一类中的物品对在知识图谱中对应的实体的共同邻居的平均值。结果如图5–13a所示，我们可以清楚地看出，如果两个物品在推荐系统中有更多的共同评分者，那么他们可能在知识图谱中共享更多的邻居。 图5–13b从另一个方向展示了两者的正相关性。以上发现经验性地证实了推荐系统中的物品和知识图谱中的实体共享了相似的邻近结构，因此，两者之间的知识迁移有利于提供 MKR 中两个任务的表现。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.33499643620812547" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc3zYV6rQGpsuThPIMVfJyCvTs5PHYdw8N7545icPHndBRicC0DoXxic1dg/640?wx_fmt=png" data-type="png" data-w="1403" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–13 MovieLens-1M 数据集中，一对物品在知识图谱中的共同邻居的数量和它们在推荐系统中的共同评分者的数量的关联。</span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 0em;"><span style="font-size: 16px;"><strong>5.6.5.2 与基准方法的比较&nbsp;</strong></span></p><p style="text-align: left;text-indent: 0em;"><br  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;">CTR 预测场景和 top-K 推荐场景中的所有方法的结果分别如表5–6和图5–14所示。 我们有如下的观察：（1）PER 在电影和图书推荐上的表现比较差，因为预定义的元路径 （meta-path）很难达到最优。另外，PER 无法应用到新闻推荐中。（2）和其它基准方法相 比，DKN在新闻推荐中表现最好，但是DKN在电影和图书推荐中表现最差。这是因为电影和图书名称通常非常短，很难提供有用的文本信息。（3）MKR 在三个数据集上都 取得了最好的表现。具体来说，MKR 在电影、图书和新闻推荐中分别超越了基准方法 2.0%至39.8%、3.2%至18.2%、3.3%至24.6%的 AUC 分值。</span></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.6373205741626794" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcpmV2ycibmjwD3FdajyUPOGricXZeicQBdjfh6w5EgraMzUvpxeT8AaaVw/640?wx_fmt=png" data-type="png" data-w="1045" style="width: 476px;height: 303px;"  /></p><p style="text-align: left;text-indent: 2em;"><span style="font-size: 15px;"></span></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">表5–6 CTR 预测场景中MKR和基准方法的 AUC 和 Accuracy 的结果。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.29839704069050554" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWclAdrRgpFOHA9g8ibwfPP2fCGksCA01dBKQ9gAoiaqbBwMS48icqLGYicwg/640?wx_fmt=png" data-type="png" data-w="1622" style=""  /></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–14 top-K 推荐场景中 MKR 和基准方法的 F1@K 的结果。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><strong><span style="font-size: 16px;">5.6.5.3 与 MKR 变种的比较&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们进一步比较了 MKR 及其三个变种来展现交叉压缩单元的效果：MKR-1L 是指只有 1 层交叉压缩单元的 MKR，他对应了命题5.2中的分解机模型；MKR-DCN 是基于公式（5–34）的变种，它对应了 DCN 模型；MKR-stitch 是 MKR 另一个对应了十字绣网络的变种，其中公式（5–35）中的转移权重被替换了四个可训练的标量。从表5–6中我们可以看出，MKR 的表现超越了 MKR-1L 和 MKR-DCN，这说明模拟物品和实体特征的高阶交互有利于提高 MKR 的性能。MKR 也超越了 MKR-stitch，这说明了细粒度地控制知识迁移比简单的十字绣单元更有效。</span></p><p><br  /></p><p><strong><span style="font-size: 16px;">5.6.5.4 知识图谱特征学习端的表现&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">尽管 MKR 的目标是使用知识图谱辅助推荐系统，一个有趣的问题是推荐系统是否反过来有利于知识图谱特征学习，因为多任务学习的核心是使用共享信息提升所有任务的性能[167]。我们在表5–7中展示了知识图谱特征学习任务中的预测尾节点和真实尾节点的 RMSE（均方根误差）。幸运的是，我们发现推荐系统模块的存在确实降低了 5.3% ∼ 6.4% 的预测误差率。这个结果表明，交叉压缩单元可以学到通用的共享特征，使得 MKR 的两端同时受益。</span></p><p><br  /></p><p style="text-align: center;"><img class="" data-ratio="0.40654205607476634" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcY4YRl68jcc8V2w405vR8hAPveInSib1V1VakdiaNf7CJHAIvbDFqSOPg/640?wx_fmt=png" data-type="png" data-w="856" style="width: 352px;height: 143px;"  /></p><p style="text-align: center;"><span style="font-size: 12px;">表5–7 MKR 中知识图谱特征学习任务上的三个数据集的 RMSE 的结果。“KGE”的意思是只有知识图谱特征学习模块被训练，“KGE+RS”的意思是知识图谱特征学习模块和推荐系统模块同时被训练。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><strong><span style="font-size: 16px;">5.6.5.5 知识图谱大小的影响&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们变化了知识图谱的大小来进一步研究知识图谱的使用效果。图5–15a展示了 Bing-News 数据集上的 AUC 的结果。具体来说，当知识图谱的比率从0.1提升到1.0时， AUC 和 Accuracy 指标被分别提升了 13.6% 和 11.8%。这是因为 Bing-News 数据集非常稀疏，使得知识图谱的使用非常有效。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.34154040404040403" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWc0DOa0Kzqs5VU9gVicYI1FoNRQYDsDOSp9MkcusUlSeiaA8CO1N2qjHSw/640?wx_fmt=png" data-type="png" data-w="1584" style=""  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;"></span></p><p style="text-align: center;"><span style="font-size: 12px;color: rgb(136, 136, 136);">图5–15MKR的超参数敏感性。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><strong><span style="font-size: 16px;">5.6.5.6 知识图谱特征学习模块的训练频率的影响&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">我们将 t 从 1 变化到 10 来研究知识图谱特征学习模块的训练频率的影响，结果如图5–15b所示。我们观察到 MKR 在 t = 5时表现最佳。这是因为一个更高的训练频率会使得知识图谱特征学习模块误导了 MKR 的推荐目标，而一个很低的训练频率会让推荐系统无法充分地利用来自知识图谱迁移过来的知识。</span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><p><strong><span style="font-size: 16px;">5.7 本章小结&nbsp;</span></strong></p><p><br  /></p><p style="text-indent: 2em;"><span style="font-size: 15px;">本章研究了知识图谱辅助的推荐系统中的基于特征的方法。我们将知识图谱特征学习和推荐系统视为两个任务，并按照它们训练设置的不同，提出了两种方法：依次训练法和交替训练法：&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">（1）依次训练法首先使用知识图谱特征学习方法得到实体向量，然后在后续的推荐算法中使用这些实体向量。我们提出了 DKN ，一种依次训练法的代表。DKN 是一个用于新闻推荐的知识图谱感知的深度神经网络。DKN 的主要结构包括 KCNN 和注意力网络：KCNN 用来从语义层面和知识层面联合学习新闻标题的特征，KCNN 中的多个通道和对齐设置使得它可以很好地结合来自异构源的信息。注意力网络用来建模用户多样化的历史记录对当前候选新闻的不同影响，注意力网络在计算用户特征时对其历史记录进行了动态加权聚合。&nbsp;</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;">（2）交替训练法将知识图谱特征学习和推荐系统视为两个相关的任务，并设计了一种多任务学习框架，交替优化二者的目标函数。我们提出了 MKR，一种交替学习法的代表。MKR 是一个深度端到端多任务学习网络，包含了推荐系统模块和知识图谱特征学习模块。两个模块都使用了多个非线性层来提取输入的隐含特征和模拟交互行为。由于这两个任务并非独立，而是由推荐系统中的物品和知识图谱中的实体相连接，我们设计了一个交叉压缩单元来关联这两个任务。交叉压缩单元可以自动学习物品和实体特征的高阶交互并控制任务间的知识迁移。我们通过理论和实验证明了交叉压缩单元的优越性。</span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-indent: 2em;"><span style="font-size: 15px;"><br  /></span></p><p style="text-align: left;text-indent: 2em;"><br  /></p><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;word-wrap: break-word !important;"><strong style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 16px;box-sizing: border-box !important;word-wrap: break-word !important;">第5章参考文献</span></strong></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;">（文中提及的部分参考文献在01#02#）</span></p><p style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;background-color: rgb(255, 255, 255);text-align: left;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="max-width: 100%;font-size: 14px;color: rgb(136, 136, 136);box-sizing: border-box !important;word-wrap: break-word !important;"><br  /></span></p><p style="text-align: center;"><img class="" data-ratio="0.7827903091060986" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcqUiacCPgvmKI2Ne4YDXzPLMFG0hJTIzfvsjicTQnzH9WKsrBzxByOlfw/640?wx_fmt=png" data-type="png" data-w="1197" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.47225725094577553" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcXcJa9GOGWuSR9HJ3D5Dvibu4DhxEs8mGibwfLmWYMnM6U2INlEdxHAQA/640?wx_fmt=png" data-type="png" data-w="1586" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.5267463813719321" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcuP4z7vq070tNbxHtkMEN2xUAACYr8ibvzCd1FbbItQhvcJyQd097XQQ/640?wx_fmt=png" data-type="png" data-w="1589" style="text-align: center;white-space: normal;"  /></p><p style="text-align: center;"><img class="" data-ratio="0.6123348017621145" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcTVWQ4rpXZ2KmZCzjEz2oGYlvzbZ8PPp8aibW7vPuAI2I5MzWGkSWkfw/640?wx_fmt=png" data-type="png" data-w="1589" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.11667723525681674" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcNN48kg4ol0AiaWmlcH2UqJQCxfzAjJKRQ5MmGFnRoOibQ5z9jjRqunxg/640?wx_fmt=png" data-type="png" data-w="1577" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.6047979797979798" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcUiaTJOO9JxXRS4Wj0rYkbQSHmWYz7qavhyLLo4IFMv9tL2k8StSXcxQ/640?wx_fmt=png" data-type="png" data-w="1584" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.6152874289324068" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcdYKWyFQfJAx3BB6qdTmVgiaGsYeWaXJhTusehxsomWuwB51FOxNLkiaQ/640?wx_fmt=png" data-type="png" data-w="1583" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.11482649842271293" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcaREyWvLJpolD6qhicl7uOo3yO9ic9D8c7o8cdrSHGw9Qjo7GDMFBibdibw/640?wx_fmt=png" data-type="png" data-w="1585" style=""  /></p><p style="text-align: center;"><img class="" data-ratio="0.1614868982327849" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcprxgvkn18cEBzocByZKMiaKHwAeicLjxyyG5KWzNGDLyia2Yquz03wM0g/640?wx_fmt=png" data-type="png" data-w="1641" style=""  /></p><p style="text-align: center;"><br  /></p><p style="text-align: center;"><br  /></p><p style="text-align: center;"><br  /></p><hr style="border-style: solid;border-width: 1px 0 0;border-color: rgba(0,0,0,0.1);-webkit-transform-origin: 0 0;-webkit-transform: scale(1, 0.5);transform-origin: 0 0;transform: scale(1, 0.5);"  /><p class="" style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;font-size: 16px;color: rgb(62, 62, 62);background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;">了解更多信息请点击知识工场网站主页：http://kw.fudan.edu.cn/</span><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"  /></p><p class="" style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;font-size: 16px;color: rgb(62, 62, 62);background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><br style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"  /></p><p class="" style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;font-size: 16px;color: rgb(62, 62, 62);background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;">合作意向、反馈建议请联系我们：</span></p><p class="" style="max-width: 100%;min-height: 1em;letter-spacing: 0.544px;white-space: normal;font-size: 16px;color: rgb(62, 62, 62);background-color: rgb(255, 255, 255);box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;"><span style="max-width: 100%;font-size: 18px;box-sizing: border-box !important;word-wrap: break-word !important;overflow-wrap: break-word !important;">info.knowledgeworks@gmail.com</span></p><p style="text-align: center;"><img class="" data-copyright="0" data-ratio="0.9493087557603687" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRwUR5ZjN1QZF7EQ1rzcYpeMLyohjzh6cGtL6XAjxUBAeibg2aBViawe40T3F19LDuWTBhibfMibEneuRw/640?wx_fmt=png" data-type="png" data-w="217" style=""  /></p><p style="text-align: left;text-indent: 2em;"><br  /></p>
                </div>
                <script nonce="248925490" type="text/javascript">
                    var first_sceen__time = (+new Date());

                    if ("" == 1 && document.getElementById('js_content')) {
                        document.getElementById('js_content').addEventListener("selectstart",function(e){ e.preventDefault(); });
                    }

                    
                    (function(){
                        if (navigator.userAgent.indexOf("WindowsWechat") != -1){
                            var link = document.createElement('link');
                            var head = document.getElementsByTagName('head')[0];
                            link.rel = 'stylesheet';
                            link.type = 'text/css';
                            link.href = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/winwx435ee6.css";
                            head.appendChild(link);
                        }
                    })();
                </script>

                
                <div class="ct_mpda_wrp" id="js_sponsor_ad_area" style="display:none;"></div>
                
                
                <div class="read-more__area" id="js_more_read_area" style="display:none;">
                    
                </div>

                
                                <div class="reward_area tc reward_area_primary" id="js_preview_reward_author" style="display:none;">
                    <div class="reward-avatar" style="display: none;" id="js_preview_reward_author_avatar">
                        <img src="" alt="" id="js_preview_reward_author_head">
                    </div>
                    
                                        <div class="reward-author" id="js_preview_reward_author_name">王鸿伟</div>
                                        <p class="reward_tips" id="js_preview_reward_author_wording" style="display:none;"></p>
                    <p>
                        <a class="reward_button" id='js_preview_reward_author_link' href="##"><span id="js_preview_reward_link_text">赞赏</span></a>
                    </p>
                </div>

                <div class="reward_qrcode_area reward_area tc" id="js_preview_reward_qrcode" style="display:none;">
                    <p class="tips_global">长按二维码向我转账</p>
                    <p id="js_preview_reward_ios_wording" class="reward_tips" style="display:none;"></p>
                    <span class="reward_qrcode_img_wrp"><img class="reward_qrcode_img" src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_reward_qrcode.2x42f400.png"></span>
                    <p class="tips_global">受苹果公司新规定影响，微信 iOS 版的赞赏功能被关闭，可通过二维码转账支持公众号。</p>
                </div>
                                
                
                            </div>
                                    
                        


                        
            <ul id="js_hotspot_area" class="article_extend_area"></ul>


            

            


<div class="rich_media_tool" id="js_toobar3">

        <div id="js_read_area3" class="media_tool_meta tips_global_primary meta_primary" style="display:none;">阅读 <span id="readNum3"></span></div>

    <span style="display:none;" class="media_tool_meta meta_extra meta_praise" id="like_old">
        <i class="icon_praise_gray"></i><span class="praise_num" id="likeNum_old"></span>
    </span>

    <span style="display:none;" class="media_tool_meta meta_extra meta_like" id="like3">
        <button class="like_btn" id="js_like_btn"> 
          <span id="js_like_wording"> 好看</span><span class="like_num" id="likeNum3"></span>
        </button>
    </span>

    <div id="js_like_educate" style="display:none">
        <div class="weui-mask"></div>
        <div class="weui-dialog weui-dialog_haokan">
        <div class="weui-dialog__hd"><strong class="weui-dialog__title" id="educate_title">已推荐到看一看</strong></div>
        <div class="weui-dialog__bd">
          <img class="pic_haokan" src="//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_haokan42f400.png">
            你的朋友可以在“发现”-“看一看”看到你认为好看的文章。        </div>
        <div class="weui-dialog__ft" id="educate_btn" style="display: none">
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default" id="js_cancel">取消</a>
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_confirm">推荐</a>
        </div>
        <div class="weui-dialog__ft" id="educate_btn2" style="display: none">
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_acknowledge">我知道了</a>
        </div>
        </div>
    </div>

    <div id="js_unlike_educate" style="display:none">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
        
        <div class="weui-dialog__bd">
            已取消，“好看”想法已同步删除        </div>
        <div class="weui-dialog__ft">
          <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_unlike_know">知道了</a>
        </div>
        </div>
    </div>

    
    </div>


<div class="like_comment_wrp" id="js_a_like_comment" style="display: none;">
  <div class="like_comment_inner">
    <div class="like_comment_hd" style="display:none" id="js_like_title"></div>
    <div class="like_comment_bd">
      <div class="tips_global_primary like_comment_tips">
        <i class="weui-icon-success"></i>已推荐到看一看<a href="javascript:;" class="like_comment_share_link" id="js_a_like_comment_share">和朋友分享想法</a>
      </div>
    </div>
    <div class="like_comment_ft">
      <span id="js_a_like_comment_msg" class="like_comment_msg" style="visibility:hidden">最多200字，当前共<span id="js_a_like_current_cnt"></span>字</span>
      <button class="like_comment_btn" disabled="disabled" id="js_a_like_confirm">发送</button>
    </div>
  </div>
</div>

<div id="js_like_toast" style="display: none;">
  <div class="weui-mask_transparent"></div>
  <div class="weui-toast">
    <i class="weui-icon-success-no-circle weui-icon_toast"></i>
    <p class="weui-toast__content" id="js_toast_msg">已发送</p>
  </div>
</div>


<div style="display: none;" id="js_b_comment_panel" class="like_comment_primary_pop">
  <div class="like_comment_primary_wrp" id="js_b_wrp">
    <div class="like_comment_primary_inner">
      <div class="like_comment_primary_hd">
        <h4 class="like_comment_primary_title">
          朋友将在看一看看到        </h4>
        <button id="js_b_like_confirm" class="like_comment_primary_btn">确定</button>
      </div>
      <div id='js_b_comment_text_first' class="like_comment_primary_bd">
        <span class="tips_global_primary">
          分享你的想法...        </span>
      </div>
    </div>
  </div>
  <div class="like_comment_primary_mask" id="js_mask_1"></div>
</div>

<div style="display: none;" id="js_b_comment_final">
  <div class="like_comment_primary_wrp editing" id="js_comment_wrp">
    <div class="like_comment_primary_inner">
      <div class="like_comment_primary_hd">
        <button class="like_comment_primary_cancel" id="js_b_comment_cancel">取消</button>
        <h4 class="like_comment_primary_title"> 分享想法到看一看 </h4>
        <button class="like_comment_primary_btn" id="js_b_comment_confirm">确定</button>
      </div>
      <div class="like_comment_primary_bd">
        <textarea class="like_comment_textarea weui-textarea" placeholder="分享你的想法..." id="js_b_comment_text_second"></textarea>
      </div>
      <span class="like_comment_msg" id="js_b_like_comment_msg" style="visibility: hidden;">最多200字，当前共<span id="js_b_like_current_cnt"></span>字</span>
    </div>
  </div>
  <div class="like_comment_primary_mask" id="js_mask_2"></div>
</div>

<div id="js_loading" style=" display: none;">
    <div class="weui-mask_transparent"></div>
    <div class="weui-toast">
        <i class="weui-loading weui-icon_toast"></i>
        <p class="weui-toast__content">发送中</p>
    </div>
</div>

<div id="js_fail" style="display:none">
    <div class="weui-mask"></div>
    <div class="weui-dialog">
    <div class="weui-dialog__bd">
        网络异常，请稍后重试    </div>
    <div class="weui-dialog__ft">
      <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary" id="js_fail_inform">知道了</a>
    </div>
    </div>
</div>



                      </div>
        </div>

        <div class="rich_media_area_primary sougou" id="sg_tj" style="display:none"></div>


        
        <div class="rich_media_area_extra">
          <div class="rich_media_area_extra_inner">
              
              <div id="js_share_appmsg">
              </div>

              
                            <div class="mpda_bottom_container" id="js_bottom_ad_area"></div>
                            
              <div id="js_iframetest" style="display:none;"></div>
                            
              <div class="rich_media_extra rich_media_extra_discuss" id="js_cmt_container" style="display:none">
                

                
                <div class="discuss_mod" id="js_friend_cmt_area" style="display:none">
                  
                  
                  
                </div>

                                <div class="discuss_mod" id="js_cmt_area" style="display:none">
                </div>
                              </div>
          </div>
        </div>

        
        <div id="js_pc_qr_code" class="qr_code_pc_outer" style="display:none;">
            <div class="qr_code_pc_inner">
                <div class="qr_code_pc">
                    <img id="js_pc_qr_code_img" class="qr_code_pc_img">
                    <p>微信扫一扫<br>关注该公众号</p>
                </div>
            </div>
        </div>
    </div>
</div>



<div id="js_pc_weapp_code" class="weui-desktop-popover weui-desktop-popover_pos-up-center weui-desktop-popover_img-text" style="display: none;">
    <div class="weui-desktop-popover__content">
        <div class="weui-desktop-popover__desc">
            <img id="js_pc_weapp_code_img">
            微信扫一扫<br>使用小程序<span id="js_pc_weapp_code_des"></span>        </div>
    </div>
</div>
<div id="js_minipro_dialog" style="display:none;">
    <div class="weui-mask"></div>
    <div class="weui-dialog">
        <div class="weui-dialog__bd">即将打开"<span id="js_minipro_dialog_name"></span>"小程序</div>
        <div class="weui-dialog__ft">
            <a id="js_minipro_dialog_cancel" href="javascript:void(0);" class="weui-dialog__btn weui-dialog__btn_default">取消</a>
            <a id="js_minipro_dialog_ok" href="javascript:void(0);" class="weui-dialog__btn weui-dialog__btn_primary">打开</a>
        </div>
    </div>
</div>

        
        <script nonce="248925490">
    var __DEBUGINFO = {
        debug_js : "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/debug/console42f400.js",
        safe_js : "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/safe/moonsafe42f400.js",
        res_list: []
    };
</script>

<script nonce="248925490" type="text/javascript">
(function() {
	var totalCount = 0,
			finishCount = 0;

	function _loadVConsolePlugin() {
		window.vConsole = new window.VConsole();
		while (window.vConsolePlugins.length > 0) {
			var p = window.vConsolePlugins.shift();
			window.vConsole.addPlugin(p);
		}
	}
	
	function _addVConsole(uri, cb) {
		totalCount++;
		var node = document.createElement('SCRIPT');
		node.type = 'text/javascript';
		node.src = uri;
		node.setAttribute('nonce', '248925490');
		if (cb) {
			node.onload = cb;
		}
		document.getElementsByTagName('head')[0].appendChild(node);
	}
	if (
		(document.cookie && document.cookie.indexOf('vconsole_open=1') > -1)
		|| location.href.indexOf('vconsole=1') > -1
	) {
		window.vConsolePlugins = [];
		_addVConsole('//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.2.2/vconsole.min43429b.js', function() {
			
			_addVConsole('//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/plugin/vconsole-mpopt/1.0.1/vconsole-mpopt42f400.js', _loadVConsolePlugin);
		});
	}
})();
</script>
        
<script nonce="248925490" type="text/javascript">
if (location.href.match(/fontScale=\d+/) && /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {

    var m=location.href.match(/fontScale=(\d*)/);
    var map={
        "94":1,
        "100":2,
        "109":3,
        "119":4,
        "131":5,
    }
    if(m&&m[1]&&map[m[1]]){
        document.getElementsByTagName("body")[0].className+=" appmsg_skin_fontscale_"+map[m[1]];
        console.log("appmsg_skin_fontscale_:"+map[m[1]]);
    }
}


(function(){
    if (window.__second_open__) return; 

    

    var first_js_time = +new Date();

    var showDate="";
    var svrDate=new Date("1549780428"*1000);
    var createDate=new Date("1548299620"*1000);
    var ct="1548299620"*1;
    var publish_time = "2019-01-24" || "";
    var cD={
      year:createDate.getYear(),
      month:createDate.getMonth()+1,
      date:createDate.getDate()
    };
    
    svrDate.setHours(0);
    svrDate.setMinutes(0);
    svrDate.setSeconds(0);
    var todayDate=svrDate.getTime()/1000;
    svrDate.setDate(1);
    svrDate.setMonth(0);
    var yearDate=svrDate.getTime()/1000;
    
    if(ct>=todayDate){
      showDate="今天";
    
    }else if(ct>=todayDate-60*60*24){
       showDate="昨天";
    
    }else if(ct>=todayDate-2*60*60*24){
      showDate="前天";
    }else if(ct>=todayDate-3*60*60*24){
      showDate="3天前";
    }else if(ct>=todayDate-4*60*60*24){
      showDate="4天前";
    }else if(ct>=todayDate-5*60*60*24){
      showDate="5天前";
    }else if(ct>=todayDate-6*60*60*24){
      showDate="6天前";
    }else if(ct>=todayDate-2*7*60*60*24){
      showDate="1周前";
    }else if(ct>=yearDate){
      
      
      
      showDate="%s月%s日".replace("%s",cD.month).replace("%s",cD.date);
    }else{
      showDate=publish_time;
    };
    if(document.getElementById("publish_time")){
      document.getElementById("publish_time").innerText=showDate;
    }
})();
</script>
<script nonce="248925490" type="text/javascript">

if (!window.console) window.console = { log: function() {} };

if (typeof getComputedStyle == 'undefined') {
    if (document.body.currentStyle) {
        window.getComputedStyle = function(el) {
            return el.currentStyle;
        }
    } else {
        window.getComputedStyle = {};
    }
}
(function(){
    window.__zoom = 1;
    
    (function(){
        var validArr = ","+([0.875, 1, 1.125, 1.25, 1.375]).join(",")+",";
        var match = window.location.href.match(/winzoom=(\d+(?:\.\d+)?)/);
        if (match && match[1]) {
            var winzoom = parseFloat(match[1]);
            if (validArr.indexOf(","+winzoom+",")>=0) {
                window.__zoom = winzoom;
            }
        }
    })();

    var ua = navigator.userAgent.toLowerCase();
    var re = new RegExp("msie ([0-9]+[\.0-9]*)");
    var version;
    if (re.exec(ua) != null) {
        version = parseInt(RegExp.$1);
    }
    var isIE = false;
    if (typeof version != 'undefined' && version >= 6 && version <= 9) {
        isIE = true;
    }
    var getMaxWith=function(){
        var container = document.getElementById('img-content');
        var max_width = container.offsetWidth;
        var container_padding = 0;
        var container_style = getComputedStyle(container);
        container_padding = parseFloat(container_style.paddingLeft) + parseFloat(container_style.paddingRight);
        max_width -= container_padding;
        if (!max_width) {
            max_width = window.innerWidth - 30;      
        }
        return max_width;
    };
    var getParentWidth = function(dom){
        var parent_width = 0;
        var parent = dom.parentNode;
        var outerWidth = 0;
        while (true) {
            if(!parent||parent.nodeType!=1) break;
            var parent_style = getComputedStyle(parent);
            if (!parent_style) break;
            parent_width = parent.clientWidth - parseFloat(parent_style.paddingLeft) - parseFloat(parent_style.paddingRight) - outerWidth;
            if (parent_width > 0) break;
            outerWidth += parseFloat(parent_style.paddingLeft) + parseFloat(parent_style.paddingRight) + parseFloat(parent_style.marginLeft) + parseFloat(parent_style.marginRight) + parseFloat(parent_style.borderLeftWidth) + parseFloat(parent_style.borderRightWidth);
            parent = parent.parentNode;
        }
        return parent_width;
    }
    var getOuterW=function(dom){
        var style=getComputedStyle(dom),
            w=0;
        if(!!style){
            w = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight) + parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth);
        }
        return w;
    };
    var getOuterH =function(dom){
        var style=getComputedStyle(dom),
            h=0;
        if(!!style){
            h = parseFloat(style.paddingTop) + parseFloat(style.paddingBottom) + parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);
        }
        return h;
    };
    var insertAfter = function(dom,afterDom){
        var _p = afterDom.parentNode;
        if(!_p){
            return;
        }
        if(_p.lastChild === afterDom){
            _p.appendChild(dom);
        }else{
            _p.insertBefore(dom,afterDom.nextSibling);
        }
    };
    var getQuery = function(name,url){
        
        var u  = arguments[1] || window.location.search,
            reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)"),
            r = u.substr(u.indexOf("\?")+1).match(reg);
        return r!=null?r[2]:"";
    };

    
    function setImgSize(item, widthNum, widthUnit, ratio, breakParentWidth) {
        setTimeout(function () {
            var img_padding_border = getOuterW(item) || 0;
            var img_padding_border_top_bottom = getOuterH(item) || 0;
            
            if (widthNum > getParentWidth(item) && !breakParentWidth) {
                widthNum = getParentWidth(item);
            }

            height = (widthNum - img_padding_border) * ratio + img_padding_border_top_bottom;

            if (isIE) {
                var url = item.getAttribute('data-src');
                item.src = url;
            } else {
                if(parseFloat(widthNum, 10) > 40 && height > 40 && breakParentWidth) {
                    item.className += ' img_loading';
                }
                item.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==";
            }
            item.style.cssText += ";width: " + widthNum + widthUnit + " !important;";
            item.style.cssText += ";height: " + height + widthUnit + " !important;";
        }, 10);
    }

    (function(){
        var images = document.getElementsByTagName('img');
        var length = images.length;
        var max_width = getMaxWith();
        for (var i = 0; i < length; ++i) {
            if (window.__second_open__ && images[i].getAttribute('__sec_open_place_holder__')) {
                continue;
            }
            var imageItem = images[i];
            var src_ = imageItem.getAttribute('data-src');
            var realSrc = imageItem.getAttribute('src');
            if (!src_ || realSrc) continue;
            
            var originWidth = imageItem.getAttribute('data-w');
            var ratio_ = 1 * imageItem.getAttribute('data-ratio');

            var height = 100;
            if (ratio_ && ratio_ > 0) {
                var parent_width = getParentWidth(imageItem) || max_width;
                var initWidth = imageItem.style.width || imageItem.getAttribute('width') || originWidth || parent_width;
                initWidth = parseFloat(initWidth, 10) > max_width ? max_width : initWidth;
                
                if (initWidth) {
                    imageItem.setAttribute('_width', !isNaN(initWidth * 1) ? initWidth + 'px' : initWidth);
                }
                
                if (typeof initWidth === 'string' && initWidth.indexOf('%') !== -1) {
                    initWidth = parseFloat(initWidth.replace('%', ''), 10) / 100 * parent_width;
                }
                
                if (initWidth === 'auto') {
                    initWidth = originWidth;
                }

                var res = /^(\d+(?:\.\d+)?)([a-zA-Z%]+)?$/.exec(initWidth);
                var widthNum = res && res.length >= 2 ? res[1] : 0;
                var widthUnit = res && res.length >= 3 && res[2] ? res[2] : 'px';

                
                setImgSize(imageItem, widthNum, widthUnit, ratio_, true);
                
                (function (item, widthNumber, unit, ratio) {
                    setTimeout(function () {
                        setImgSize(item, widthNumber, unit, ratio, false);
                    });
                })(imageItem, widthNum, widthUnit, ratio_);
            } else {
                imageItem.style.cssText += ";visibility: hidden !important;";
            }

        }
    })();
    window.__videoDefaultRatio=16/9;
    window.__getVideoWh = function(dom){
        var max_width = getMaxWith(),
            width = max_width,
            ratio_ = dom.getAttribute('data-ratio')*1,
            arr = [4/3, 16/9],
            ret = arr[0],
            abs = Math.abs(ret - ratio_);
        if (!ratio_) { 
            if (dom.getAttribute("data-mpvid")) { 
                ratio_ = 16/9;
            } else { 
                ratio_ = 4/3;
            }
        } else { 
            for (var j = 1, jl = arr.length; j < jl; j++) {
                var _abs = Math.abs(arr[j] - ratio_);
                if (_abs < abs) {
                    abs = _abs;
                    ret = arr[j];
                }
            }
            ratio_ = ret;
        }
        
        var parent_width = getParentWidth(dom)||max_width,
            width = width > parent_width ? parent_width : width,
            outerW = getOuterW(dom)||0,
            outerH = getOuterH(dom)||0,
            videoW = width - outerW,
            videoH = videoW/ratio_,
            height = videoH + outerH;
        return {w:Math.ceil(width),h:Math.ceil(height),vh:videoH,vw:videoW,ratio:ratio_};
    };


    (function(){
        var iframe = document.getElementsByTagName('iframe');
        for (var i=0,il=iframe.length;i<il;i++) {
            if (window.__second_open__ && iframe[i].getAttribute('__sec_open_place_holder__')) {
                continue;
            }
            var a = iframe[i];
            var src_ = a.getAttribute('src')||a.getAttribute('data-src')||"";
            if(!/^http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/.test(src_)
                && !/^http(s)*\:\/\/mp\.weixin\.qq\.com\/mp\/readtemplate\?t=pages\/video_player_tmpl/.test(src_)
            ){
                continue;
            }
            var vid = getQuery("vid",src_);
            if(!vid){
                continue;
            }
            vid=vid.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");
            a.removeAttribute('src');
            a.style.display = "none";
            var obj = window.__getVideoWh(a),
                videoPlaceHolderSpan = document.createElement('span'),
                videoPlayerIconSpan = document.createElement('span'),
                mydiv = document.createElement('img');

            videoPlaceHolderSpan.className = "js_img_loading db";
            videoPlaceHolderSpan.setAttribute("data-vid", vid);
            

            videoPlayerIconSpan.className = 'wx_video_context db'; 
            videoPlayerIconSpan.style.display = 'none';
            videoPlayerIconSpan.innerHTML = '<span class="wx_video_thumb_primary"></span><button class="wx_video_play_btn">播放</button><span class="wx_video_mask"></span>'; 

            mydiv.className = "img_loading";

            mydiv.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==";
            
            
            videoPlaceHolderSpan.style.cssText = "width: " + obj.w + "px !important;";
            mydiv.style.cssText += ";width: " + obj.w + "px";
            videoPlaceHolderSpan.appendChild(videoPlayerIconSpan);
            videoPlaceHolderSpan.appendChild(mydiv);
            insertAfter(videoPlaceHolderSpan, a); 
            
            a.style.cssText += ";width: " + obj.w + "px !important;";
            a.setAttribute("width",obj.w);
            if(window.__zoom!=1){
                a.style.display = "block";
                videoPlaceHolderSpan.style.display = "none";
                a.setAttribute("_ratio",obj.ratio);
                a.setAttribute("_vid",vid);
            }else{
                videoPlaceHolderSpan.style.cssText += "height: " + obj.h + "px !important;";
                mydiv.style.cssText += "height: " + obj.h + "px !important;";
                a.style.cssText += "height: " + obj.h + "px !important;";
                a.setAttribute("height",obj.h);
            }
            a.setAttribute("data-vh",obj.vh);
            a.setAttribute("data-vw",obj.vw);
            if(a.getAttribute("data-mpvid")){
                a.setAttribute("data-src",location.protocol+"//mp.weixin.qq.com/mp/readtemplate?t=pages/video_player_tmpl&auto=0&vid="+vid);
            }else{
                a.setAttribute("data-src",location.protocol+"//v.qq.com/iframe/player.html?vid="+ vid + "&width="+obj.vw+"&height="+obj.vh+"&auto=0");   
            }            
        }
    })();
    
    (function(){
        if(window.__zoom!=1){
            if (!window.__second_open__) {
                document.getElementById('page-content').style.zoom = window.__zoom;
                var a = document.getElementById('activity-name');
                var b = document.getElementById('meta_content');
                if(!!a){
                    a.style.zoom = 1/window.__zoom;
                }
                if(!!b){
                    b.style.zoom = 1/window.__zoom;
                }
            }
            var images = document.getElementsByTagName('img');
            for (var i = 0,il=images.length;i<il;i++) {
                if (window.__second_open__ && images[i].getAttribute('__sec_open_place_holder__')) {
                    continue;
                }
                images[i].style.zoom = 1/window.__zoom;
            }
            var iframe = document.getElementsByTagName('iframe');
            for (var i = 0,il=iframe.length;i<il;i++) {
                if (window.__second_open__ && iframe[i].getAttribute('__sec_open_place_holder__')) {
                    continue;
                }
                var a = iframe[i];
                a.style.zoom = 1/window.__zoom;
                var src_ = a.getAttribute('data-src')||"";
                if(!/http(s)*\:\/\/v\.qq\.com\/iframe\/(preview|player)\.html\?/.test(src_)){
                    continue;
                }
                var ratio = a.getAttribute("_ratio");
                var vid = a.getAttribute("_vid");
                a.removeAttribute("_ratio");
                a.removeAttribute("_vid");
                var vw = a.offsetWidth - (getOuterW(a)||0);
                var vh = vw/ratio;
                var h = vh + (getOuterH(a)||0)
                a.style.cssText += "height: " + h + "px !important;"
                a.setAttribute("height",h);
                a.setAttribute("data-src",location.protocol+"//v.qq.com/iframe/player.html?vid="+ vid + "&width="+vw+"&height="+vh+"&auto=0");
                a.style.display = "none";
                var parent = a.parentNode;
                if(!parent){
                    continue;
                }
                for(var j=0,jl=parent.children.length;j<jl;j++){
                    var child = parent.children[j];
                    if(child.className.indexOf("img_loading")>=0 && child.getAttribute("data-vid")==vid){
                        child.style.cssText += "height: " + h + "px !important;";
                        child.style.display = "";
                    }
                }
            }
        }
    })();
})();
</script>
<script nonce="248925490" type="text/javascript">
    var new_appmsg = 1;
    var item_show_type = "0";
    var can_see_complaint = "0";
    var not_in_mm_css = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/not_in_mm435ee6.css";
    var windowwx_css = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/winwx435ee6.css";
    var article_improve_combo_css = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/combo438c19.css";
    var tid = "";
    var aid = "";
    var clientversion = "";
    var appuin = ""||"MzI0MTI1Nzk1MA==";

    var source = "";
    var ascene = "";
    var subscene = "";
    var sessionid = ""||"";
    var abtest_cookie = "";

    var scene = 75;

    var itemidx = "";
    var appmsg_token   = "";
    var _copyright_stat = "1";
    var _ori_article_type = "科技互联网";

    var is_follow = "";
    var nickname = "知识工场";
    var appmsg_type = "9";
    var ct = "1548299620";
    var publish_time = "2019-01-24" || "";
    var user_name = "gh_f73c3cc99a10";
    var user_name_new = "";
    var fakeid   = "";
    var version   = "";
    var is_limit_user   = "0";
    var round_head_img = "http://mmbiz.qpic.cn/mmbiz_png/GylibWq3RaRyrpbs1iaib5uHc0g5rAz90B8W4syiaRtyZuSd6vfic8p7ujYoWLPTeAGSm0zJDbWDVXnxyAFXhFico38A/0?wx_fmt=png";
    var hd_head_img = "http://wx.qlogo.cn/mmhead/Q3auHgzwzM4FamynaD6EHUSdeanr8ZTseeBeEamc0KucGcZ7uEEqtQ/0"||"";
    var ori_head_img_url = "http://wx.qlogo.cn/mmhead/Q3auHgzwzM4FamynaD6EHUSdeanr8ZTseeBeEamc0KucGcZ7uEEqtQ/132";
    var msg_title = "硕博论文 | 基于网络特征学习的个性化推荐系统 03#";
    var msg_desc = "在推荐系统中，除了用户-物品交互图和用户端的社交网络之外，物品端也可能会存在一种特殊的网络结构，叫做知识图谱（knowledge graph）。例如，在电影推荐中，电影本身就是知识图谱中的一个实体，";
    var msg_cdn_url = "http://mmbiz.qpic.cn/mmbiz_jpg/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcVUpxJxiahZF23f7kCc7DEmTdkhDreBSpLXHmmkCnH4RvJ30VHnKqXeQ/0?wx_fmt=jpeg"; 
    var cdn_url_1_1  = "https://mmbiz.qlogo.cn/mmbiz_jpg/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcUIfBfeKLcuqef1Z29z13vIRVicHhGzbPsHwrNJVRkssPGfOfdibtKjuw/0?wx_fmt=jpeg"; 
    var cdn_url_235_1 = "https://mmbiz.qlogo.cn/mmbiz_jpg/GylibWq3RaRzCwvr2LHHqlZmia9akicFpWcVUpxJxiahZF23f7kCc7DEmTdkhDreBSpLXHmmkCnH4RvJ30VHnKqXeQ/0?wx_fmt=jpeg"; 
    
    var msg_link = "http://mp.weixin.qq.com/s?__biz=MzI0MTI1Nzk1MA==&amp;mid=2651677541&amp;idx=1&amp;sn=af7247a0194b3939f70a688988e5dd3f&amp;chksm=f2f79fd4c58016c28ae074b4906b838ecd92debaa9fff8d97d343413c06982a9483b1f56e114#rd"; 
    var user_uin = "0"*1;
    var msg_source_url = '';
    var img_format = 'jpeg';
    var srcid = '';
    var req_id = '1014ccZrCmUv6ZaPDMESEbt1';
    var networkType;
    var appmsgid = '' || ''|| "2651677541";
    var comment_id = "649401569087291392" || "649401569087291392" * 1;
    var comment_enabled = "" * 1;
    var is_need_reward = "0" * 1;
    var is_https_res = ("" * 1) && (location.protocol == "https:");
    var msg_daily_idx = "1" || "";
    var profileReportInfo = "" || "";

    var devicetype = "";
    var source_encode_biz = "";
    var source_username = "";
    
    var reprint_ticket = "";
    var source_mid = "";
    var source_idx = "";
    var source_biz = "";
    var author_id = "";

    
    var optimizing_flag = "0" * 1;
    var ad_abtest_padding = "0" * 1;

    var show_comment = "";
    var __appmsgCgiData = {
        wxa_product : ""*1,
        wxa_cps : ""*1,
        show_msg_voice: "0"*1,
        can_use_page : "0"*1,
        is_wxg_stuff_uin : "0"*1,
        card_pos : "",
        copyright_stat : "1",
        source_biz : "",
        hd_head_img : "http://wx.qlogo.cn/mmhead/Q3auHgzwzM4FamynaD6EHUSdeanr8ZTseeBeEamc0KucGcZ7uEEqtQ/0"||(window.location.protocol+"//"+window.location.host + "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/appmsg/pic_rumor_link.2x42f400.jpg")
    };
    var _empty_v = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/pic/pages/voice/empty42f400.mp3";

    var copyright_stat = "1" * 1;

    var pay_fee = "" * 1;
    var pay_timestamp = "";
    var need_pay = "" * 1;

    var need_report_cost = "0" * 1;
    var use_tx_video_player = "0" * 1;
    var appmsg_fe_filter = "contenteditable";

    var friend_read_source = "" || "";
    var friend_read_version = "" || "";
    var friend_read_class_id = "" || "";

    var is_only_read = "1" * 1;
    var read_num = "" * 1;
    var like_num = "" * 1;
    var liked = "" == 'true' ? true : false;
    var is_temp_url = "" ? 1 : 0;
    var send_time = "";
    var icon_emotion_switch = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/emotion/icon_emotion_switch.2x42f400.png";
    var icon_emotion_switch_active = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/emotion/icon_emotion_switch_active.2x42f400.png";
    var icon_loading_white = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/common/icon_loading_white42f400.gif";
    var icon_audio_unread = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/audio/icon_audio_unread42f400.png";
    var icon_qqmusic_default = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/qqmusic/icon_qqmusic_default.2x42f400.png";
    var icon_qqmusic_source = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/qqmusic/icon_qqmusic_source42f400.png";
    var icon_kugou_source = "//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/kugou/icon_kugou_source42f400.png";

    var topic_default_img = '//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg/topic/pic_book_thumb.2x42f400.png';
    var comment_edit_icon = '//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/appmsg_new/icon_edit42f400.png';
    var comment_loading_img = '//res.wx.qq.com/mmbizwap/zh_CN/htmledition/images/icon/common/icon_loading_white42f400.gif';

    var voice_in_appmsg = {
        "1":"1"
            };

    var reprint_style = ''*1;
    var wxa_img_alert = "" != 'false';

    
    var more_read_type = '0'*1;

    
    
    
    

    
    var weapp_sn_arr_json = "" || "";

    
    var ban_scene = "0" * 1;

    var svr_time = "1549780428" * 1;
    
    var is_transfer_msg = ""*1||0;

    var malicious_title_reason_id = "0" * 1; 
    var malicious_content_type = "0" * 1; 

    
    var modify_time = "";

    
    var isprofileblock = "0";

    
    var hotspotInfoList = [
                    ];

        window.wxtoken = "777";
        
    
    
    
    
    window.is_login = '0' * 1; 

    window.__moon_initcallback = function(){
        if(!!window.__initCatch){
            window.__initCatch({
                idkey : 27611+2,
                startKey : 0,
                limit : 128,
                badjsId: 43,
                reportOpt : {
                    uin : uin,
                    biz : biz,
                    mid : mid,
                    idx : idx,
                    sn  : sn
                },
                extInfo : {
                    network_rate : 0.01,    
                    badjs_rate: 0.1 
                }
            });
        }
    }
        
    var title ="知识工场";

    var is_new_msg=true;
    
    

    var is_wash = '' * 1;
</script>

<script nonce="248925490" type="text/javascript">
(function(_g){
    _g.appmsg_like_type = "2" * 1 ? "2" * 1 : 1;
    
    _g.clientversion = "";
    _g.passparam = ""; 
    if(!_g.msg_link) {
      _g.msg_link = "http://mp.weixin.qq.com/s?__biz=MzI0MTI1Nzk1MA==&amp;mid=2651677541&amp;idx=1&amp;sn=af7247a0194b3939f70a688988e5dd3f&amp;chksm=f2f79fd4c58016c28ae074b4906b838ecd92debaa9fff8d97d343413c06982a9483b1f56e114#rd";
    }
    _g.appmsg_type = "9"; 
    _g.devicetype = ""; 
})(window);

</script>


        <script nonce="248925490">window.__moon_host = 'res.wx.qq.com';window.__moon_mainjs = 'appmsg/index.js';window.moon_map = {"a/appdialog_confirm.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/appdialog_confirm.html42f400.js","widget/wx_profile_dialog_primary.css":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/widget/wx_profile_dialog_primary.css42f400.js","pages/iframe_communicate.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/iframe_communicate42f400.js","new_video/player.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/new_video/player.html433882.js","biz_wap/zepto/touch.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/zepto/touch42f400.js","biz_wap/zepto/event.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/zepto/event42f400.js","biz_wap/zepto/zepto.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/zepto/zepto42f400.js","page/pages/video.css":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/pages/video.css435ee6.js","a/tpl/smallbanner_msg_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/smallbanner_msg_tpl.html42f400.js","a/tpl/smallbanner_info_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/smallbanner_info_tpl.html42f400.js","a/tpl/banner_info_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/banner_info_tpl.html42f400.js","a/tpl/promote_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/promote_tpl.html42f400.js","a/tpl/smallcard_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/smallcard_tpl.html42f400.js","a/tpl/info_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/info_tpl.html42f400.js","a/tpl/cardticket_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/cardticket_tpl.html42f400.js","a/tpl/banner_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/banner_tpl.html42f400.js","a/tpl/sponsor_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/sponsor_tpl.html42f400.js","a/tpl/new_cpc_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/new_cpc_tpl.html42f400.js","appmsg/emotion/caret.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/caret42f400.js","biz_wap/utils/localstorage.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/localstorage42f400.js","appmsg/friend_comment_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/friend_comment_tpl.html42f400.js","appmsg/comment_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/comment_tpl.html42f400.js","biz_wap/utils/fakehash.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/fakehash42f400.js","appmsg/comment_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/comment_report42f400.js","a/appdialog_confirm.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/appdialog_confirm42f400.js","new_video/player.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/new_video/player4306fd.js","a/tpl/mpda_bottom_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/mpda_bottom_tpl.html42f400.js","a/tpl/crt_size_map.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/crt_size_map42f400.js","biz_wap/jsapi/cardticket.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/jsapi/cardticket42f400.js","biz_common/jquery.md5.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/jquery.md542f400.js","biz_common/utils/emoji_panel_data.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/emoji_panel_data42f400.js","biz_common/utils/emoji_data.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/emoji_data42f400.js","appmsg/emotion/textarea.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/textarea42f400.js","appmsg/emotion/nav.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/nav42f400.js","appmsg/emotion/common.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/common42f400.js","appmsg/emotion/slide.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/slide42f400.js","appmsg/emotion/dom.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/dom42f400.js","pages/music_report_conf.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/music_report_conf42f400.js","pages/report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/report4306fd.js","pages/player_adaptor.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/player_adaptor42f400.js","pages/music_player.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/music_player42f400.js","appmsg/more_read_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/more_read_tpl.html42f400.js","appmsg/retry_ajax.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/retry_ajax42f400.js","complain/tips.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/complain/tips42f400.js","pages/loadscript.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/loadscript42f400.js","biz_wap/utils/ajax_load_js.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/ajax_load_js42f400.js","appmsg/comment.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/comment4317dc.js","a/ios.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/ios42f400.js","a/android.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/android42f400.js","a/profile.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/profile42f400.js","a/app_card.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/app_card430506.js","a/sponsor.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/sponsor42f400.js","a/tpl/cpc_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/cpc_tpl.html42f400.js","a/video.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/video42f400.js","a/a_config.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/a_config42f400.js","a/tpl/crt_tpl_manager.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/tpl/crt_tpl_manager42f400.js","a/cpc_a_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/cpc_a_tpl.html42f400.js","a/sponsor_a_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/sponsor_a_tpl.html42f400.js","a/a_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/a_tpl.html42f400.js","a/mpshop.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/mpshop42f400.js","a/wxopen_card.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/wxopen_card42f400.js","a/card.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/card42f400.js","biz_wap/utils/position.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/position42f400.js","a/a_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/a_report42f400.js","biz_wap/utils/show_time.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/show_time42f400.js","biz_common/utils/get_para_list.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/get_para_list42f400.js","biz_wap/utils/openUrl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/openUrl42f400.js","a/a_sign.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/a_sign438181.js","appmsg/my_comment_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/my_comment_tpl.html42f400.js","appmsg/cmt_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/cmt_tpl.html42f400.js","sougou/a_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/sougou/a_tpl.html42f400.js","appmsg/emotion/emotion.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/emotion/emotion42f400.js","biz_common/base64.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/base6442f400.js","biz_common/utils/report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/report42f400.js","appmsg/articleReport.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/articleReport42f400.js","biz_wap/utils/hand_up_state.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/hand_up_state42f400.js","biz_common/utils/http.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/http42f400.js","biz_common/utils/cookie.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/cookie42f400.js","appmsg/topic_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/topic_tpl.html42f400.js","pages/weapp_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/weapp_tpl.html42f400.js","biz_common/utils/monitor.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/monitor42f400.js","pages/voice_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/voice_tpl.html42f400.js","pages/kugoumusic_ctrl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/kugoumusic_ctrl42f400.js","pages/qqmusic_ctrl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/qqmusic_ctrl42f400.js","pages/voice_component.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/voice_component42f400.js","pages/qqmusic_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/qqmusic_tpl.html42f400.js","new_video/ctl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/new_video/ctl4306fd.js","appmsg/open_url_with_webview.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/open_url_with_webview4380a9.js","appmsg/more_read.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/more_read42f400.js","appmsg/reward_entry.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/reward_entry42f400.js","appmsg/like.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/like43875f.js","pages/version4video.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/version4video42f400.js","biz_wap/utils/storage.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/storage42f400.js","appmsg/share_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/share_tpl.html42f400.js","appmsg/appmsgext.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/appmsgext430b95.js","appmsg/img_copyright_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/img_copyright_tpl.html42f400.js","pages/video_ctrl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/video_ctrl42f400.js","pages/create_txv.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/create_txv42f400.js","appmsg/comment_utils.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/comment_utils42f400.js","biz_common/ui/imgonepx.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/ui/imgonepx42f400.js","appmsg/malicious_wording.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/malicious_wording42f400.js","biz_common/utils/wxgspeedsdk.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/wxgspeedsdk42f400.js","a/a.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/a4382e5.js","rt/appmsg/getappmsgext.rt.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/rt/appmsg/getappmsgext.rt42f400.js","pages/video_communicate_adaptor.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/pages/video_communicate_adaptor433882.js","biz_wap/utils/ajax_wx.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/ajax_wx42f400.js","biz_common/utils/respTypes.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/respTypes42f400.js","biz_wap/utils/log.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/log42f400.js","sougou/index.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/sougou/index42f400.js","biz_wap/safe/mutation_observer_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/safe/mutation_observer_report42f400.js","appmsg/fereport.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/fereport438bee.js","appmsg/fereport_without_localstorage.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/fereport_without_localstorage438bee.js","appmsg/report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/report42f400.js","appmsg/report_and_source.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/report_and_source4380a9.js","appmsg/page_pos.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/page_pos431b87.js","appmsg/cdn_speed_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/cdn_speed_report42f400.js","appmsg/wxtopic.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/wxtopic42f400.js","appmsg/weapp.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/weapp433882.js","appmsg/weproduct.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/weproduct42f400.js","appmsg/voicemsg.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/voicemsg42f400.js","appmsg/autoread.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/autoread42f400.js","appmsg/voice.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/voice42f400.js","appmsg/qqmusic.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/qqmusic43440b.js","appmsg/iframe.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/iframe433882.js","appmsg/product.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/product42f400.js","appmsg/review_image.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/review_image435a90.js","appmsg/outer_link.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/outer_link433882.js","appmsg/copyright_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/copyright_report42f400.js","appmsg/async.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/async438bee.js","biz_wap/ui/lazyload_img.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/ui/lazyload_img42f400.js","biz_common/log/jserr.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/log/jserr42f400.js","appmsg/share.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/share42f50a.js","appmsg/cdn_img_lib.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/cdn_img_lib42f400.js","appmsg/finance_communicate.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/finance_communicate42f400.js","page/appmsg_new/not_in_mm.css":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/not_in_mm.css435ee6.js","page/appmsg_new/combo.css":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/appmsg_new/combo.css438c19.js","biz_wap/utils/wapsdk.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/wapsdk42f400.js","a/mpAdAsync.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/a/mpAdAsync4317dc.js","biz_common/utils/url/parse.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/url/parse42f400.js","appmsg/appmsg_report.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/appmsg_report435ac2.js","biz_common/moment.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/moment42f400.js","biz_wap/jsapi/core.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/jsapi/core42f400.js","biz_common/dom/event.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/dom/event42f400.js","appmsg/test.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/test42f400.js","biz_wap/utils/mmversion.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/mmversion42f400.js","appmsg/max_age.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/max_age42f400.js","biz_common/dom/attr.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/dom/attr42f400.js","biz_wap/utils/ajax.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/ajax42f400.js","appmsg/log.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/log42f400.js","biz_common/dom/class.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/dom/class42f400.js","biz_wap/utils/device.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_wap/utils/device42f400.js","appmsg/weapp_common.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/weapp_common42f400.js","biz_common/utils/string/html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/utils/string/html42f400.js","cps/tpl/list_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/cps/tpl/list_tpl.html42f400.js","cps/tpl/card_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/cps/tpl/card_tpl.html42f400.js","cps/tpl/banner_tpl.html.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/cps/tpl/banner_tpl.html42f400.js","biz_common/tmpl.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/biz_common/tmpl42f400.js","appmsg/index.js":"//res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/appmsg/index438e37.js"};</script><script nonce="248925490" type="text/javascript" id="moon_inline" > window.__mooninline=1; window.setTimeout(function() {  function __moonf__(){
if(!window.__moonhasinit){
window.__moonhasinit=!0,window.__moonclientlog=[],window.__wxgspeeds&&(window.__wxgspeeds.moonloadedtime=+new Date),
"object"!=typeof JSON&&(window.JSON={
stringify:function(){
return"";
},
parse:function(){
return{};
}
});
var e=function(){
function e(e){
try{
var o;
/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?o="writeLog":/(Android)/i.test(navigator.userAgent)&&(o="log"),
o&&t(o,e);
}catch(n){
throw console.error(n),n;
}
}
function t(e,o){
var n,r,i={};
n=top!=window?top.window:window;
try{
r=n.WeixinJSBridge,i=n.document;
}catch(a){}
e&&r&&r.invoke?r.invoke(e,{
level:"info",
msg:"[WechatFe][moon]"+o
}):setTimeout(function(){
i.addEventListener?i.addEventListener("WeixinJSBridgeReady",function(){
t(e,o);
},!1):i.attachEvent&&(i.attachEvent("WeixinJSBridgeReady",function(){
t(e,o);
}),i.attachEvent("onWeixinJSBridgeReady",function(){
t(e,o);
}));
},0);
}
var n;
localStorage&&JSON.parse(localStorage.getItem("__WXLS__moonarg"))&&"fromls"==JSON.parse(localStorage.getItem("__WXLS__moonarg")).method&&(n=!0),
e(" moon init, moon_inline:"+window.__mooninline+", moonls:"+n),function(){
var e={},o={},t={};
e.COMBO_UNLOAD=0,e.COMBO_LOADING=1,e.COMBO_LOADED=2;
var n=function(e,t,n){
if(!o[e]){
o[e]=n;
for(var r=3;r--;)try{
moon.setItem(moon.prefix+e,n.toString()),moon.setItem(moon.prefix+e+"_ver",moon_map[e]);
break;
}catch(i){
moon.clear();
}
}
},r=window.alert;
window.__alertList=[],window.alert=function(e){
r(e),window.__alertList.push(e);
};
var i=function(e){
if(!e||!o[e])return null;
var n=o[e];
if("function"==typeof n&&!t[e]){
var a={},s={
exports:a
},c=n(i,a,s,r);
n=o[e]=c||s.exports,t[e]=!0;
}
if(".css"===e.substr(-4)){
var d=document.getElementById(e);
if(!d){
d=document.createElement("style"),d.id=e;
var _=/url\s*\(\s*\/(\"(?:[^\\\"\r\n\f]|\\[\s\S])*\"|'(?:[^\\'\n\r\f]|\\[\s\S])*'|[^)}]+)\s*\)/g,m=window.testenv_reshost||window.__moon_host||"res.wx.qq.com";
n=n.replace(_,"url(//"+m+"/$1)"),d.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(d);
}
}
return n;
};
e.combo_status=e.COMBO_UNLOAD,e.run=function(){
var o=e.run.info,t=o&&o[0],n=o&&o[1];
if(t&&e.combo_status==e.COMBO_LOADED){
var r=i(t);
n&&n(r);
}
},e.use=function(o,t){
window.__wxgspeeds&&(window.__wxgspeeds.seajs_use_time=+new Date),e.run.info=[o,t],
e.run();
},window.define=n,window.seajs=e;
}(),function(){
if(window.__nonce_str){
var e=document.createElement;
document.createElement=function(o){
var t=e.apply(this,arguments);
return"object"==typeof o&&(o=o.toString()),"string"==typeof o&&"script"==o.toLowerCase()&&t.setAttribute("nonce",window.__nonce_str),
t;
};
}
window.addEventListener&&window.__DEBUGINFO&&Math.random()<.01&&window.addEventListener("load",function(){
var e=document.createElement("script");
e.src=__DEBUGINFO.safe_js,e.type="text/javascript",e.async=!0;
var o=document.head||document.getElementsByTagName("head")[0];
o.appendChild(e);
});
}(),function(){
function t(e){
return"[object Array]"===Object.prototype.toString.call(e);
}
function n(e){
return"[object Object]"===Object.prototype.toString.call(e);
}
function r(e){
var t=e.stack+" "+e.toString()||"";
try{
if(window.testenv_reshost){
var n="http(s)?://"+window.testenv_reshost,r=new RegExp(n,"g");
t=t.replace(r,"");
}else t=t.replace(/http(s)?:\/\/res\.wx\.qq\.com/g,"");
for(var r=/\/([^.]+)\/js\/(\S+?)\.js(\,|:)?/g;r.test(t);)t=t.replace(r,function(e,o,t,n){
return t+n;
});
}catch(e){
t=e.stack?e.stack:"";
}
var i=[];
for(o in u)u.hasOwnProperty(o)&&i.push(o+":"+u[o]);
return i.push("STK:"+t.replace(/\n/g,"")),i.join("|");
}
function i(e){
if(!e){
var o=window.onerror;
window.onerror=function(){},f=setTimeout(function(){
window.onerror=o,f=null;
},50);
}
}
function a(e,o,t){
if(!/^mp\.weixin\.qq\.com$/.test(location.hostname)){
var n=[];
t=t.replace(location.href,(location.origin||"")+(location.pathname||"")).replace("#wechat_redirect","").replace("#rd","").split("&");
for(var r=0,i=t.length;i>r;r++){
var a=t[r].split("=");
a[0]&&a[1]&&n.push(a[0]+"="+encodeURIComponent(a[1]));
}
var s=new window.Image;
return void(s.src=(o+n.join("&")).substr(0,1024));
}
var c;
if(window.ActiveXObject)try{
c=new ActiveXObject("Msxml2.XMLHTTP");
}catch(d){
try{
c=new ActiveXObject("Microsoft.XMLHTTP");
}catch(_){
c=!1;
}
}else window.XMLHttpRequest&&(c=new XMLHttpRequest);
c&&(c.open(e,o,!0),c.setRequestHeader("cache-control","no-cache"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),
c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(t));
}
function s(e){
return function(o,t){
if("string"==typeof o)try{
o=new Function(o);
}catch(n){
throw n;
}
var r=[].slice.call(arguments,2),a=o;
return o=function(){
try{
return a.apply(this,r.length&&r||arguments);
}catch(e){
throw e.stack&&console&&console.error&&console.error("[TryCatch]"+e.stack),_&&window.__moon_report&&(window.__moon_report([{
offset:j,
log:"timeout_error;host:"+location.host,
e:e
}]),i(f)),e;
}
},e(o,t);
};
}
function c(e){
return function(o,t,n){
if("undefined"==typeof n)var n=!1;
var r=this,a=t||function(){};
return t=function(){
try{
return a.apply(r,arguments);
}catch(e){
throw e.stack&&console&&console.error&&console.error("[TryCatch]"+e.stack),_&&window.__moon_report&&(window.__moon_report([{
offset:x,
log:"listener_error;type:"+o+";host:"+location.host,
e:e
}]),i(f)),e;
}
},a.moon_lid=E,b[E]=t,E++,e.call(r,o,t,n);
};
}
function d(e){
return function(o,t,n){
if("undefined"==typeof n)var n=!1;
var r=this;
return t=b[t.moon_lid],e.call(r,o,t,n);
};
}
var _,m,l,w,u,p,f,h=/MicroMessenger/i.test(navigator.userAgent),g=/MPAPP/i.test(navigator.userAgent),v=window.define,y=0,x=2,O=4,j=9,D=10;
if(window.__initCatch=function(e){
_=e.idkey,m=e.startKey||0,l=e.limit,w=e.badjsId,u=e.reportOpt||"",p=e.extInfo||{},
p.rate=p.rate||.5;
},window.__moon_report=function(e,o){
var i=!1,s="";
try{
s=top.location.href;
}catch(c){
i=!0;
}
var d=.5;
if(p&&p.rate&&(d=p.rate),o&&"number"==typeof o&&(d=o),!(!/mp\.weixin\.qq\.com/.test(location.href)&&!/payapp\.weixin\.qq\.com/.test(location.href)||Math.random()>d||!h&&!g||top!=window&&!i&&!/mp\.weixin\.qq\.com/.test(s))&&(n(e)&&(e=[e]),
t(e)&&""!=_)){
var u="",f=[],v=[],y=[],x=[];
"number"!=typeof l&&(l=1/0);
for(var j=0;j<e.length;j++){
var D=e[j]||{};
if(!(D.offset>l||"number"!=typeof D.offset||D.offset==O&&p&&p.network_rate&&Math.random()>=p.network_rate)){
var b=1/0==l?m:m+D.offset;
f[j]="[moon]"+_+"_"+b+";"+D.log+";"+r(D.e||{})||"",v[j]=b,y[j]=1;
}
}
for(var E=0;E<v.length;E++)x[E]=_+"_"+v[E]+"_"+y[E],u=u+"&log"+E+"="+f[E];
if(x.length>0){
a("POST",location.protocol+"//mp.weixin.qq.com/mp/jsmonitor?","idkey="+x.join(";")+"&r="+Math.random()+"&lc="+f.length+u);
var d=1;
if(p&&p.badjs_rate&&(d=p.badjs_rate),w&&Math.random()<d){
u=u.replace(/uin\:(.)*\|biz\:(.)*\|mid\:(.)*\|idx\:(.)*\|sn\:(.)*\|/,"");
var S=new Image,I="https://badjs.weixinbridge.com/badjs?id="+w+"&level=4&from="+encodeURIComponent(location.host)+"&msg="+encodeURIComponent(u);
S.src=I.slice(0,1024);
}
}
}
},window.setTimeout=s(window.setTimeout),window.setInterval=s(window.setInterval),
Math.random()<.01&&window.Document&&window.HTMLElement){
var b={},E=0;
Document.prototype.addEventListener=c(Document.prototype.addEventListener),Document.prototype.removeEventListener=d(Document.prototype.removeEventListener),
HTMLElement.prototype.addEventListener=c(HTMLElement.prototype.addEventListener),
HTMLElement.prototype.removeEventListener=d(HTMLElement.prototype.removeEventListener);
}
var S=window.navigator.userAgent;
if((/ip(hone|ad|od)/i.test(S)||/android/i.test(S))&&!/windows phone/i.test(S)&&window.localStorage&&window.localStorage.setItem){
var I=window.localStorage.setItem,L=0;
window.localStorage.setItem=function(e,o){
if(!(L>=10))try{
I.call(window.localStorage,e,o);
}catch(t){
t.stack&&console&&console.error&&console.error("[TryCatch]"+t.stack),window.__moon_report([{
offset:D,
log:"localstorage_error;"+t.toString(),
e:t
}]),L++,L>=3&&window.moon&&window.moon.clear&&moon.clear();
}
};
}
window.seajs&&v&&(window.define=function(){
for(var o,t=[],n=arguments&&arguments[0],a=0,s=arguments.length;s>a;a++){
var c=o=arguments[a];
"function"==typeof o&&(o=function(){
try{
return c.apply(this,arguments);
}catch(o){
throw"string"==typeof n&&console.error("[TryCatch][DefineeErr]id:"+n),o.stack&&console&&console.error&&console.error("[TryCatch]"+o.stack),
_&&window.__moon_report&&(window.__moon_report([{
offset:y,
log:"define_error;id:"+n+";",
e:o
}]),i(f)),e(" [define_error]"+JSON.stringify(r(o))),o;
}
},o.toString=function(e){
return function(){
return e.toString();
};
}(arguments[a])),t.push(o);
}
return v.apply(this,t);
});
}(),function(o){
function t(e,o,t){
return window.__DEBUGINFO?(window.__DEBUGINFO.res_list||(window.__DEBUGINFO.res_list=[]),
window.__DEBUGINFO.res_list[e]?(window.__DEBUGINFO.res_list[e][o]=t,!0):!1):!1;
}
function n(e){
var o=new TextEncoder("utf-8").encode(e),t=crypto.subtle||crypto.webkitSubtle;
return t.digest("SHA-256",o).then(function(e){
return r(e);
});
}
function r(e){
for(var o=[],t=new DataView(e),n=0;n<t.byteLength;n+=4){
var r=t.getUint32(n),i=r.toString(16),a="00000000",s=(a+i).slice(-a.length);
o.push(s);
}
return o.join("");
}
function i(e,o,t){
if("object"==typeof e){
var n=Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,function(e,o){
return o;
});
if(t=t||e,"Array"==n){
for(var r=0,i=e.length;i>r;++r)if(o.call(t,e[r],r,e)===!1)return;
}else{
if("Object"!==n&&a!=e)throw"unsupport type";
if(a==e){
for(var r=e.length-1;r>=0;r--){
var s=a.key(r),c=a.getItem(s);
if(o.call(t,c,s,e)===!1)return;
}
return;
}
for(var r in e)if(e.hasOwnProperty(r)&&o.call(t,e[r],r,e)===!1)return;
}
}
}
var a=o.localStorage,s=document.head||document.getElementsByTagName("head")[0],c=1,d=11,_=12,m=13,l=window.__allowLoadResFromMp?1:2,w=window.__allowLoadResFromMp?1:0,u=l+w,p=window.testenv_reshost||window.__moon_host||"res.wx.qq.com",f=new RegExp("^(http(s)?:)?//"+p);
window.__loadAllResFromMp&&(p="mp.weixin.qq.com",l=0,u=l+w);
var h={
prefix:"__MOON__",
loaded:[],
unload:[],
clearSample:!0,
hit_num:0,
mod_num:0,
version:1003,
cacheData:{
js_mod_num:0,
js_hit_num:0,
js_not_hit_num:0,
js_expired_num:0,
css_mod_num:0,
css_hit_num:0,
css_not_hit_num:0,
css_expired_num:0
},
init:function(){
h.loaded=[],h.unload=[];
var e,t,r;
if(window.no_moon_ls&&(h.clearSample=!0),a){
var s="_moon_ver_key_",c=a.getItem(s);
c!=h.version&&(h.clear(),a.setItem(s,h.version));
}
if((-1!=location.search.indexOf("no_moon1=1")||-1!=location.search.indexOf("no_lshttps=1"))&&h.clear(),
a){
var d=1*a.getItem(h.prefix+"clean_time"),_=+new Date;
if(_-d>=1296e6){
h.clear();
try{
!!a&&a.setItem(h.prefix+"clean_time",+new Date);
}catch(m){}
}
}
i(moon_map,function(i,s){
if(t=h.prefix+s,r=!!i&&i.replace(f,""),e=!!a&&a.getItem(t),version=!!a&&(a.getItem(t+"_ver")||"").replace(f,""),
h.mod_num++,r&&-1!=r.indexOf(".css")?h.cacheData.css_mod_num++:r&&-1!=r.indexOf(".js")&&h.cacheData.js_mod_num++,
h.clearSample||!e||r!=version)h.unload.push(r.replace(f,"")),r&&-1!=r.indexOf(".css")?e?r!=version&&h.cacheData.css_expired_num++:h.cacheData.css_not_hit_num++:r&&-1!=r.indexOf(".js")&&(e?r!=version&&h.cacheData.js_expired_num++:h.cacheData.js_not_hit_num++);else{
if("https:"==location.protocol&&window.moon_hash_map&&window.moon_hash_map[s]&&window.crypto)try{
n(e).then(function(e){
window.moon_hash_map[s]!=e&&console.log(s);
});
}catch(c){}
try{
var d="//# sourceURL="+s+"\n//@ sourceURL="+s;
o.eval.call(o,'define("'+s+'",[],'+e+")"+d),h.hit_num++,r&&-1!=r.indexOf(".css")?h.cacheData.css_hit_num++:r&&-1!=r.indexOf(".js")&&h.cacheData.js_hit_num++;
}catch(c){
h.unload.push(r.replace(f,""));
}
}
}),h.load(h.genUrl());
},
genUrl:function(){
var e=h.unload;
if(!e||e.length<=0)return[];
var o,t,n="",r=[],i={},a=-1!=location.search.indexOf("no_moon2=1"),s="//"+p;
-1!=location.href.indexOf("moon_debug2=1")&&(s="//mp.weixin.qq.com");
for(var c=0,d=e.length;d>c;++c){
/^\/(.*?)\//.test(e[c]);
var _=/^\/(.*?)\//.exec(e[c]);
_.length<2||!_[1]||(t=_[1],n=i[t],n?(o=n+","+e[c],o.length>1e3||a?(r.push(n+"?v="+h.version),
n=location.protocol+s+e[c],i[t]=n):(n=o,i[t]=n)):(n=location.protocol+s+e[c],i[t]=n));
}
for(var m in i)i.hasOwnProperty(m)&&r.push(i[m]);
return r;
},
load:function(e){
if(window.__wxgspeeds&&(window.__wxgspeeds.mod_num=h.mod_num,window.__wxgspeeds.hit_num=h.hit_num),
!e||e.length<=0)return seajs.combo_status=seajs.COMBO_LOADED,seajs.run(),console.debug&&console.debug("[moon] load js complete, all in cache, cost time : 0ms, total count : "+h.mod_num+", hit num: "+h.hit_num),
void window.__moonclientlog.push("[moon] load js complete, all in cache, cost time : 0ms, total count : "+h.mod_num+", hit num: "+h.hit_num);
seajs.combo_status=seajs.COMBO_LOADING;
var o=0,t=+new Date;
window.__wxgspeeds&&(window.__wxgspeeds.combo_times=[],window.__wxgspeeds.combo_times.push(t)),
i(e,function(n){
h.request(n,u,function(){
if(window.__wxgspeeds&&window.__wxgspeeds.combo_times.push(+new Date),o++,o==e.length){
var n=+new Date-t;
window.__wxgspeeds&&(window.__wxgspeeds.mod_downloadtime=n),seajs.combo_status=seajs.COMBO_LOADED,
seajs.run(),console.debug&&console.debug("[moon] load js complete, url num : "+e.length+", total mod count : "+h.mod_num+", hit num: "+h.hit_num+", use time : "+n+"ms"),
window.__moonclientlog.push("[moon] load js complete, url num : "+e.length+", total mod count : "+h.mod_num+", hit num: "+h.hit_num+", use time : "+n+"ms");
}
});
});
},
request:function(o,n,r){
if(o){
n=n||0,o.indexOf("mp.weixin.qq.com")>-1&&((new Image).src=location.protocol+"//mp.weixin.qq.com/mp/jsmonitor?idkey=27613_32_1&r="+Math.random(),
window.__moon_report([{
offset:_,
log:"load_script_from_mp: "+o
}],1));
var i=-1;
window.__DEBUGINFO&&(__DEBUGINFO.res_list||(__DEBUGINFO.res_list=[]),__DEBUGINFO.res_list.push({
type:"js",
status:"pendding",
start:+new Date,
end:0,
url:o
}),i=__DEBUGINFO.res_list.length-1),-1!=location.search.indexOf("no_lshttps=1")&&(o=o.replace("http://","https://"));
var a=document.createElement("script");
a.src=o,a.type="text/javascript",a.async=!0,a.down_time=+new Date,a.onerror=function(s){
t(i,"status","error"),t(i,"end",+new Date);
var _=new Error(s);
if(n>=0)if(w>n){
var l=o.replace("res.wx.qq.com","mp.weixin.qq.com");
h.request(l,n,r);
}else h.request(o,n,r);else window.__moon_report&&window.__moon_report([{
offset:c,
log:"load_script_error: "+o,
e:_
}],1);
if(n==w-1&&window.__moon_report([{
offset:d,
log:"load_script_error: "+o,
e:_
}],1),-1==n){
var u="ua: "+window.navigator.userAgent+", time="+(+new Date-a.down_time)+", load_script_error -1 : "+o;
window.__moon_report([{
offset:m,
log:u
}],1);
}
window.__moonclientlog.push("moon load js error : "+o+", error -> "+_.toString()),
e("moon_request_error url:"+o);
},"undefined"!=typeof moon_crossorigin&&moon_crossorigin&&a.setAttribute("crossorigin",!0),
a.onload=a.onreadystatechange=function(){
t(i,"status","loaded"),t(i,"end",+new Date),!a||a.readyState&&!/loaded|complete/.test(a.readyState)||(t(i,"status","200"),
a.onload=a.onreadystatechange=null,"function"==typeof r&&r());
},n--,s.appendChild(a),e("moon_request url:"+o+" retry:"+n);
}
},
setItem:function(e,o){
!!a&&a.setItem(e,o);
},
clear:function(){
a&&(i(a,function(e,o){
~o.indexOf(h.prefix)&&a.removeItem(o);
}),console.debug&&console.debug("[moon] clear"));
},
idkeyReport:function(e,o,t){
t=t||1;
var n=e+"_"+o+"_"+t;
(new Image).src="/mp/jsmonitor?idkey="+n+"&r="+Math.random();
}
};
seajs&&seajs.use&&"string"==typeof window.__moon_mainjs&&seajs.use(window.__moon_mainjs),
window.moon=h;
}(window),function(){
try{
Math.random()<1;
}catch(e){}
}(),window.moon.init();
};
e(),!!window.__moon_initcallback&&window.__moon_initcallback(),window.__wxgspeeds&&(window.__wxgspeeds.moonendtime=+new Date);
}
}
__moonf__(); }, 25);</script><script nonce="248925490" type="text/javascript">
    var real_show_page_time = +new Date();
    if (!!window.addEventListener){
        window.addEventListener("load", function(){
            window.onload_endtime = +new Date();
        });
    }

    
    if(typeof seajs != 'undefined' && seajs.config){
        try{
            seajs.config({
              'map': [
                [ '.js', '.js?v=' + (+new Date())]
              ]
            });
        }catch(e){
            console.info('not support seajs config');
        }
    }

    
</script>

    </body>
    <script nonce="248925490" type="text/javascript">document.addEventListener("touchstart", function() {},false);</script>
</html>

